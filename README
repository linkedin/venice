#####################################################
######################### VENICE ####################
#####################################################

Welcome to Venice, the highly available data serving platform.

---------------------
Dependencies
---------------------

To use Venice, the following programs must be installed and running on your local machine:
- Apache Kafka Version 0.9.0
- Apache Zookeeper 3.4.6
- Apache Helix 0.6.5

1) Start Apache Zookeeper on the local machine. The installation will have guides on how to do this.
2) Start Apache Kafka on the local machine.
3) Start and use Venice.  Note: Start the Venice Controller, then start the Venice Server

-----------------------
Build
-----------------------

First, ensure that each project has been built. If not, please run: (from the project root directory)

To build and install ALL PROJECTS:
> ./gradlew buildAll

If the above does not work, you may resort to building each component seperately.

To build and install Venice client:
> ./gradlew :venice-client:clean venice-client:installApp

To build and install Venice server:
> ./gradlew :venice-server:clean :venice-server:installApp

----------------------
Quickstart
----------------------

To start ZK:

> ./quickstart/zookeeper-server.sh

To start Kafka:

> TODO, we'll add an easy script here.

To start the controller:

> ./quickstart/start-venice-controller.sh

To start the server:

> ./quickstart/start-venice-server.sh

To start the router:

> ./quickstart/start-venice-router.sh

----------------------
Interact with Venice
----------------------

There are two ways to read data out of Venice. 

1) Venice is usable through its Java Client API.
2) Venice commands are also executable through a Shell Client, which is also provided.

To add test stores (not necessary if you're going to run H2V):

> curl --data "storename=default_store&store_size=10000&owner=venice-dev" 127.0.0.1:7075/create
> curl --data "storename=test_shell_store&store_size=1000&owner=venice-dev" 127.0.0.1:7075/create

To query a job status:

> curl "127.0.0.1:7075/job?storename=test_shell_store&version=1"

To use the shell client:

> venice-client/quickstart/venice-client.sh [args]

---------------------------------------------------------------------
WORK IN PROGRESS / CURRENT LIMITATIONS OF CLIENT SHELL
---------------------------------------------------------------------

1) Client shell only works with Primitive types for key. 
2) Client shell expects the topic name ( <storename>_v<versionNumber> or the Kafka topic name for the store name).

-----------------------
Arguments
-----------------------

1) Commands
One of: ( --get, --put, --delete, --interactive ) must be present and specify the type of action to perform.

2) --key
The key to be given to Venice.

3) --value (only required for PUT)
The value to be specified with a PUT in Venice.

4) --store (optional)
The name of the store to use, note store name is the same as kafka topic name
If omitted, will use store name "test_shell_store"

Examples:

> ./venice-client/quickstart/venice-client.sh --get --key 151780654 --store myCountry_v1
> ./venice-client/quickstart/venice-client.sh --put --key 151780654 --value test_value --store myCountry_v1
> ./venice-client/quickstart/venice-client.sh --delete --key 151780654 --store myCountry_v1
> ./venice-client/quickstart/venice-client.sh --interactive

-----------------------
Questions?
-----------------------
Venice Engineering Team - venice-eng@linkedin.com

