<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Derived Data Platform for Planet-Scale Workloads"><meta name=author content="Venice Team"><link href=https://venicedb.org/contributing/architecture/java-internals/ rel=canonical><link href=../write-path/ rel=prev><link href=../router-api/ rel=next><link rel=icon href=../../../assets/style/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Java Internals - Venice</title><link rel=stylesheet href=../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/style/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=white> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#java class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=Venice class="md-header__button md-logo" aria-label=Venice data-md-component=logo> <img src=../../../assets/style/venice_full_lion_logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Venice </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Java Internals </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=white aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=black aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/linkedin/venice title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> linkedin/venice </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../../user-guide/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../../operations/ class=md-tabs__link> Operations </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> Contributing </a> </li> <li class=md-tabs__item> <a href=../../../resources/learn-more/ class=md-tabs__link> Resources </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=Venice class="md-nav__button md-logo" aria-label=Venice data-md-component=logo> <img src=../../../assets/style/venice_full_lion_logo.svg alt=logo> </a> Venice </label> <div class=md-nav__source> <a href=https://github.com/linkedin/venice title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> linkedin/venice </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../../getting-started/ class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../getting-started/quickstart-single-dc/ class=md-nav__link> <span class=md-ellipsis> Single Datacenter </span> </a> </li> <li class=md-nav__item> <a href=../../../getting-started/quickstart-multi-dc/ class=md-nav__link> <span class=md-ellipsis> Multi Datacenter </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../../user-guide/ class="md-nav__link "> <span class=md-ellipsis> User Guide </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-guide/concepts/overview/ class=md-nav__link> <span class=md-ellipsis> Venice Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/concepts/ttl/ class=md-nav__link> <span class=md-ellipsis> Time to Live (TTL) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__container"> <a href=../../../user-guide/write-apis/ class="md-nav__link "> <span class=md-ellipsis> Write APIs </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Write APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-guide/write-apis/batch-push/ class=md-nav__link> <span class=md-ellipsis> Batch Push </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/write-apis/stream-processor/ class=md-nav__link> <span class=md-ellipsis> Stream Processor </span> </a> </li> <li class=md-nav__item> <a href=../../../user-guide/write-apis/online-producer/ class=md-nav__link> <span class=md-ellipsis> Online Producer </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__container"> <a href=../../../user-guide/read-apis/ class="md-nav__link "> <span class=md-ellipsis> Read APIs </span> </a> <label class="md-nav__link " for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Read APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-guide/read-apis/da-vinci-client/ class=md-nav__link> <span class=md-ellipsis> Da Vinci Client </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <div class="md-nav__link md-nav__container"> <a href=../../../user-guide/design-patterns/ class="md-nav__link "> <span class=md-ellipsis> Design Patterns </span> </a> <label class="md-nav__link " for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Design Patterns </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../user-guide/design-patterns/merging-batch-and-rt/ class=md-nav__link> <span class=md-ellipsis> Merging Batch & RT </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../../operations/ class="md-nav__link "> <span class=md-ellipsis> Operations </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Data Management </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Data Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/data-management/repush/ class=md-nav__link> <span class=md-ellipsis> Repush </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/data-management/system-stores/ class=md-nav__link> <span class=md-ellipsis> System Stores </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../operations/advanced/p2p-bootstrapping/ class=md-nav__link> <span class=md-ellipsis> P2P Bootstrapping </span> </a> </li> <li class=md-nav__item> <a href=../../../operations/advanced/data-integrity/ class=md-nav__link> <span class=md-ellipsis> Data Integrity </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> Contributing </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../code-of-conduct/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing Guide </span> </a> </li> <li class=md-nav__item> <a href=../../security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/workspace-setup/ class=md-nav__link> <span class=md-ellipsis> Workspace Setup </span> </a> </li> <li class=md-nav__item> <a href=../../development/dev-workflow/ class=md-nav__link> <span class=md-ellipsis> Dev Workflow </span> </a> </li> <li class=md-nav__item> <a href=../../development/testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../development/style-guide/ class=md-nav__link> <span class=md-ellipsis> Style Guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_6 checked> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=true> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../navigation/ class=md-nav__link> <span class=md-ellipsis> Project Navigation </span> </a> </li> <li class=md-nav__item> <a href=../write-path/ class=md-nav__link> <span class=md-ellipsis> Write Path </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Java Internals </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Java Internals </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#table-of-contents class=md-nav__link> <span class=md-ellipsis> Table of Contents </span> </a> </li> <li class=md-nav__item> <a href=#java-in-a-nutshell class=md-nav__link> <span class=md-ellipsis> Java in a Nutshell </span> </a> <nav class=md-nav aria-label="Java in a Nutshell"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#statically-typed class=md-nav__link> <span class=md-ellipsis> Statically Typed </span> </a> </li> <li class=md-nav__item> <a href=#dynamically-compiled class=md-nav__link> <span class=md-ellipsis> Dynamically Compiled </span> </a> </li> <li class=md-nav__item> <a href=#object-oriented class=md-nav__link> <span class=md-ellipsis> Object-Oriented </span> </a> </li> <li class=md-nav__item> <a href=#managed-memory class=md-nav__link> <span class=md-ellipsis> Managed Memory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-languages class=md-nav__link> <span class=md-ellipsis> Other Languages </span> </a> <nav class=md-nav aria-label="Other Languages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#c class=md-nav__link> <span class=md-ellipsis> C++ </span> </a> </li> <li class=md-nav__item> <a href=#scala class=md-nav__link> <span class=md-ellipsis> Scala </span> </a> </li> <li class=md-nav__item> <a href=#groovy class=md-nav__link> <span class=md-ellipsis> Groovy </span> </a> </li> <li class=md-nav__item> <a href=#javascript class=md-nav__link> <span class=md-ellipsis> Javascript </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#java-versions class=md-nav__link> <span class=md-ellipsis> Java Versions </span> </a> </li> <li class=md-nav__item> <a href=#memory class=md-nav__link> <span class=md-ellipsis> Memory </span> </a> <nav class=md-nav aria-label=Memory> <ul class=md-nav__list> <li class=md-nav__item> <a href=#memory-allocation class=md-nav__link> <span class=md-ellipsis> Memory Allocation </span> </a> </li> <li class=md-nav__item> <a href=#garbage-collection class=md-nav__link> <span class=md-ellipsis> Garbage Collection </span> </a> </li> <li class=md-nav__item> <a href=#memory-layout class=md-nav__link> <span class=md-ellipsis> Memory Layout </span> </a> </li> <li class=md-nav__item> <a href=#why-ever-use-objects-rather-than-primitives class=md-nav__link> <span class=md-ellipsis> Why Ever Use Objects Rather than Primitives? </span> </a> </li> <li class=md-nav__item> <a href=#estimating-the-heap-size-of-objects class=md-nav__link> <span class=md-ellipsis> Estimating the Heap Size of Objects </span> </a> </li> <li class=md-nav__item> <a href=#concurrent-access-to-memory class=md-nav__link> <span class=md-ellipsis> Concurrent Access to Memory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../router-api/ class=md-nav__link> <span class=md-ellipsis> Router API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../documentation/writing-docs/ class=md-nav__link> <span class=md-ellipsis> Writing Docs </span> </a> </li> <li class=md-nav__item> <a href=../../documentation/design-docs/ class=md-nav__link> <span class=md-ellipsis> Design Docs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_8> <div class="md-nav__link md-nav__container"> <a href=../../proposals/ class="md-nav__link "> <span class=md-ellipsis> Proposals </span> </a> <label class="md-nav__link " for=__nav_5_8 id=__nav_5_8_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> Proposals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../proposals/vip-template/ class=md-nav__link> <span class=md-ellipsis> VIP Template </span> </a> </li> <li class=md-nav__item> <a href=../../proposals/vip-1/ class=md-nav__link> <span class=md-ellipsis> VIP-1 </span> </a> </li> <li class=md-nav__item> <a href=../../proposals/vip-2/ class=md-nav__link> <span class=md-ellipsis> VIP-2 </span> </a> </li> <li class=md-nav__item> <a href=../../proposals/vip-3/ class=md-nav__link> <span class=md-ellipsis> VIP-3 </span> </a> </li> <li class=md-nav__item> <a href=../../proposals/vip-4/ class=md-nav__link> <span class=md-ellipsis> VIP-4 </span> </a> </li> <li class=md-nav__item> <a href=../../proposals/vip-5/ class=md-nav__link> <span class=md-ellipsis> VIP-5 </span> </a> </li> <li class=md-nav__item> <a href=../../proposals/vip-6/ class=md-nav__link> <span class=md-ellipsis> VIP-6 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../resources/learn-more/ class=md-nav__link> <span class=md-ellipsis> Learn More </span> </a> </li> <li class=md-nav__item> <a href=../../../resources/api-reference/ class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> </li> <li class=md-nav__item> <a href=../../../resources/community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#table-of-contents class=md-nav__link> <span class=md-ellipsis> Table of Contents </span> </a> </li> <li class=md-nav__item> <a href=#java-in-a-nutshell class=md-nav__link> <span class=md-ellipsis> Java in a Nutshell </span> </a> <nav class=md-nav aria-label="Java in a Nutshell"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#statically-typed class=md-nav__link> <span class=md-ellipsis> Statically Typed </span> </a> </li> <li class=md-nav__item> <a href=#dynamically-compiled class=md-nav__link> <span class=md-ellipsis> Dynamically Compiled </span> </a> </li> <li class=md-nav__item> <a href=#object-oriented class=md-nav__link> <span class=md-ellipsis> Object-Oriented </span> </a> </li> <li class=md-nav__item> <a href=#managed-memory class=md-nav__link> <span class=md-ellipsis> Managed Memory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#other-languages class=md-nav__link> <span class=md-ellipsis> Other Languages </span> </a> <nav class=md-nav aria-label="Other Languages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#c class=md-nav__link> <span class=md-ellipsis> C++ </span> </a> </li> <li class=md-nav__item> <a href=#scala class=md-nav__link> <span class=md-ellipsis> Scala </span> </a> </li> <li class=md-nav__item> <a href=#groovy class=md-nav__link> <span class=md-ellipsis> Groovy </span> </a> </li> <li class=md-nav__item> <a href=#javascript class=md-nav__link> <span class=md-ellipsis> Javascript </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#java-versions class=md-nav__link> <span class=md-ellipsis> Java Versions </span> </a> </li> <li class=md-nav__item> <a href=#memory class=md-nav__link> <span class=md-ellipsis> Memory </span> </a> <nav class=md-nav aria-label=Memory> <ul class=md-nav__list> <li class=md-nav__item> <a href=#memory-allocation class=md-nav__link> <span class=md-ellipsis> Memory Allocation </span> </a> </li> <li class=md-nav__item> <a href=#garbage-collection class=md-nav__link> <span class=md-ellipsis> Garbage Collection </span> </a> </li> <li class=md-nav__item> <a href=#memory-layout class=md-nav__link> <span class=md-ellipsis> Memory Layout </span> </a> </li> <li class=md-nav__item> <a href=#why-ever-use-objects-rather-than-primitives class=md-nav__link> <span class=md-ellipsis> Why Ever Use Objects Rather than Primitives? </span> </a> </li> <li class=md-nav__item> <a href=#estimating-the-heap-size-of-objects class=md-nav__link> <span class=md-ellipsis> Estimating the Heap Size of Objects </span> </a> </li> <li class=md-nav__item> <a href=#concurrent-access-to-memory class=md-nav__link> <span class=md-ellipsis> Concurrent Access to Memory </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion class=md-nav__link> <span class=md-ellipsis> Conclusion </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../../ class=md-path__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-path__item> <a href=../navigation/ class=md-path__link> <span class=md-ellipsis> Architecture </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <a href=https://github.com/linkedin/venice/edit/main/docs/contributing/architecture/java-internals.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=java>Java<a class=headerlink href=#java title="Permanent link">&para;</a></h1> <p>{: .no_toc }</p> <p>The Venice codebase is completely in Java, and therefore it is important to have at least a basic understanding of the language and its runtime, the Java Virtual Machine (JVM). This page is not intended to be an in-depth resource on Java, but might be a useful starting point for Java beginners. Links to more in-depth resources will be provided along the way, and in cases where there are many distinct ways of using Java, guidance will be provided in terms of the Venice project's expectations.</p> <h2 id=table-of-contents>Table of Contents<a class=headerlink href=#table-of-contents title="Permanent link">&para;</a></h2> <p>{: .no_toc }</p> <ul> <li toc=toc>TOC</li> </ul> <h2 id=java-in-a-nutshell>Java in a Nutshell<a class=headerlink href=#java-in-a-nutshell title="Permanent link">&para;</a></h2> <p>Java as a language is statically typed, dynamically compiled, object-oriented, and provides managed memory. Let's briefly go over each of these buzzwords.</p> <h3 id=statically-typed>Statically Typed<a class=headerlink href=#statically-typed title="Permanent link">&para;</a></h3> <p>Static typing, also known as strong typing, is the notion that a variable is declared to have a given type, and that the language provides guarantees that it is only possible to assign data to this variable which conforms to the declared type. This guarantee is ensured at compilation-time, which is good in the sense that compilation happens early in the development lifecycle, therefore preventing trivial mistakes from creeping into production systems and being discovered there, at run-time, when it is already too late. Static typing therefore provides a maintenance benefit</p> <p>In addition, static typing also provides a performance benefit, because the compiled code can make certain assumptions which a dynamically typed language could not. This enables certain low-level optimizations to take place.</p> <h3 id=dynamically-compiled>Dynamically Compiled<a class=headerlink href=#dynamically-compiled title="Permanent link">&para;</a></h3> <p>Although Java programs need to be compiled, they are not compiled directly to machine code, but rather to an "intermediate representation" called bytecode. The bytecode can then be loaded into a Java Virtual Machine (JVM), which interprets it, and dynamically compiles architecture-specific code to run it. This means that Java code is portable ("compile once, run everywhere"), though in practice, in the case of Venice, the code has been exercised mainly on Linux (for production usage) and macOS (as a development environment). In theory, it should work on Windows or other platforms though it has not been tested there.</p> <p>An additional benefit of dynamic compilation is, again, performance. The JVM features a JIT (Just-in-time) Compiler which uses heuristics to analyze which code paths are most frequently called. These code paths end up being recompiled into even more optimal versions.</p> <h3 id=object-oriented>Object-Oriented<a class=headerlink href=#object-oriented title="Permanent link">&para;</a></h3> <p>Java at its core is an object-oriented language, although over the years it has also added certain other paradigms such as functional programming. What it means concretely is that design patterns such as encapsulation, inheritance and polymorphism are well-supported.</p> <h3 id=managed-memory>Managed Memory<a class=headerlink href=#managed-memory title="Permanent link">&para;</a></h3> <p>An important aspect of Java is that memory management is abstracted away from the programmer. In particular, there is no need to explicitly <em>free</em> allocated memory, and there is no risk of accidentally accessing a memory address after it has been freed. This design improves both reliability and security, however, it comes at the cost of needing garbage collection, which in some cases is a performance drag. These various aspects are explored more in-depth in later sections.</p> <h2 id=other-languages>Other Languages<a class=headerlink href=#other-languages title="Permanent link">&para;</a></h2> <p>Before diving deeper into Java itself, it may be good to point out the role of some other languages. Although the Venice codebase is in Java, some of Venice's dependencies are not in Java.</p> <p>Furthermore, there may be other languages introduced to the Venice codebase in the future, for example Python tooling or <a href=../../proposals/vip-3/ >Rust server code</a>.</p> <h3 id=c>C++<a class=headerlink href=#c title="Permanent link">&para;</a></h3> <p>There are two major dependencies which are written in C++, and which are accessed via the <a href=https://docs.oracle.com/en/java/javase/17/docs/specs/jni/intro.html>Java Native Interface</a> (JNI):</p> <ul> <li>The <a href=https://rocksdb.org>RocksDB</a> storage engine.</li> <li>The <a href=https://facebook.github.io/zstd/ >ZSTD</a> compression algorithm.</li> </ul> <h3 id=scala>Scala<a class=headerlink href=#scala title="Permanent link">&para;</a></h3> <p>Some other Venice dependencies are written in <a href=https://www.scala-lang.org>Scala</a>, a language which gets compiled into bytecode and runs within the JVM, alongside the bytecode compiled from Java.</p> <p>Although inter-operability between Java and Scala is supported, there are nonetheless certain challenges associated with the use of Scala due to the incompatibility across minor versions and the need to cross-compile Scala dependencies across a range of minor versions.</p> <p>For this reason, the Venice project intends to not make use of any Scala within its codebase, and to limit the use of Scala dependencies to the most minimal number of modules possible. In particular:</p> <ul> <li>The <a href=https://kafka.apache.org>Kafka</a> broker is written in Scala, but not the Kafka client library. The broker is only used within integration tests, and the main code should not depend on it.</li> <li>The <a href=https://spark.apache.org>Spark</a> framework is a runtime dependency of the <a href=../../../user-guide/write-apis/batch-push/ >Venice Push Job</a>, and therefore VPJ is the only production module which carries a (transitive) dependency to Scala.</li> </ul> <h3 id=groovy>Groovy<a class=headerlink href=#groovy title="Permanent link">&para;</a></h3> <p>The build system, <a href=https://gradle.org>Gradle</a>, functions with the <a href=https://groovy-lang.org>Groovy language</a>, and so the build files of each module are written in that language. Like Scala, Groovy is also a language that runs within the JVM, and is interoperable with Java. We do not intend to use Groovy outside of build files.</p> <h3 id=javascript>Javascript<a class=headerlink href=#javascript title="Permanent link">&para;</a></h3> <p>Finally, there is even a tiny bit of Node.js running in some of the GitHub Actions plugins, used to generate reports! It takes a village to raise a distributed database, and Venice is no exception! Like Groovy, this is a build dependency and there is no intent to use JS anywhere else in the codebase.</p> <h2 id=java-versions>Java Versions<a class=headerlink href=#java-versions title="Permanent link">&para;</a></h2> <p>Currently, the Venice project intends to support Java versions 8, 11 and 17. This means that the codebase cannot use language features that have been introduced in versions later than 8. We hope to lift this restriction in the future and drop support for older Java versions. For the time being, the build ensures that compilation will fail if recent language features are used.</p> <p>The main motivation for maintaining compatibility with older Java versions is to support legacy applications which depend on the Venice client libraries. The Venice services (controller, router and server) also work on older Java versions though in practice we run them on Java 17 JVMs, which provide better performance. As much as possible, it is recommended to run all Venice code on the latest supported JVM version.</p> <h2 id=memory>Memory<a class=headerlink href=#memory title="Permanent link">&para;</a></h2> <p>Memory is a big subject for any programming language, and Java is no exception. It is important to understand the basic characteristics of how memory is allocated, garbage collected, laid out, measured and accessed.</p> <h3 id=memory-allocation>Memory Allocation<a class=headerlink href=#memory-allocation title="Permanent link">&para;</a></h3> <p>Memory can be allocated either on the Java <em>stack</em>, the Java <em>heap</em> or in <em>native</em> memory.</p> <p>Allocations to the stack include all local variables of primitive types (boolean, int, float, etc.) as well as pointers to objects. <a href=https://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html>Local variables</a> are those defined within the scope of a function and are therefore inaccessible outside that scope.</p> <p>Allocations on the heap include all objects, as well as the fields and pointers they contain.</p> <p>Allocations to native memory are special in the sense that they require extra care (see Garbage Collection, below). Within the Venice codebase, there is no explicit allocation of native memory, but some of Venice's dependencies do use native memory, for example <a href=https://netty.io>Netty</a> and RocksDB.</p> <h3 id=garbage-collection>Garbage Collection<a class=headerlink href=#garbage-collection title="Permanent link">&para;</a></h3> <p>Garbage Collection (usually referred to as GC) is an important aspect of Java. The JVM provides "managed memory", meaning that memory is automatically allocated and deallocated as necessary, with minimal effort from the developer. Although this is ergonomically useful, it is still important to understand the basic principles of GC as it can have performance implications, and Venice is a performance-sensitive project. Let's take the stack, heap and native allocations introduced previously and see how each of them behaves in terms of GC.</p> <p>Memory allocated on the stack is automatically deallocated as soon as it goes out of scope (e.g. when the function, or if block or while loop in which it was allocated finishes). This makes stack allocations very efficient since there is not "leftover" work to take care of (see below).</p> <p>Memory allocated on the heap, on the other hand, can (at least <a href=https://blogs.oracle.com/javamagazine/post/escape-analysis-in-the-hotspot-jit-compiler>potentially</a>) have a lifespan greater than the scope within which it was allocated. For example, if an allocated object is assigned to the field of another object, then the lifecycle of the former object becomes tied to that of the latter one. These objects on the heap eventually need to be cleaned up, which is the responsibility of the Garbage Collector and is accomplished asynchronously via background threads, reference counting and other mechanisms. The details are outside the scope of this wiki page, but suffice to say that GC has a cost, and so we do care about minimizing garbage generation in performance-sensitive hot paths.</p> <p>Finally, native memory allocation requires manual memory management, as the JVM will not take care of automatically deallocating it as part of GC. This is the reason why it is important, for example, to close objects returned by RocksDB when they are no longer in use, and to invoke the <a href=https://netty.io/wiki/reference-counted-objects.html>ref counting APIs of Netty</a> when appropriate.</p> <h4 id=memory-leaks>Memory Leaks<a class=headerlink href=#memory-leaks title="Permanent link">&para;</a></h4> <p>Memory allocated on the heap or natively can leak, which causes severe operational issues.</p> <p>In the case of heap allocations, a leak can occur if references to unneeded objects are maintained. This results in GC not being capable of eliminating this garbage since the ref counting concludes that the referenced objects are ineligible for collection. After the heap fills up, further allocations will result in <a href=https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/OutOfMemoryError.html>OutOfMemoryError</a> getting thrown. In order to debug this type of issue, it is useful to configure the JVM with the <code>-XX:HeapDumpOnOutOfMemoryError</code> config flag, and conduct heap dump analysis. See these <a href=https://docs.oracle.com/en/java/javase/17/troubleshoot/troubleshooting-memory-leaks.html>mem leak troubleshooting tips</a> to dig deeper.</p> <p>In the case of native allocations, a leak can occur if the Java code fails to explicitly release the objects. This can ultimately cause the process to get terminated by the OS' OOM Killer.</p> <h3 id=memory-layout>Memory Layout<a class=headerlink href=#memory-layout title="Permanent link">&para;</a></h3> <p>It can be useful to understand how objects are laid out in memory, in order to get a sense of the overhead of the data structures we design. In general, the main design criteria is simply to adhere to object-oriented principles in order to achieve encapsulation and other characteristics of interest. But in cases where some pieces of data need to be allocated on the hot path (i.e., at high throughput), or be retained for long periods of time, it can be useful to pay attention to what the heap size of the data is going to be, with an eye towards minimizing its footprint. This section is a just a high-level overview, and more details can be found in <a href=https://shipilev.net/jvm/objects-inside-out/ >Java Objects Inside Out</a>.</p> <h4 id=memory-impacting-configurations>Memory-Impacting Configurations<a class=headerlink href=#memory-impacting-configurations title="Permanent link">&para;</a></h4> <p>Note that memory layout details are dependent on which version of the JVM is used, as well as various JVM settings. In order to facilitate explanations throughout this whole section, we will provide concrete memory size numbers based on a specific (though, arguably, fairly common) set of JVM configurations:</p> <ul> <li>64 bits JVM</li> <li>Java 17</li> <li>Max heap size of less than 32 GB</li> <li>All other memory-related settings on their default values, including:</li> <li>Compressed pointers (enabled)</li> <li>Compressed class pointers (enabled)</li> <li>Alignment size (8 bytes)</li> </ul> <h4 id=object-headers>Object Headers<a class=headerlink href=#object-headers title="Permanent link">&para;</a></h4> <p>All objects in Java have a header, which is made up of a mark word and a class pointer. The mark word contains various JVM internal details such as GC-related bookkeeping, the identity hashcode, and locking information, while the class pointer is a reference to the memory address of the class definition inside the metaspace.</p> <p>Assuming the above JVM configuration details, the object layout will carry 12 bytes worth of header, and therefore look like this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>|           mark word           | class pointer |     fields    |
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>|&lt;---------- 8 bytes ----------&gt;|&lt;-- 4 bytes --&gt;|&lt;-- N bytes --&gt;|
</code></pre></div> <p>In the case of arrays, there is one more header field, which is an <code>int</code> storing the length, and that is followed by each element stored in the array (either primitives stored inline, or pointers to Objects stored elsewhere on the heap). The array, therefore, has a 16 bytes header, which looks like this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>|           mark word           | class pointer |     length    |    elements   |
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>|&lt;---------- 8 bytes ----------&gt;|&lt;-- 4 bytes --&gt;|&lt;-- 4 bytes --&gt;|&lt;-- N bytes --&gt;|
</code></pre></div> <h4 id=alignment>Alignment<a class=headerlink href=#alignment title="Permanent link">&para;</a></h4> <p>The previous subsection taught us that (under the example JVM settings above) an Object's header takes up 12 bytes, however, even if this Object carried no fields at all, its actual size on the heap would still be larger than 12 bytes! That is because objects are "aligned" in memory, and the alignment size (under default JVM settings) is 8 bytes. Therefore, even the basic Java <code>Object</code> with no fields in it, having just a 12 bytes header, would actually take up 16 bytes on the heap:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>|           mark word           | class pointer |     wasted    |
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>|&lt;---------- 8 bytes ----------&gt;|&lt;-- 4 bytes --&gt;|&lt;-- 4 bytes --&gt;|
</code></pre></div> <p>From this, we can derive a rule of thumb that every time we use an Object, we are spending at least 16 bytes, and if the object carries a non-trivial number of fields, then likely more than that.</p> <p>More nuances on alignment and its downstream effects can be learned in <a href=https://shipilev.net/jvm/anatomy-quarks/24-object-alignment/ >JVM Anatomy Quark #24: Object Alignment</a>.</p> <h4 id=size-of-primitives>Size of Primitives<a class=headerlink href=#size-of-primitives title="Permanent link">&para;</a></h4> <p>Below is the size in memory of all primitive types:</p> <table> <thead> <tr> <th>Primitive type</th> <th>Size in bytes</th> </tr> </thead> <tbody> <tr> <td><code>boolean</code></td> <td>1</td> </tr> <tr> <td><code>byte</code></td> <td>1</td> </tr> <tr> <td><code>char</code></td> <td>2</td> </tr> <tr> <td><code>short</code></td> <td>2</td> </tr> <tr> <td><code>float</code></td> <td>4</td> </tr> <tr> <td><code>int</code></td> <td>4</td> </tr> <tr> <td><code>double</code></td> <td>8</td> </tr> <tr> <td><code>long</code></td> <td>8</td> </tr> </tbody> </table> <p>Note that all of the above are compact representations, meaning that every single bit carries a significant piece of information, except for <code>boolean</code> which carries only one significant bit out of the 8 bits that make up its byte.</p> <p>Even when part of a <code>boolean[]</code> primitive array, each element will still take 1 byte. This JVM design choice makes certain operations more efficient for the CPU to perform, and protects against <a href=https://shipilev.net/blog/2014/jmm-pragmatics/#_part_ii_word_tearing>word tearing</a>, at the cost of memory waste. In cases where the opposite tradeoffs are desired, it is possible to use a <a href=https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html>BitSet</a>, which is more space-efficient thanks to "bit packing", and provides support for bit-related operations such as <code>AND</code>, <code>OR</code>, <code>XOR</code>, intersection, etc.</p> <h4 id=size-comparison-between-primitives-and-objects>Size Comparison Between Primitives and Objects<a class=headerlink href=#size-comparison-between-primitives-and-objects title="Permanent link">&para;</a></h4> <p>For each of the primitive types, there exists an equivalent Object type. Using the Object carries the header overhead, while the primitive type does not. Continuing with the example JVM settings above, we can see that any primitive equal or smaller to an <code>int</code> can fit "within the shadow" of the object alignment, and therefore takes up 16 bytes in Object form. Whereas the <code>double</code> and <code>long</code> primitives, if packed inside of a <code>Double</code> or <code>Long</code> object, will need 20 bytes, and therefore be rounded up to 24 bytes due to alignment. And so we can see that the overhead of using an Object rather than a primitive is:</p> <table> <thead> <tr> <th>Object type</th> <th>Size in bytes</th> <th>Overhead compared to primitive</th> </tr> </thead> <tbody> <tr> <td><code>Boolean</code></td> <td>16</td> <td>16x</td> </tr> <tr> <td><code>Byte</code></td> <td>16</td> <td>16x</td> </tr> <tr> <td><code>Character</code></td> <td>16</td> <td>8x</td> </tr> <tr> <td><code>Short</code></td> <td>16</td> <td>8x</td> </tr> <tr> <td><code>Float</code></td> <td>16</td> <td>4x</td> </tr> <tr> <td><code>Integer</code></td> <td>16</td> <td>4x</td> </tr> <tr> <td><code>Double</code></td> <td>24</td> <td>3x</td> </tr> <tr> <td><code>Long</code></td> <td>24</td> <td>3x</td> </tr> </tbody> </table> <p>The above is a "theoretical worst case". If using the recommended factory methods (e.g., the various <code>valueOf</code> overloads), then there is a possibility of leveraging singleton instances coming from a central cache. These cached instances cover both <code>Boolean</code> values, all <code>Byte</code> values, and up to 256 values (those closest to zero) of all other non-floating point types. If the cache is used, then effectively the heap size of these instances is zero (i.e., assuming that they are part of the "base overhead" of the JVM itself, and that they can be amortized across many references), and therefore their memory cost is only that of the reference itself, which brings us to the following point.</p> <p>An object allocated on the heap is not just floating there on its own, it has at least one pointer referencing it (otherwise it is unreachable and therefore eligible to garbage collection). That pointer might be on the stack, or it might be a field of some other object. Continuing with the example JVM settings above, we would be operating in the "compressed pointers" mode, meaning that they would take up 4 bytes each (if the max heap size is &gt;= 32 GB, then pointers cannot be compressed and take up 8 bytes each). And so the size of the pointer needs to be added to the heap size of the object itself, in order to calculate its full memory cost.</p> <p>If we assume the use of recommended factory methods, and we add the pointer size, then we get the following sizes:</p> <table> <thead> <tr> <th>Object type</th> <th>value</th> <th>Size in bytes</th> <th>Overhead compared to primitive</th> </tr> </thead> <tbody> <tr> <td><code>Boolean</code></td> <td>all</td> <td>4</td> <td>4x</td> </tr> <tr> <td><code>Byte</code></td> <td>all</td> <td>4</td> <td>4x</td> </tr> <tr> <td><code>Character</code></td> <td>0..128</td> <td>4</td> <td>2x</td> </tr> <tr> <td><code>Character</code></td> <td>others</td> <td>20</td> <td>10x</td> </tr> <tr> <td><code>Short</code></td> <td>-128..127</td> <td>4</td> <td>2x</td> </tr> <tr> <td><code>Short</code></td> <td>others</td> <td>20</td> <td>10x</td> </tr> <tr> <td><code>Float</code></td> <td>all</td> <td>20</td> <td>5x</td> </tr> <tr> <td><code>Integer</code></td> <td>-128..127</td> <td>4</td> <td>1x</td> </tr> <tr> <td><code>Integer</code></td> <td>others</td> <td>20</td> <td>5x</td> </tr> <tr> <td><code>Double</code></td> <td>all</td> <td>28</td> <td>3.5x</td> </tr> <tr> <td><code>Long</code></td> <td>-128..127</td> <td>4</td> <td>0.5x (interestingly!)</td> </tr> <tr> <td><code>Long</code></td> <td>others</td> <td>28</td> <td>3.5x</td> </tr> </tbody> </table> <h3 id=why-ever-use-objects-rather-than-primitives>Why Ever Use Objects Rather than Primitives?<a class=headerlink href=#why-ever-use-objects-rather-than-primitives title="Permanent link">&para;</a></h3> <p>Given the significant overheads described above, it is fair to ask why would we ever want to use the Object version of these types, rather than the primitive version. There are a few reasons:</p> <ol> <li> <p>Objects can be null, while primitives cannot. In some cases, the full range of values provided by a primitive type are needed for a given use case, and in addition to that, we also need to model the absence of a value. For example, some use case may require a given field to be not only true, or false, but also absent. This could be modeled by two primitive boolean fields, e.g., having both <code>boolean configValue</code> and <code>boolean configValueIsSet</code>, though that could be hard to maintain. Alternatively, we could have a single <code>Boolean configValue</code> field, which has the three possible states we care for (true, false, null). Note that <code>Optional</code> is one more way of modeling absence, though in practice it is not terribly useful, and <a href=../../development/style-guide/#avoid-optionals>we choose to avoid it in the Venice project</a>.</p> </li> <li> <p>Objects can be used as a type parameter in a class which has <a href=https://docs.oracle.com/javase/tutorial/java/generics/types.html>Generic Types</a>, while primitives cannot. For example, a <code>List&lt;Integer&gt;</code> is valid, while a <code>List&lt;int&gt;</code> is not. That being said, in the case of common collections, there is an alternative, provided by one of the dependencies of the Venice project called <a href=https://fastutil.di.unimi.it>fastutil</a>. In the previous example, <code>fastutil</code> could be used to provide an <a href=https://javadoc.io/doc/it.unimi.dsi/fastutil/latest/it/unimi/dsi/fastutil/ints/IntList.html>IntList</a>, which is an implementation of <code>List&lt;Integer&gt;</code> with additional methods that prevent "boxing" (see below).</p> </li> </ol> <h4 id=boxing-and-unboxing>Boxing and Unboxing<a class=headerlink href=#boxing-and-unboxing title="Permanent link">&para;</a></h4> <p>"Boxing" is the term used to designate Java's support for implicitly converting a primitive type to its Object equivalent. "Unboxing" is the reverse process, where an Object is transformed into a primitive (though one must be careful to guard against the fact that unboxing a null Object results a <code>NullPointerException</code>). For example, the following code is valid:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kd>class</span> <span class=nc>Sample</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=n>Integer</span><span class=w> </span><span class=nf>boxingExample</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>primitiveInt</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=n>Integer</span><span class=w> </span><span class=n>objectInteger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>primitiveInt</span><span class=p>;</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>objectInteger</span><span class=p>;</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>  </span><span class=kt>int</span><span class=w> </span><span class=nf>unboxingExample</span><span class=p>(</span><span class=n>Integer</span><span class=w> </span><span class=n>objectInteger</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>primitiveInt</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>objectInteger</span><span class=p>;</span><span class=w> </span><span class=c1>// Warning! This can throw a NullPointerException!</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>primitiveInt</span><span class=p>;</span><span class=w> </span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=p>}</span>
</code></pre></div> <p>In some cases, the JIT Compiler can optimize away certain object allocations via <em>scalar replacement</em>, and boxing can sometimes be eliminated in this fashion. It should not be assumed, however, that such optimization can take place (nor that it will even if it can). More details in <a href=https://shipilev.net/jvm/anatomy-quarks/18-scalar-replacement/ >JVM Anatomy Quark #18: Scalar Replacement</a>.</p> <p>In general, therefore, it is recommended to avoid implicit boxing in hot paths where it can be reasonably avoided (i.e., without undue maintenance burden).</p> <h3 id=estimating-the-heap-size-of-objects>Estimating the Heap Size of Objects<a class=headerlink href=#estimating-the-heap-size-of-objects title="Permanent link">&para;</a></h3> <p>The above offers some "rule of thumb" guidance for estimating the heap size of certain kinds of objects, in the hope that it may help developers make informed decisions about class design. But there are also some scenarios within the Venice codebase where we wish to estimate the size on heap of objects at runtime. For example, in the ingestion code, there is some buffering where we wish to deterministically enforce a cap on the size in memory of buffered objects.</p> <p>There are a few different ways in which we might assess object size in Java, including empirical and theoretical approaches.</p> <h4 id=empirical-measurement>Empirical Measurement<a class=headerlink href=#empirical-measurement title="Permanent link">&para;</a></h4> <p>Empirical approaches aim to measure the "true size" of objects. Broadly speaking, we could divide this solution space into two categories, presented below (though each of those could have many variants).</p> <p>One such way, which we might qualify as a "black box approach", is to ask the JVM how much memory it is using, then allocating the object of interest, then asking the JVM again how much it's using, and calculating the delta between before and after. In order to reduce background noise, the allocation step would need to produce a large number of instances, and hang on to them, so they don't get garbage collected right away. This type of empirical approach is not very practical within production code (due to inefficiency and occasional imprecision), but we do use it in unit tests to validate how well the other methods are working.</p> <p>Another way is that some JVM flags or JVM agents can be configured which provide access to measurement functions. This bucket of experimental approaches are expected to provide full precision. They are also more efficient than the black box approach (given that there is no need to synthetically allocate a bunch of objects), though it is still not completely efficient due to needing to rely on <a href=https://docs.oracle.com/javase/tutorial/reflect/ >reflection</a>. Moreover, the requirement to use certain JVM configurations makes these approaches not fully reliable. In Venice's case, given that measurement was needed in some client library (the Da Vinci Client), where the JVM settings can be quite varied across the user base, this was not considered sufficiently reliable.</p> <h4 id=theoretical-prediction>Theoretical Prediction<a class=headerlink href=#theoretical-prediction title="Permanent link">&para;</a></h4> <p>Rather than empirically measuring, we can use theoretical knowledge of JVM internals to "predict" what the size of a given object <em>should be</em>. The downside of this approach is that, given that it is not empirical, it is possible the theoretical assumptions it is based on are wrong, therefore leading to imprecision. We can further break down this bucket into two approaches:</p> <ol> <li> <p><strong>Generic</strong>, where any object of any class can be measured. This kind of approach may be most convenient to developers but has the downside of requiring reflection, which is not the most efficient. Moreover, achieving precision requires taking into account whether referenced instances are "shared" (in which case they should not be counted) or whether, on the contrary, they "belong" to the referencing object (in which case they should be counted). Keeping track of this phenomenon is costly, both in terms of space and time. For these reasons, the generic approach was avoided for Venice's measurement use cases.</p> </li> <li> <p><strong>Specific</strong>, where only certain classes can be measured. This is the approach chosen in Venice, and it takes the form of classes implementing the <code>Measurable</code> interface. These classes implement a <code>getHeapSize</code> function which can leverage knowledge of the Venice implementation details to skip counting any shared instances, and count everything else efficiently (i.e., without reflection on the hot path). The downside of course is that this approach requires more maintenance cost. The utilities in the <a href=https://venicedb.org/javadoc/com/linkedin/venice/memory/package-summary.html>com.linkedin.venice.memory</a> package make it easier to implement <code>Measurable</code> correctly, though some manual work is still required.</p> </li> </ol> <h3 id=concurrent-access-to-memory>Concurrent Access to Memory<a class=headerlink href=#concurrent-access-to-memory title="Permanent link">&para;</a></h3> <p>Java provides first-class support for concurrent workloads. The standard library includes many facilities in the <a href=https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/package-summary.html>java.util.concurrent</a> package for writing multithreaded applications. When writing such code, it is often necessary for different threads to access shared state. In order to do this correctly, it is important to understand the <a href=https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html>Java Memory Model</a>.</p> <p>Although a full exploration of this is beyond the scope of this page, a few basic principles can be summarized:</p> <ol> <li> <p>Code is not guaranteed to be executed in the order it is written. Due to various optimizations, certain operations which are written sequentially in the code can be re-ordered, or executed in parallel. Occasionally, this can produce surprising results.</p> </li> <li> <p>Memory is not a single entity, but rather many layers of cache, and caches can be incoherent. There is RAM, which contains the "authoritative" value of a given piece of state, and then there are multiple levels of CPU cache which copy some subset of the RAM, in order to make it more efficient for the CPU to access it. Threads running on different CPUs may have access to different copies of the RAM, and therefore see inconsistent results.</p> </li> <li> <p>In order to achieve correctness when handling state which is read and written by multiple threads, we must give explicit instructions to Java. For example:</p> </li> <li> <p>The <code>volatile</code> keyword prepended before a field indicates that reads and writes to that field are guaranteed to be consistent. Although the way this is guaranteed is not officially specified, in practice it has been <a href="https://github.com/alex-dubrouski/java-test?tab=readme-ov-file#volatiles-test">experimentally determined</a> that volatile writes cause all CPU caches to get invalidated, while the volatile reads can still benefit from CPU caches. Many of the <code>java.util.concurrent</code> classes rely on <code>volatile</code> fields to implement various functionalities such as <em>Compare and Swap</em>, locking, etc.</p> </li> <li> <p>The <code>final</code> keyword prepended before a field indicates that it is immutable, and therefore safe to cache in the CPU. Note, however, that there is a subtlety. Only a primitive final field is "fully immutable", whereas an Object final field merely means that the pointer is immutable (i.e., always referencing the same instance on the heap) while the fields within the referenced instance can themselves be mutable.</p> </li> <li> <p>The <code>synchronized</code> keyword can be used to indicate that only one thread at a time is allowed to enter the designated critical section. This can make it so that a non-<code>volatile</code> field is accessed in a threadsafe way, but only if all such accesses are guarded by synchronization.</p> </li> </ol> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h2> <p>This page is merely a small selection of Java-related topics. Ultimately, learning the language well requires reading and writing a lot of code.</p> <p>Although most of the above content is general in nature, and only occasionally makes references to Venice-specific details, a Venice developer should also get familiar with the rest of the project-specific recommendations found in the <a href=../../development/style-guide/ >Style Guide</a>.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="December 24, 2025 19:25:03 UTC">December 24, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="December 24, 2025 19:25:03 UTC">December 24, 2025</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../write-path/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Write Path"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Write Path </div> </div> </a> <a href=../router-api/ class="md-footer__link md-footer__link--next" aria-label="Next: Router API"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Router API </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 - <script>document.write(new Date().getFullYear())</script> LinkedIn Corporation </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/linkedin/venice target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=http://slack.venicedb.org target=_blank rel=noopener title=slack.venicedb.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M94.1 315.1c0 25.9-21.2 47.1-47.1 47.1S0 341 0 315.1 21.2 268 47.1 268h47.1v47.1zm23.7 0c0-25.9 21.2-47.1 47.1-47.1s47.1 21.2 47.1 47.1v117.8c0 25.9-21.2 47.1-47.1 47.1s-47.1-21.2-47.1-47.1zm47.1-189c-25.9 0-47.1-21.2-47.1-47.1s21.2-47 47.1-47S212 53.2 212 79.1v47.1h-47.1zm0 23.7c25.9 0 47.1 21.2 47.1 47.1S190.8 244 164.9 244H47.1C21.2 244 0 222.8 0 196.9s21.2-47.1 47.1-47.1zm189 47.1c0-25.9 21.2-47.1 47.1-47.1s47 21.2 47 47.1-21.2 47.1-47.1 47.1h-47.1v-47.1zm-23.7 0c0 25.9-21.2 47.1-47.1 47.1S236 222.8 236 196.9V79.1c0-25.9 21.2-47.1 47.1-47.1s47.1 21.2 47.1 47.1zm-47.1 189c25.9 0 47.1 21.2 47.1 47.1s-21.2 47-47.1 47-47.1-21.2-47.1-47.1v-47.1h47.1zm0-23.7c-25.9 0-47.1-21.2-47.1-47.1s21.2-47.1 47.1-47.1h117.8c25.9 0 47.1 21.2 47.1 47.1s-21.2 47.1-47.1 47.1z"/></svg> </a> <a href=https://www.linkedin.com/company/venicedb/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://x.com/VeniceDataBase target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg> </a> <a href=https://youtube.com/@venicedb target=_blank rel=noopener title=youtube.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M549.7 124.1c-6.2-23.7-24.8-42.3-48.3-48.6C458.9 64 288.1 64 288.1 64S117.3 64 74.7 75.5c-23.5 6.3-42 24.9-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3c6.3 23.6 24.8 41.5 48.3 47.8C117.3 448 288.1 448 288.1 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zM232.2 337.6V175.2l142.7 81.2z"/></svg> </a> <a href=https://blog.venicedb.org target=_blank rel=noopener title=blog.venicedb.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64m0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0m32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.path", "navigation.indexes", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "content.code.copy", "content.action.edit", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../../assets/js/extra.js></script> </body> </html>