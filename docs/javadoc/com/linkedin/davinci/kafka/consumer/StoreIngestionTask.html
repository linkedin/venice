<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>StoreIngestionTask (venice API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.linkedin.davinci.kafka.consumer, class: StoreIngestionTask">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.linkedin.davinci.kafka.consumer</a></div>
<h1 title="Class StoreIngestionTask" class="title">Class StoreIngestionTask</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.linkedin.davinci.kafka.consumer.StoreIngestionTask</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">StoreIngestionTask</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></span></div>
<div class="block">A runnable Kafka Consumer consuming messages from all the partition assigned to current node for a Kafka Topic.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="StoreIngestionTask.DelegateConsumerRecordResult.html" class="type-name-link" title="enum class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask.DelegateConsumerRecordResult</a></code></div>
<div class="col-last even-row-color">
<div class="block">This enum represents all potential results after calling <a href="#delegateConsumerRecord(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,int,java.lang.String,int,long,long)"><code>delegateConsumerRecord(PubSubMessageProcessedResultWrapper, int, String, int, long, long)</code></a>.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected final <a href="AggKafkaConsumerService.html" title="class in com.linkedin.davinci.kafka.consumer">AggKafkaConsumerService</a></code></div>
<div class="col-second even-row-color"><code><a href="#aggKafkaConsumerService" class="member-name-link">aggKafkaConsumerService</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/utils/SparseConcurrentList.html" title="class in com.linkedin.venice.utils">SparseConcurrentList</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#availableSchemaIds" class="member-name-link">availableSchemaIds</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final boolean</code></div>
<div class="col-second even-row-color"><code><a href="#batchReportIncPushStatusEnabled" class="member-name-link">batchReportIncPushStatusEnabled</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final long</code></div>
<div class="col-second odd-row-color"><code><a href="#bootstrapTimeoutInMs" class="member-name-link">bootstrapTimeoutInMs</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected static final int</code></div>
<div class="col-second even-row-color"><code><a href="#CHUNK_SCHEMA_ID" class="member-name-link">CHUNK_SCHEMA_ID</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../utils/InMemoryChunkAssembler.html" title="class in com.linkedin.davinci.utils">InMemoryChunkAssembler</a></code></div>
<div class="col-second odd-row-color"><code><a href="#chunkAssembler" class="member-name-link">chunkAssembler</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../../venice/compression/CompressionStrategy.html" title="enum class in com.linkedin.venice.compression">CompressionStrategy</a></code></div>
<div class="col-second even-row-color"><code><a href="#compressionStrategy" class="member-name-link">compressionStrategy</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;<a href="../../../venice/compression/VeniceCompressor.html" title="class in com.linkedin.venice.compression">VeniceCompressor</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#compressor" class="member-name-link">compressor</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../compression/StorageEngineBackedCompressorFactory.html" title="class in com.linkedin.davinci.compression">StorageEngineBackedCompressorFactory</a></code></div>
<div class="col-second even-row-color"><code><a href="#compressorFactory" class="member-name-link">compressorFactory</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/utils/concurrent/VeniceConcurrentHashMap.html" title="class in com.linkedin.venice.utils.concurrent">VeniceConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#consumedBytesSinceLastSync" class="member-name-link">consumedBytesSinceLastSync</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Map of broker URL to the total bytes consumed by ConsumptionTask since the last Global RT DIV sync</div>
</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></code></div>
<div class="col-second even-row-color"><code><a href="#consumerActionSequenceNumber" class="member-name-link">consumerActionSequenceNumber</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/PriorityBlockingQueue.html" title="class or interface in java.util.concurrent" class="external-link">PriorityBlockingQueue</a>&lt;<a href="ConsumerAction.html" title="class in com.linkedin.davinci.kafka.consumer">ConsumerAction</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#consumerActionsQueue" class="member-name-link">consumerActionsQueue</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a></code></div>
<div class="col-second even-row-color"><code><a href="#consumerDiv" class="member-name-link">consumerDiv</a></code></div>
<div class="col-last even-row-color">
<div class="block">The consumer and drainer DIV must remain separate.</div>
</div>
<div class="col-first odd-row-color"><code>protected final long</code></div>
<div class="col-second odd-row-color"><code><a href="#databaseSyncBytesIntervalForDeferredWriteMode" class="member-name-link">databaseSyncBytesIntervalForDeferredWriteMode</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Message bytes consuming interval before persisting offset in offset db for deferred-write database.</div>
</div>
<div class="col-first even-row-color"><code>protected final long</code></div>
<div class="col-second even-row-color"><code><a href="#databaseSyncBytesIntervalForTransactionalMode" class="member-name-link">databaseSyncBytesIntervalForTransactionalMode</a></code></div>
<div class="col-last even-row-color">
<div class="block">Message bytes consuming interval before persisting offset in offset db for transactional mode database.</div>
</div>
<div class="col-first odd-row-color"><code>protected int</code></div>
<div class="col-second odd-row-color"><code><a href="#dataRecoverySourceVersionNumber" class="member-name-link">dataRecoverySourceVersionNumber</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final com.linkedin.davinci.kafka.consumer.StoreIngestionTask.ReadyToServeCheck</code></div>
<div class="col-second even-row-color"><code><a href="#defaultReadyToServeChecker" class="member-name-link">defaultReadyToServeChecker</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/utils/SparseConcurrentList.html" title="class in com.linkedin.venice.utils">SparseConcurrentList</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#deserializedSchemaIds" class="member-name-link">deserializedSchemaIds</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../../venice/utils/DiskUsage.html" title="class in com.linkedin.venice.utils">DiskUsage</a></code></div>
<div class="col-second even-row-color"><code><a href="#diskUsage" class="member-name-link">diskUsage</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="../../../venice/exceptions/validation/DataValidationException.html" title="class in com.linkedin.venice.exceptions.validation">DataValidationException</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#divErrorMetricCallback" class="member-name-link">divErrorMetricCallback</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></code></div>
<div class="col-second even-row-color"><code><a href="#emitMetrics" class="member-name-link">emitMetrics</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final long</code></div>
<div class="col-second odd-row-color"><code><a href="#emptyPollSleepMs" class="member-name-link">emptyPollSleepMs</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final int</code></div>
<div class="col-second even-row-color"><code><a href="#errorPartitionId" class="member-name-link">errorPartitionId</a></code></div>
<div class="col-last even-row-color">
<div class="block">Used for reporting error when the <a href="#partitionConsumptionStateMap"><code>partitionConsumptionStateMap</code></a> is empty</div>
</div>
<div class="col-first odd-row-color"><code>protected <a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CountDownLatch.html" title="class or interface in java.util.concurrent" class="external-link">CountDownLatch</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#gracefulShutdownLatch" class="member-name-link">gracefulShutdownLatch</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../stats/HostLevelIngestionStats.html" title="class in com.linkedin.davinci.stats">HostLevelIngestionStats</a></code></div>
<div class="col-second even-row-color"><code><a href="#hostLevelIngestionStats" class="member-name-link">hostLevelIngestionStats</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#hostName" class="member-name-link">hostName</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../../venice/meta/HybridStoreConfig.html" title="interface in com.linkedin.venice.meta">HybridStoreConfig</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#hybridStoreConfig" class="member-name-link">hybridStoreConfig</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></code></div>
<div class="col-second odd-row-color"><code><a href="#idleCounter" class="member-name-link">idleCounter</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final com.linkedin.davinci.kafka.consumer.IngestionNotificationDispatcher</code></div>
<div class="col-second even-row-color"><code><a href="#ingestionNotificationDispatcher" class="member-name-link">ingestionNotificationDispatcher</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#ingestionTaskName" class="member-name-link">ingestionTaskName</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final boolean</code></div>
<div class="col-second even-row-color"><code><a href="#isChunked" class="member-name-link">isChunked</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BooleanSupplier.html" title="class or interface in java.util.function" class="external-link">BooleanSupplier</a></code></div>
<div class="col-second odd-row-color"><code><a href="#isCurrentVersion" class="member-name-link">isCurrentVersion</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected boolean</code></div>
<div class="col-second even-row-color"><code><a href="#isDataRecovery" class="member-name-link">isDataRecovery</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#isDaVinciClient" class="member-name-link">isDaVinciClient</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final boolean</code></div>
<div class="col-second even-row-color"><code><a href="#isGlobalRtDivEnabled" class="member-name-link">isGlobalRtDivEnabled</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#isIsolatedIngestion" class="member-name-link">isIsolatedIngestion</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final boolean</code></div>
<div class="col-second even-row-color"><code><a href="#isRmdChunked" class="member-name-link">isRmdChunked</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></code></div>
<div class="col-second odd-row-color"><code><a href="#isRunning" class="member-name-link">isRunning</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final boolean</code></div>
<div class="col-second even-row-color"><code><a href="#isSystemStore" class="member-name-link">isSystemStore</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#isWriteComputationEnabled" class="member-name-link">isWriteComputationEnabled</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#kafkaClusterUrlResolver" class="member-name-link">kafkaClusterUrlResolver</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a></code></div>
<div class="col-second odd-row-color"><code><a href="#kafkaProps" class="member-name-link">kafkaProps</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#kafkaVersionTopic" class="member-name-link">kafkaVersionTopic</a></code></div>
<div class="col-last even-row-color">
<div class="block">Topics used for this topic consumption
 TODO: Using a PubSubVersionTopic and PubSubRealTimeTopic extending PubSubTopic for type safety.</div>
</div>
<div class="col-first odd-row-color"><code>protected static final long</code></div>
<div class="col-second odd-row-color"><code><a href="#KILL_WAIT_TIME_MS" class="member-name-link">KILL_WAIT_TIME_MS</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final int</code></div>
<div class="col-second even-row-color"><code><a href="#localKafkaClusterId" class="member-name-link">localKafkaClusterId</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#localKafkaServer" class="member-name-link">localKafkaServer</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#localKafkaServerSingletonSet" class="member-name-link">localKafkaServerSingletonSet</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/serialization/avro/ChunkedValueManifestSerializer.html" title="class in com.linkedin.venice.serialization.avro">ChunkedValueManifestSerializer</a></code></div>
<div class="col-second odd-row-color"><code><a href="#manifestSerializer" class="member-name-link">manifestSerializer</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../../venice/system/store/MetaStoreWriter.html" title="class in com.linkedin.venice.system.store">MetaStoreWriter</a></code></div>
<div class="col-second even-row-color"><code><a href="#metaStoreWriter" class="member-name-link">metaStoreWriter</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html" title="class or interface in java.util.concurrent" class="external-link">ExecutorService</a></code></div>
<div class="col-second odd-row-color"><code><a href="#parallelProcessingThreadPool" class="member-name-link">parallelProcessingThreadPool</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr><a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#partitionConsumptionStateMap" class="member-name-link">partitionConsumptionStateMap</a></code></div>
<div class="col-last even-row-color">
<div class="block">Per-partition consumption state map</div>
</div>
<div class="col-first odd-row-color"><code>protected final int</code></div>
<div class="col-second odd-row-color"><code><a href="#partitionCount" class="member-name-link">partitionCount</a></code></div>
<div class="col-last odd-row-color">
<div class="block">This would be the number of partitions in the StorageEngine and in version topics</div>
</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#partitionToPendingConsumerActionCountMap" class="member-name-link">partitionToPendingConsumerActionCountMap</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/pubsub/PubSubContext.html" title="class in com.linkedin.venice.pubsub">PubSubContext</a></code></div>
<div class="col-second odd-row-color"><code><a href="#pubSubContext" class="member-name-link">pubSubContext</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../../venice/pubsub/PubSubTopicRepository.html" title="class in com.linkedin.venice.pubsub">PubSubTopicRepository</a></code></div>
<div class="col-second even-row-color"><code><a href="#pubSubTopicRepository" class="member-name-link">pubSubTopicRepository</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final long</code></div>
<div class="col-second odd-row-color"><code><a href="#readCycleDelayMs" class="member-name-link">readCycleDelayMs</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final boolean</code></div>
<div class="col-second even-row-color"><code><a href="#readOnlyForBatchOnlyStoreEnabled" class="member-name-link">readOnlyForBatchOnlyStoreEnabled</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a></code></div>
<div class="col-second odd-row-color"><code><a href="#realTimeTopic" class="member-name-link">realTimeTopic</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></code></div>
<div class="col-second even-row-color"><code><a href="#recordLevelMetricEnabled" class="member-name-link">recordLevelMetricEnabled</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="../../stats/AggVersionedDaVinciRecordTransformerStats.html" title="class in com.linkedin.davinci.stats">AggVersionedDaVinciRecordTransformerStats</a></code></div>
<div class="col-second odd-row-color"><code><a href="#recordTransformerStats" class="member-name-link">recordTransformerStats</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected static final <a href="../../../venice/utils/RedundantExceptionFilter.html" title="class in com.linkedin.venice.utils">RedundantExceptionFilter</a></code></div>
<div class="col-second even-row-color"><code><a href="#REDUNDANT_LOGGING_FILTER" class="member-name-link">REDUNDANT_LOGGING_FILTER</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#resetErrorReplicaEnabled" class="member-name-link">resetErrorReplicaEnabled</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static long</code></div>
<div class="col-second even-row-color"><code><a href="#SCHEMA_POLLING_DELAY_MS" class="member-name-link">SCHEMA_POLLING_DELAY_MS</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/meta/ReadOnlySchemaRepository.html" title="interface in com.linkedin.venice.meta">ReadOnlySchemaRepository</a></code></div>
<div class="col-second odd-row-color"><code><a href="#schemaRepository" class="member-name-link">schemaRepository</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a></code></div>
<div class="col-second even-row-color"><code><a href="#separateRealTimeTopic" class="member-name-link">separateRealTimeTopic</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../config/VeniceServerConfig.html" title="class in com.linkedin.davinci.config">VeniceServerConfig</a></code></div>
<div class="col-second odd-row-color"><code><a href="#serverConfig" class="member-name-link">serverConfig</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../store/StorageEngine.html" title="interface in com.linkedin.davinci.store">StorageEngine</a></code></div>
<div class="col-second even-row-color"><code><a href="#storageEngine" class="member-name-link">storageEngine</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../storage/StorageMetadataService.html" title="interface in com.linkedin.davinci.storage">StorageMetadataService</a></code></div>
<div class="col-second odd-row-color"><code><a href="#storageMetadataService" class="member-name-link">storageMetadataService</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../storage/StorageService.html" title="class in com.linkedin.davinci.storage">StorageService</a></code></div>
<div class="col-second even-row-color"><code><a href="#storageService" class="member-name-link">storageService</a></code></div>
<div class="col-last even-row-color">
<div class="block">storage destination for consumption</div>
</div>
<div class="col-first odd-row-color"><code>static long</code></div>
<div class="col-second odd-row-color"><code><a href="#STORE_VERSION_POLLING_DELAY_MS" class="member-name-link">STORE_VERSION_POLLING_DELAY_MS</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="AbstractStoreBufferService.html" title="class in com.linkedin.davinci.kafka.consumer">AbstractStoreBufferService</a></code></div>
<div class="col-second even-row-color"><code><a href="#storeBufferService" class="member-name-link">storeBufferService</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#storeName" class="member-name-link">storeName</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../../venice/meta/ReadOnlyStoreRepository.html" title="interface in com.linkedin.venice.meta">ReadOnlyStoreRepository</a></code></div>
<div class="col-second even-row-color"><code><a href="#storeRepository" class="member-name-link">storeRepository</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#storeVersionName" class="member-name-link">storeVersionName</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final int</code></div>
<div class="col-second even-row-color"><code><a href="#storeVersionPartitionCount" class="member-name-link">storeVersionPartitionCount</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/pubsub/manager/TopicManagerRepository.html" title="class in com.linkedin.venice.pubsub.manager">TopicManagerRepository</a></code></div>
<div class="col-second odd-row-color"><code><a href="#topicManagerRepository" class="member-name-link">topicManagerRepository</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected boolean</code></div>
<div class="col-second even-row-color"><code><a href="#versionBootstrapCompleted" class="member-name-link">versionBootstrapCompleted</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../stats/AggVersionedDIVStats.html" title="class in com.linkedin.davinci.stats">AggVersionedDIVStats</a></code></div>
<div class="col-second odd-row-color"><code><a href="#versionedDIVStats" class="member-name-link">versionedDIVStats</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../stats/AggVersionedIngestionStats.html" title="class in com.linkedin.davinci.stats">AggVersionedIngestionStats</a></code></div>
<div class="col-second even-row-color"><code><a href="#versionedIngestionStats" class="member-name-link">versionedIngestionStats</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final int</code></div>
<div class="col-second odd-row-color"><code><a href="#versionNumber" class="member-name-link">versionNumber</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected <a href="../../../venice/server/VersionRole.html" title="enum class in com.linkedin.venice.server">VersionRole</a></code></div>
<div class="col-second even-row-color"><code><a href="#versionRole" class="member-name-link">versionRole</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a></code></div>
<div class="col-second odd-row-color"><code><a href="#versionTopic" class="member-name-link">versionTopic</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected static final long</code></div>
<div class="col-second even-row-color"><code><a href="#WAITING_TIME_FOR_LAST_RECORD_TO_BE_PROCESSED" class="member-name-link">WAITING_TIME_FOR_LAST_RECORD_TO_BE_PROCESSED</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="PartitionReplicaIngestionContext.WorkloadType.html" title="enum class in com.linkedin.davinci.kafka.consumer">PartitionReplicaIngestionContext.WorkloadType</a></code></div>
<div class="col-second odd-row-color"><code><a href="#workloadType" class="member-name-link">workloadType</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected int</code></div>
<div class="col-second even-row-color"><code><a href="#writeComputeFailureCode" class="member-name-link">writeComputeFailureCode</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.helix.manager.zk.ZKHelixAdmin&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#zkHelixAdmin" class="member-name-link">zkHelixAdmin</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(com.linkedin.davinci.storage.StorageService,com.linkedin.davinci.kafka.consumer.StoreIngestionTaskFactory.Builder,com.linkedin.venice.meta.Store,com.linkedin.venice.meta.Version,java.util.Properties,java.util.function.BooleanSupplier,com.linkedin.davinci.config.VeniceStoreVersionConfig,int,boolean,java.util.Optional,com.linkedin.davinci.client.InternalDaVinciRecordTransformerConfig,java.util.Queue,com.linkedin.venice.utils.lazy.Lazy)" class="member-name-link">StoreIngestionTask</a><wbr>(<a href="../../storage/StorageService.html" title="class in com.linkedin.davinci.storage">StorageService</a>&nbsp;storageService,
 <a href="StoreIngestionTaskFactory.Builder.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTaskFactory.Builder</a>&nbsp;builder,
 <a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store,
 <a href="../../../venice/meta/Version.html" title="interface in com.linkedin.venice.meta">Version</a>&nbsp;version,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a>&nbsp;kafkaConsumerProperties,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BooleanSupplier.html" title="class or interface in java.util.function" class="external-link">BooleanSupplier</a>&nbsp;isCurrentVersion,
 <a href="../../config/VeniceStoreVersionConfig.html" title="class in com.linkedin.davinci.config">VeniceStoreVersionConfig</a>&nbsp;storeVersionConfig,
 int&nbsp;errorPartitionId,
 boolean&nbsp;isIsolatedIngestion,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../store/cache/backend/ObjectCacheBackend.html" title="class in com.linkedin.davinci.store.cache.backend">ObjectCacheBackend</a>&gt;&nbsp;cacheBackend,
 <a href="../../client/InternalDaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client">InternalDaVinciRecordTransformerConfig</a>&nbsp;internalRecordTransformerConfig,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Queue.html" title="class or interface in java.util" class="external-link">Queue</a>&lt;<a href="../../notifier/VeniceNotifier.html" title="interface in com.linkedin.davinci.notifier">VeniceNotifier</a>&gt;&nbsp;notifiers,
 <a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.helix.manager.zk.ZKHelixAdmin&gt;&nbsp;zkHelixAdmin)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#calculateAssembledRecordSizeRatio(long)" class="member-name-link">calculateAssembledRecordSizeRatio</a><wbr>(long&nbsp;recordSize)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#checkAndLogIfLagIsAcceptableForHybridStore(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,long,long,boolean,com.linkedin.davinci.ingestion.LagType)" class="member-name-link">checkAndLogIfLagIsAcceptableForHybridStore</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 long&nbsp;lag,
 long&nbsp;threshold,
 boolean&nbsp;shouldLogLag,
 <a href="../../ingestion/LagType.html" title="enum class in com.linkedin.davinci.ingestion">LagType</a>&nbsp;lagType)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Checks whether the lag is acceptable for hybrid stores</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkIngestionProgress(com.linkedin.venice.meta.Store)" class="member-name-link">checkIngestionProgress</a><wbr>(<a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#checkLongRunningTaskState()" class="member-name-link">checkLongRunningTaskState</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cloneDrainerDivProducerStates(int,com.linkedin.davinci.validation.DataIntegrityValidator)" class="member-name-link">cloneDrainerDivProducerStates</a><wbr>(int&nbsp;partition,
 <a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a>&nbsp;validator)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We should only allow <a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreIngestionTask</code></a> to access <code>drainerDiv</code>; other components
 like leaders in LeaderFollowerStoreIngestionTask should never access the DIV validator in drainer, because messages
 consumption in leader is ahead of drainer, leaders and drainers are processing messages at different paces.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Stops the consumer task.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#closeVeniceViewWriters(boolean)" class="member-name-link">closeVeniceViewWriters</a><wbr>(boolean&nbsp;doFlush)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#closeVeniceWriters(boolean)" class="member-name-link">closeVeniceWriters</a><wbr>(boolean&nbsp;doFlush)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#consumerBatchUnsubscribe(java.util.Set)" class="member-name-link">consumerBatchUnsubscribe</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&gt;&nbsp;topicPartitionSet)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#consumerHasAnySubscription()" class="member-name-link">consumerHasAnySubscription</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#consumerHasSubscription(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">consumerHasSubscription</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;topic,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#consumerResetOffset(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">consumerResetOffset</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;topic,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#consumerSubscribe(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.PubSubPosition,java.lang.String)" class="member-name-link">consumerSubscribe</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;pubSubTopic,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;startOffset,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaURL)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method will try to resolve actual topic-partition from input Kafka URL and subscribe to the resolved
 topic-partition.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#consumerUnSubscribeAllTopics(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">consumerUnSubscribeAllTopics</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createKafkaConsumerProperties(java.util.Properties,java.lang.String,boolean)" class="member-name-link">createKafkaConsumerProperties</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a>&nbsp;localConsumerProps,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;remoteKafkaSourceAddress,
 boolean&nbsp;consumeRemotely)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Override the <a href="../../../venice/ConfigKeys.html#KAFKA_BOOTSTRAP_SERVERS"><code>ConfigKeys.KAFKA_BOOTSTRAP_SERVERS</code></a> config with a remote Kafka bootstrap url.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="StoreIngestionTask.DelegateConsumerRecordResult.html" title="enum class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask.DelegateConsumerRecordResult</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#delegateConsumerRecord(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,int,java.lang.String,int,long,long)" class="member-name-link">delegateConsumerRecord</a><wbr>(<a href="PubSubMessageProcessedResultWrapper.html" title="class in com.linkedin.davinci.kafka.consumer">PubSubMessageProcessedResultWrapper</a>&nbsp;consumerRecordWrapper,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId,
 long&nbsp;beforeProcessingPerRecordTimestampNs,
 long&nbsp;beforeProcessingBatchRecordsTimestampMs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#demoteToStandby(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.helix.LeaderFollowerPartitionStateModel.LeaderSessionIdChecker)" class="member-name-link">demoteToStandby</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="../../helix/LeaderFollowerPartitionStateModel.LeaderSessionIdChecker.html" title="class in com.linkedin.davinci.helix">LeaderFollowerPartitionStateModel.LeaderSessionIdChecker</a>&nbsp;checker)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#disableMetricsEmission()" class="member-name-link">disableMetricsEmission</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dropStoragePartitionGracefully(com.linkedin.venice.pubsub.api.PubSubTopicPartition)" class="member-name-link">dropStoragePartitionGracefully</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Drops a storage partition gracefully.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpPartitionConsumptionStates(com.linkedin.davinci.listener.response.AdminResponse,com.linkedin.venice.utils.ComplementSet)" class="member-name-link">dumpPartitionConsumptionStates</a><wbr>(<a href="../../listener/response/AdminResponse.html" title="class in com.linkedin.davinci.listener.response">AdminResponse</a>&nbsp;response,
 <a href="../../../venice/utils/ComplementSet.html" title="class in com.linkedin.venice.utils">ComplementSet</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;partitions)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked by admin request to dump the requested partition consumption states</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpStoreVersionState(com.linkedin.davinci.listener.response.AdminResponse)" class="member-name-link">dumpStoreVersionState</a><wbr>(<a href="../../listener/response/AdminResponse.html" title="class in com.linkedin.davinci.listener.response">AdminResponse</a>&nbsp;response)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked by admin request to dump store version state metadata.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enableMetricsEmission()" class="member-name-link">enableMetricsEmission</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#extractUpstreamClusterId(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)" class="member-name-link">extractUpstreamClusterId</a><wbr>(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#extractUpstreamPosition(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)" class="member-name-link">extractUpstreamPosition</a><wbr>(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Extract the upstream position from the given consumer record's leader metadata.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/compression/CompressionStrategy.html" title="enum class in com.linkedin.venice.compression">CompressionStrategy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCompressionStrategy()" class="member-name-link">getCompressionStrategy</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;<a href="../../../venice/compression/VeniceCompressor.html" title="class in com.linkedin.venice.compression">VeniceCompressor</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCompressor()" class="member-name-link">getCompressor</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getConsumptionSourceKafkaAddress(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">getConsumptionSourceKafkaAddress</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDataIntegrityValidator()" class="member-name-link">getDataIntegrityValidator</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">When Global RT DIV is enabled the ConsumptionTask's DIV is exclusively used to validate data integrity.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFailedIngestionPartitionCount()" class="member-name-link">getFailedIngestionPartitionCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../stats/HostLevelIngestionStats.html" title="class in com.linkedin.davinci.stats">HostLevelIngestionStats</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getHostLevelIngestionStats()" class="member-name-link">getHostLevelIngestionStats</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="IngestionBatchProcessor.html" title="class in com.linkedin.davinci.kafka.consumer">IngestionBatchProcessor</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getIngestionBatchProcessor()" class="member-name-link">getIngestionBatchProcessor</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getIngestionTaskName()" class="member-name-link">getIngestionTaskName</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getKafkaVersionTopic()" class="member-name-link">getKafkaVersionTopic</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>protected static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getOffsetToOnlineLagThresholdPerPartition(java.util.Optional,java.lang.String,int)" class="member-name-link">getOffsetToOnlineLagThresholdPerPartition</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../../venice/meta/HybridStoreConfig.html" title="interface in com.linkedin.venice.meta">HybridStoreConfig</a>&gt;&nbsp;hybridStoreConfig,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;storeName,
 int&nbsp;partitionCount)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getPartitionConsumptionState(int)" class="member-name-link">getPartitionConsumptionState</a><wbr>(int&nbsp;partitionId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRealTimeDataSourceKafkaAddress(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">getRealTimeDataSourceKafkaAddress</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/meta/ReadOnlySchemaRepository.html" title="interface in com.linkedin.venice.meta">ReadOnlySchemaRepository</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSchemaRepo()" class="member-name-link">getSchemaRepo</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final <a href="../../config/VeniceServerConfig.html" title="class in com.linkedin.davinci.config">VeniceServerConfig</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getServerConfig()" class="member-name-link">getServerConfig</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../store/StorageEngine.html" title="interface in com.linkedin.davinci.store">StorageEngine</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStorageEngine()" class="member-name-link">getStorageEngine</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../store/StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStoragePartitionConfig(boolean,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">getStoragePartitionConfig</a><wbr>(boolean&nbsp;sorted,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../store/StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStoragePartitionConfig(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">getStoragePartitionConfig</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="StorageUtilizationManager.html" title="class in com.linkedin.davinci.kafka.consumer">StorageUtilizationManager</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStorageUtilizationManager()" class="member-name-link">getStorageUtilizationManager</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStoreName()" class="member-name-link">getStoreName</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/pubsub/manager/TopicManager.html" title="class in com.linkedin.venice.pubsub.manager">TopicManager</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTopicManager(java.lang.String)" class="member-name-link">getTopicManager</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sourceKafkaServer)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The function returns local or remote topic manager.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTopicPartitionEndPosition(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition)" class="member-name-link">getTopicPartitionEndPosition</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubBrokerAddress,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../stats/AggVersionedDIVStats.html" title="class in com.linkedin.davinci.stats">AggVersionedDIVStats</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getVersionedDIVStats()" class="member-name-link">getVersionedDIVStats</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../stats/AggVersionedIngestionStats.html" title="class in com.linkedin.davinci.stats">AggVersionedIngestionStats</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getVersionIngestionStats()" class="member-name-link">getVersionIngestionStats</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getVersionNumber()" class="member-name-link">getVersionNumber</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getVersionTopic()" class="member-name-link">getVersionTopic</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getWriteComputeErrorCode()" class="member-name-link">getWriteComputeErrorCode</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasAllPartitionReportedCompleted()" class="member-name-link">hasAllPartitionReportedCompleted</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasAnyPartitionConsumptionState(java.util.function.Predicate)" class="member-name-link">hasAnyPartitionConsumptionState</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link">Predicate</a>&lt;<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&gt;&nbsp;pcsPredicate)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasAnyPendingSubscription()" class="member-name-link">hasAnyPendingSubscription</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasAnySubscription()" class="member-name-link">hasAnySubscription</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasPendingPartitionIngestionAction(int)" class="member-name-link">hasPendingPartitionIngestionAction</a><wbr>(int&nbsp;userPartition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasReplicas()" class="member-name-link">hasReplicas</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks whether there are any replicas currently present on this host.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isActiveActiveReplicationEnabled()" class="member-name-link">isActiveActiveReplicationEnabled</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isChunked()" class="member-name-link">isChunked</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isCurrentVersion()" class="member-name-link">isCurrentVersion</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isHybridFollower(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">isHybridFollower</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isHybridMode()" class="member-name-link">isHybridMode</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isIdleOverThreshold()" class="member-name-link">isIdleOverThreshold</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This helper function will check if the ingestion task has been idle for a long time.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isIngestionTaskActive()" class="member-name-link">isIngestionTaskActive</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isMetricsEmissionEnabled()" class="member-name-link">isMetricsEmissionEnabled</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isPartitionConsumingOrHasPendingIngestionAction(int)" class="member-name-link">isPartitionConsumingOrHasPendingIngestionAction</a><wbr>(int&nbsp;userPartition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">To check whether the given partition is still consuming message from Kafka</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isProducingVersionTopicHealthy()" class="member-name-link">isProducingVersionTopicHealthy</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is checking the following conditions:
 1.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isReadyToServe(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">isReadyToServe</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function checks various conditions to verify if a store is ready to serve.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isRealTimeBufferReplayStarted(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">isRealTimeBufferReplayStarted</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isRunning()" class="member-name-link">isRunning</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A function to allow the service to get the current status of the task.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isSeparatedRealtimeTopicEnabled()" class="member-name-link">isSeparatedRealtimeTopicEnabled</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isTransientRecordBufferUsed(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">isTransientRecordBufferUsed</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is not a per record state.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isUserSystemStore()" class="member-name-link">isUserSystemStore</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#kill()" class="member-name-link">kill</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#logStorageOperationWhileUnsubscribed(int)" class="member-name-link">logStorageOperationWhileUnsubscribed</a><wbr>(int&nbsp;partition)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#maybeSendIngestionHeartbeat()" class="member-name-link">maybeSendIngestionHeartbeat</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">For L/F hybrid stores, the leader periodically writes a special SOS message to the RT topic.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#measureHybridHeartbeatLag(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)" class="member-name-link">measureHybridHeartbeatLag</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 boolean&nbsp;shouldLogLag)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Measure the hybrid heartbeat lag for replica being tracked in `partitionConsumptionState`.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#measureHybridHeartbeatTimestamp(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)" class="member-name-link">measureHybridHeartbeatTimestamp</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 boolean&nbsp;shouldLogLag)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Measure the hybrid heartbeat timestamp for replica being tracked in `partitionConsumptionState`.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#measureHybridOffsetLag(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)" class="member-name-link">measureHybridOffsetLag</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 boolean&nbsp;shouldLogLag)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Measure the hybrid offset lag for replica being tracked in `partitionConsumptionState`.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#measureLagWithCallToPubSub(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.venice.pubsub.api.PubSubPosition)" class="member-name-link">measureLagWithCallToPubSub</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubServerName,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;pubSubTopicPartition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;currentPosition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>protected static long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#measureLagWithCallToPubSub(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.venice.pubsub.api.PubSubPosition,java.util.function.Function)" class="member-name-link">measureLagWithCallToPubSub</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubBrokerAddress,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;pubSubTopicPartition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;currentPosition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../../venice/pubsub/manager/TopicManager.html" title="class in com.linkedin.venice.pubsub.manager">TopicManager</a>&gt;&nbsp;topicManagerProvider)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#nextSeqNum()" class="member-name-link">nextSeqNum</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Apply an unique and increasing sequence number for each consumer action, so if there are multiple consumer actions
 in the queue and they have the same priority, whichever be added first into the queue will be polled out first
 from the queue (FIFO).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processCommonConsumerAction(com.linkedin.davinci.kafka.consumer.ConsumerAction)" class="member-name-link">processCommonConsumerAction</a><wbr>(<a href="ConsumerAction.html" title="class in com.linkedin.davinci.kafka.consumer">ConsumerAction</a>&nbsp;consumerAction)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#processConsumerAction(com.linkedin.davinci.kafka.consumer.ConsumerAction,com.linkedin.venice.meta.Store)" class="member-name-link">processConsumerAction</a><wbr>(<a href="ConsumerAction.html" title="class in com.linkedin.davinci.kafka.consumer">ConsumerAction</a>&nbsp;message,
 <a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processConsumerRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long)" class="member-name-link">processConsumerRecord</a><wbr>(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;record,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 long&nbsp;beforeProcessingRecordTimestampNs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function will be invoked in <a href="StoreBufferService.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreBufferService</code></a> to process buffered <a href="../../../venice/pubsub/api/PubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api"><code>PubSubMessage</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processControlMessageForViews(com.linkedin.venice.message.KafkaKey,com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope,com.linkedin.venice.kafka.protocol.ControlMessage,int,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">processControlMessageForViews</a><wbr>(<a href="../../../venice/message/KafkaKey.html" title="class in com.linkedin.venice.message">KafkaKey</a>&nbsp;kafkaKey,
 <a href="../../../venice/kafka/protocol/KafkaMessageEnvelope.html" title="class in com.linkedin.venice.kafka.protocol">KafkaMessageEnvelope</a>&nbsp;kafkaMessageEnvelope,
 <a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;controlMessage,
 int&nbsp;partition,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This isn't used for ingestion outside L/F, so we NoOp here and rely on the actual implementation in
  <a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>LeaderFollowerStoreIngestionTask</code></a></div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processEndOfIncrementalPush(com.linkedin.venice.kafka.protocol.ControlMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,long)" class="member-name-link">processEndOfIncrementalPush</a><wbr>(<a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;endOfIncrementalPush,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 long&nbsp;pubSubMessageTime)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processEndOfPush(com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.kafka.protocol.EndOfPush)" class="member-name-link">processEndOfPush</a><wbr>(<a href="../../../venice/kafka/protocol/KafkaMessageEnvelope.html" title="class in com.linkedin.venice.kafka.protocol">KafkaMessageEnvelope</a>&nbsp;endOfPushKME,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;offset,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/kafka/protocol/EndOfPush.html" title="class in com.linkedin.venice.kafka.protocol">EndOfPush</a>&nbsp;endOfPush)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processStartOfIncrementalPush(com.linkedin.venice.kafka.protocol.ControlMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,long)" class="member-name-link">processStartOfIncrementalPush</a><wbr>(<a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;startOfIncrementalPush,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 long&nbsp;pubSubMessageTime)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processTopicSwitch(com.linkedin.venice.kafka.protocol.ControlMessage,int,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">processTopicSwitch</a><wbr>(<a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;controlMessage,
 int&nbsp;partition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;offset,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#produceToStoreBufferService(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long,long)" class="member-name-link">produceToStoreBufferService</a><wbr>(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumedRecord,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 long&nbsp;beforeProcessingRecordTimestampNs,
 long&nbsp;currentTimeForMetricsMs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function will produce a pair of consumer record and a it's derived produced record to the writer buffers
 maintained by <a href="StoreBufferService.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreBufferService</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#produceToStoreBufferServiceOrKafka(java.lang.Iterable,com.linkedin.venice.pubsub.api.PubSubTopicPartition,java.lang.String,int)" class="member-name-link">produceToStoreBufferServiceOrKafka</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&gt;&nbsp;records,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This function is in charge of producing the consumer records to the writer buffers maintained by <a href="StoreBufferService.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreBufferService</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#produceToStoreBufferServiceOrKafkaInBatch(java.lang.Iterable,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String,int)" class="member-name-link">produceToStoreBufferServiceOrKafkaInBatch</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&gt;&nbsp;records,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#promoteToLeader(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.helix.LeaderFollowerPartitionStateModel.LeaderSessionIdChecker)" class="member-name-link">promoteToLeader</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="../../helix/LeaderFollowerPartitionStateModel.LeaderSessionIdChecker.html" title="class in com.linkedin.davinci.helix">LeaderFollowerPartitionStateModel.LeaderSessionIdChecker</a>&nbsp;checker)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#putInStorageEngine(int,byte%5B%5D,com.linkedin.venice.kafka.protocol.Put)" class="member-name-link">putInStorageEngine</a><wbr>(int&nbsp;partition,
 byte[]&nbsp;keyBytes,
 <a href="../../../venice/kafka/protocol/Put.html" title="class in com.linkedin.venice.kafka.protocol">Put</a>&nbsp;put)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Persist Put record to storage engine.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#recordAssembledRecordSize(int,java.nio.ByteBuffer,java.nio.ByteBuffer,long)" class="member-name-link">recordAssembledRecordSize</a><wbr>(int&nbsp;keyLen,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;valueBytes,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;rmdBytes,
 long&nbsp;currentTimeMs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Records metrics for the original size of full-assembled records (key + value) and RMD by utilizing the field
 <a href="../../../venice/storage/protocol/ChunkedValueManifest.html#size"><code>ChunkedValueManifest.size</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#recordAssembledRecordSizeRatio(double,long)" class="member-name-link">recordAssembledRecordSizeRatio</a><wbr>(double&nbsp;ratio,
 long&nbsp;currentTimeMs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#recordChecksumVerificationFailure()" class="member-name-link">recordChecksumVerificationFailure</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#recordHeartbeatReceived(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,java.lang.String)" class="member-name-link">recordHeartbeatReceived</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#recordProcessedRecordStats(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,int)" class="member-name-link">recordProcessedRecordStats</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 int&nbsp;processedRecordSize)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#recordWriterStats(long,long,long,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">recordWriterStats</a><wbr>(long&nbsp;consumerTimestampMs,
 long&nbsp;producerBrokerLatencyMs,
 long&nbsp;brokerConsumerLatencyMs,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#refreshIngestionContextIfChanged(com.linkedin.venice.meta.Store)" class="member-name-link">refreshIngestionContextIfChanged</a><wbr>(<a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeFromStorageEngine(int,byte%5B%5D,com.linkedin.venice.kafka.protocol.Delete)" class="member-name-link">removeFromStorageEngine</a><wbr>(int&nbsp;partition,
 byte[]&nbsp;keyBytes,
 <a href="../../../venice/kafka/protocol/Delete.html" title="class in com.linkedin.venice.kafka.protocol">Delete</a>&nbsp;delete)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#reportError(java.lang.String,int,java.lang.Exception)" class="member-name-link">reportError</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message,
 int&nbsp;userPartition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&nbsp;e)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#reportIfCatchUpVersionTopicOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">reportIfCatchUpVersionTopicOffset</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Check if the ingestion progress has reached to the end of the version topic.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resetPartitionConsumptionOffset(com.linkedin.venice.pubsub.api.PubSubTopicPartition)" class="member-name-link">resetPartitionConsumptionOffset</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds an asynchronous resetting partition consumption offset request for the task.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/kafka/protocol/TopicSwitch.html" title="class in com.linkedin.venice.kafka.protocol">TopicSwitch</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resolveSourceKafkaServersWithinTopicSwitch(com.linkedin.venice.kafka.protocol.TopicSwitch)" class="member-name-link">resolveSourceKafkaServersWithinTopicSwitch</a><wbr>(<a href="../../../venice/kafka/protocol/TopicSwitch.html" title="class in com.linkedin.venice.kafka.protocol">TopicSwitch</a>&nbsp;originalTopicSwitch)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Applies name resolution to all Kafka URLs in the provided TopicSwitch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#resubscribe(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">resubscribe</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#run()" class="member-name-link">run</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Polls the producer for new messages in an infinite loop by a dedicated consumer thread
 and processes the new messages by current thread.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setLastConsumerException(java.lang.Exception)" class="member-name-link">setLastConsumerException</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&nbsp;e)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setLastStoreIngestionException(java.lang.Exception)" class="member-name-link">setLastStoreIngestionException</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&nbsp;e)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setPartitionConsumptionState(int,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">setPartitionConsumptionState</a><wbr>(int&nbsp;partition,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shouldPersistRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">shouldPersistRecord</a><wbr>(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;record,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shouldProcessRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)" class="member-name-link">shouldProcessRecord</a><wbr>(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;record)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Common record check for different state models:
 check whether server continues receiving messages after EOP for a batch-only store.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shutdownAndWait(int)" class="member-name-link">shutdownAndWait</a><wbr>(int&nbsp;waitTime)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method is a blocking call to wait for <a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreIngestionTask</code></a> for fully shutdown in the given time.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startConsumingAsLeader(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">startConsumingAsLeader</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#subscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,boolean,java.util.Optional)" class="member-name-link">subscribePartition</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 boolean&nbsp;isHelixTriggeredAction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&gt;&nbsp;pubSubPosition)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds an asynchronous partition subscription request for the task.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#subscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,java.util.Optional)" class="member-name-link">subscribePartition</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&gt;&nbsp;pubSubPosition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#throwIfNotRunning()" class="member-name-link">throwIfNotRunning</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#throwOrLogStorageFailureDependingIfStillSubscribed(int,com.linkedin.venice.exceptions.VeniceException)" class="member-name-link">throwOrLogStorageFailureDependingIfStillSubscribed</a><wbr>(int&nbsp;partition,
 <a href="../../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a>&nbsp;e)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#unsubscribeFromTopic(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">unsubscribeFromTopic</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;topic,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method unsubscribes topic-partition from the input.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#unSubscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition)" class="member-name-link">unSubscribePartition</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#unSubscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,boolean)" class="member-name-link">unSubscribePartition</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 boolean&nbsp;isHelixTriggeredAction)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds an asynchronous partition unsubscription request for the task.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateAndSyncOffsetFromSnapshot(com.linkedin.davinci.validation.PartitionTracker,com.linkedin.venice.pubsub.api.PubSubTopicPartition)" class="member-name-link">updateAndSyncOffsetFromSnapshot</a><wbr>(<a href="../../validation/PartitionTracker.html" title="class in com.linkedin.davinci.validation">PartitionTracker</a>&nbsp;vtDivSnapshot,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This version of the method syncs using a PartitionTracker object which contains the vtSegments and LCVP</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#updateLatestInMemoryProcessedOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,java.lang.String,boolean)" class="member-name-link">updateLatestInMemoryProcessedOffset</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecordWrapper,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 boolean&nbsp;dryRun)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Maintain the latest processed offsets by drainers in memory; in most of the time, these offsets are ahead of the
 checkpoint offsets inside <a href="../../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets"><code>OffsetRecord</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#updateLeaderTopicOnFollower(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">updateLeaderTopicOnFollower</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateOffsetMetadataAndSync(int)" class="member-name-link">updateOffsetMetadataAndSync</a><wbr>(int&nbsp;partitionId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateOffsetMetadataAndSyncOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">updateOffsetMetadataAndSyncOffset</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateOffsetMetadataAndSyncOffset(com.linkedin.davinci.validation.DataIntegrityValidator,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">updateOffsetMetadataAndSyncOffset</a><wbr>(<a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a>&nbsp;div,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#updateOffsetMetadataInOffsetRecord(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">updateOffsetMetadataInOffsetRecord</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Sync the metadata about offset in <a href="../../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets"><code>OffsetRecord</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#validateAndFilterOutDuplicateMessagesFromLeaderTopic(java.lang.Iterable,java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition)" class="member-name-link">validateAndFilterOutDuplicateMessagesFromLeaderTopic</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&gt;&nbsp;records,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>protected static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#validateEndOfPushReceivedBeforeTopicSwitch(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.PubSubPosition)" class="member-name-link">validateEndOfPushReceivedBeforeTopicSwitch</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;position)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Validates that END_OF_PUSH has been received before processing TOPIC_SWITCH.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#validateMessage(com.linkedin.davinci.validation.PartitionTracker.TopicType,com.linkedin.davinci.validation.DataIntegrityValidator,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)" class="member-name-link">validateMessage</a><wbr>(<a href="../../validation/PartitionTracker.TopicType.html" title="class in com.linkedin.davinci.validation">PartitionTracker.TopicType</a>&nbsp;type,
 <a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a>&nbsp;validator,
 <a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 boolean&nbsp;tolerateMissingMessagesForRealTimeTopic)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Message validation using DIV.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#waitForAllMessageToBeProcessedFromTopicPartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">waitForAllMessageToBeProcessedFromTopicPartition</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The purpose of this function is to wait for the complete processing (including persistence to disk) of all the messages
 those were consumed from this kafka {topic, partition} prior to calling this function.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#waitVersionStateAvailable(java.lang.String)" class="member-name-link">waitVersionStateAvailable</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaTopic)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="SCHEMA_POLLING_DELAY_MS">
<h3>SCHEMA_POLLING_DELAY_MS</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">SCHEMA_POLLING_DELAY_MS</span></div>
</section>
</li>
<li>
<section class="detail" id="STORE_VERSION_POLLING_DELAY_MS">
<h3>STORE_VERSION_POLLING_DELAY_MS</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">STORE_VERSION_POLLING_DELAY_MS</span></div>
</section>
</li>
<li>
<section class="detail" id="WAITING_TIME_FOR_LAST_RECORD_TO_BE_PROCESSED">
<h3>WAITING_TIME_FOR_LAST_RECORD_TO_BE_PROCESSED</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">WAITING_TIME_FOR_LAST_RECORD_TO_BE_PROCESSED</span></div>
</section>
</li>
<li>
<section class="detail" id="KILL_WAIT_TIME_MS">
<h3>KILL_WAIT_TIME_MS</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">KILL_WAIT_TIME_MS</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#com.linkedin.davinci.kafka.consumer.StoreIngestionTask.KILL_WAIT_TIME_MS">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="CHUNK_SCHEMA_ID">
<h3>CHUNK_SCHEMA_ID</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">CHUNK_SCHEMA_ID</span></div>
</section>
</li>
<li>
<section class="detail" id="REDUNDANT_LOGGING_FILTER">
<h3>REDUNDANT_LOGGING_FILTER</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/RedundantExceptionFilter.html" title="class in com.linkedin.venice.utils">RedundantExceptionFilter</a></span>&nbsp;<span class="element-name">REDUNDANT_LOGGING_FILTER</span></div>
</section>
</li>
<li>
<section class="detail" id="storageService">
<h3>storageService</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../storage/StorageService.html" title="class in com.linkedin.davinci.storage">StorageService</a></span>&nbsp;<span class="element-name">storageService</span></div>
<div class="block">storage destination for consumption</div>
</section>
</li>
<li>
<section class="detail" id="storageEngine">
<h3>storageEngine</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../store/StorageEngine.html" title="interface in com.linkedin.davinci.store">StorageEngine</a></span>&nbsp;<span class="element-name">storageEngine</span></div>
</section>
</li>
<li>
<section class="detail" id="kafkaVersionTopic">
<h3>kafkaVersionTopic</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">kafkaVersionTopic</span></div>
<div class="block">Topics used for this topic consumption
 TODO: Using a PubSubVersionTopic and PubSubRealTimeTopic extending PubSubTopic for type safety.</div>
</section>
</li>
<li>
<section class="detail" id="versionTopic">
<h3>versionTopic</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a></span>&nbsp;<span class="element-name">versionTopic</span></div>
</section>
</li>
<li>
<section class="detail" id="realTimeTopic">
<h3>realTimeTopic</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a></span>&nbsp;<span class="element-name">realTimeTopic</span></div>
</section>
</li>
<li>
<section class="detail" id="separateRealTimeTopic">
<h3>separateRealTimeTopic</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a></span>&nbsp;<span class="element-name">separateRealTimeTopic</span></div>
</section>
</li>
<li>
<section class="detail" id="storeName">
<h3>storeName</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">storeName</span></div>
</section>
</li>
<li>
<section class="detail" id="storeVersionName">
<h3>storeVersionName</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">storeVersionName</span></div>
</section>
</li>
<li>
<section class="detail" id="isSystemStore">
<h3>isSystemStore</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isSystemStore</span></div>
</section>
</li>
<li>
<section class="detail" id="versionNumber">
<h3>versionNumber</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">versionNumber</span></div>
</section>
</li>
<li>
<section class="detail" id="schemaRepository">
<h3>schemaRepository</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/meta/ReadOnlySchemaRepository.html" title="interface in com.linkedin.venice.meta">ReadOnlySchemaRepository</a></span>&nbsp;<span class="element-name">schemaRepository</span></div>
</section>
</li>
<li>
<section class="detail" id="storeRepository">
<h3>storeRepository</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/meta/ReadOnlyStoreRepository.html" title="interface in com.linkedin.venice.meta">ReadOnlyStoreRepository</a></span>&nbsp;<span class="element-name">storeRepository</span></div>
</section>
</li>
<li>
<section class="detail" id="ingestionTaskName">
<h3>ingestionTaskName</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">ingestionTaskName</span></div>
</section>
</li>
<li>
<section class="detail" id="kafkaProps">
<h3>kafkaProps</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a></span>&nbsp;<span class="element-name">kafkaProps</span></div>
</section>
</li>
<li>
<section class="detail" id="isRunning">
<h3>isRunning</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></span>&nbsp;<span class="element-name">isRunning</span></div>
</section>
</li>
<li>
<section class="detail" id="emitMetrics">
<h3>emitMetrics</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></span>&nbsp;<span class="element-name">emitMetrics</span></div>
</section>
</li>
<li>
<section class="detail" id="consumerActionSequenceNumber">
<h3>consumerActionSequenceNumber</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></span>&nbsp;<span class="element-name">consumerActionSequenceNumber</span></div>
</section>
</li>
<li>
<section class="detail" id="consumerActionsQueue">
<h3>consumerActionsQueue</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/PriorityBlockingQueue.html" title="class or interface in java.util.concurrent" class="external-link">PriorityBlockingQueue</a>&lt;<a href="ConsumerAction.html" title="class in com.linkedin.davinci.kafka.consumer">ConsumerAction</a>&gt;</span>&nbsp;<span class="element-name">consumerActionsQueue</span></div>
</section>
</li>
<li>
<section class="detail" id="partitionToPendingConsumerActionCountMap">
<h3>partitionToPendingConsumerActionCountMap</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a>&gt;</span>&nbsp;<span class="element-name">partitionToPendingConsumerActionCountMap</span></div>
</section>
</li>
<li>
<section class="detail" id="storageMetadataService">
<h3>storageMetadataService</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../storage/StorageMetadataService.html" title="interface in com.linkedin.davinci.storage">StorageMetadataService</a></span>&nbsp;<span class="element-name">storageMetadataService</span></div>
</section>
</li>
<li>
<section class="detail" id="topicManagerRepository">
<h3>topicManagerRepository</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/manager/TopicManagerRepository.html" title="class in com.linkedin.venice.pubsub.manager">TopicManagerRepository</a></span>&nbsp;<span class="element-name">topicManagerRepository</span></div>
</section>
</li>
<li>
<section class="detail" id="partitionConsumptionStateMap">
<h3>partitionConsumptionStateMap</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>,<wbr><a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&gt;</span>&nbsp;<span class="element-name">partitionConsumptionStateMap</span></div>
<div class="block">Per-partition consumption state map</div>
</section>
</li>
<li>
<section class="detail" id="storeBufferService">
<h3>storeBufferService</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="AbstractStoreBufferService.html" title="class in com.linkedin.davinci.kafka.consumer">AbstractStoreBufferService</a></span>&nbsp;<span class="element-name">storeBufferService</span></div>
</section>
</li>
<li>
<section class="detail" id="consumerDiv">
<h3>consumerDiv</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a></span>&nbsp;<span class="element-name">consumerDiv</span></div>
<div class="block">The consumer and drainer DIV must remain separate. Since the consumer is always ahead of the drainer, the consumer
 would be validating data ahead of the actual persisted data on the drainer.

 NOTE: Currently, the state clearing happens only in drainerDiv which persists its state to disk.
 consumerDiv is transient, not persisted to disk, and its state is not expected to grow as large. Thus,
 bouncing effectively clears it (which is not the case for drainerDiv). Later on, we could trigger state
 cleaning for this consumer DIV as well, if deemed necessary.

 NOTE: When <code>isGlobalRtDivEnabled()</code> is enabled, this will be used by leaders to produce Global RT DIV state
 to local VT. This will also be used to send DIV snapshots to the drainer to persist the VT + RT DIV on-disk.</div>
</section>
</li>
<li>
<section class="detail" id="consumedBytesSinceLastSync">
<h3>consumedBytesSinceLastSync</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/concurrent/VeniceConcurrentHashMap.html" title="class in com.linkedin.venice.utils.concurrent">VeniceConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name">consumedBytesSinceLastSync</span></div>
<div class="block">Map of broker URL to the total bytes consumed by ConsumptionTask since the last Global RT DIV sync</div>
</section>
</li>
<li>
<section class="detail" id="hostLevelIngestionStats">
<h3>hostLevelIngestionStats</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../stats/HostLevelIngestionStats.html" title="class in com.linkedin.davinci.stats">HostLevelIngestionStats</a></span>&nbsp;<span class="element-name">hostLevelIngestionStats</span></div>
</section>
</li>
<li>
<section class="detail" id="versionedDIVStats">
<h3>versionedDIVStats</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../stats/AggVersionedDIVStats.html" title="class in com.linkedin.davinci.stats">AggVersionedDIVStats</a></span>&nbsp;<span class="element-name">versionedDIVStats</span></div>
</section>
</li>
<li>
<section class="detail" id="versionedIngestionStats">
<h3>versionedIngestionStats</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../stats/AggVersionedIngestionStats.html" title="class in com.linkedin.davinci.stats">AggVersionedIngestionStats</a></span>&nbsp;<span class="element-name">versionedIngestionStats</span></div>
</section>
</li>
<li>
<section class="detail" id="recordTransformerStats">
<h3>recordTransformerStats</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../stats/AggVersionedDaVinciRecordTransformerStats.html" title="class in com.linkedin.davinci.stats">AggVersionedDaVinciRecordTransformerStats</a></span>&nbsp;<span class="element-name">recordTransformerStats</span></div>
</section>
</li>
<li>
<section class="detail" id="isCurrentVersion">
<h3>isCurrentVersion</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BooleanSupplier.html" title="class or interface in java.util.function" class="external-link">BooleanSupplier</a></span>&nbsp;<span class="element-name">isCurrentVersion</span></div>
</section>
</li>
<li>
<section class="detail" id="hybridStoreConfig">
<h3>hybridStoreConfig</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../../venice/meta/HybridStoreConfig.html" title="interface in com.linkedin.venice.meta">HybridStoreConfig</a>&gt;</span>&nbsp;<span class="element-name">hybridStoreConfig</span></div>
</section>
</li>
<li>
<section class="detail" id="divErrorMetricCallback">
<h3>divErrorMetricCallback</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="../../../venice/exceptions/validation/DataValidationException.html" title="class in com.linkedin.venice.exceptions.validation">DataValidationException</a>&gt;</span>&nbsp;<span class="element-name">divErrorMetricCallback</span></div>
</section>
</li>
<li>
<section class="detail" id="readCycleDelayMs">
<h3>readCycleDelayMs</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">readCycleDelayMs</span></div>
</section>
</li>
<li>
<section class="detail" id="emptyPollSleepMs">
<h3>emptyPollSleepMs</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">emptyPollSleepMs</span></div>
</section>
</li>
<li>
<section class="detail" id="diskUsage">
<h3>diskUsage</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/DiskUsage.html" title="class in com.linkedin.venice.utils">DiskUsage</a></span>&nbsp;<span class="element-name">diskUsage</span></div>
</section>
</li>
<li>
<section class="detail" id="databaseSyncBytesIntervalForTransactionalMode">
<h3>databaseSyncBytesIntervalForTransactionalMode</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">databaseSyncBytesIntervalForTransactionalMode</span></div>
<div class="block">Message bytes consuming interval before persisting offset in offset db for transactional mode database.</div>
</section>
</li>
<li>
<section class="detail" id="databaseSyncBytesIntervalForDeferredWriteMode">
<h3>databaseSyncBytesIntervalForDeferredWriteMode</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">databaseSyncBytesIntervalForDeferredWriteMode</span></div>
<div class="block">Message bytes consuming interval before persisting offset in offset db for deferred-write database.</div>
</section>
</li>
<li>
<section class="detail" id="serverConfig">
<h3>serverConfig</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../config/VeniceServerConfig.html" title="class in com.linkedin.davinci.config">VeniceServerConfig</a></span>&nbsp;<span class="element-name">serverConfig</span></div>
</section>
</li>
<li>
<section class="detail" id="errorPartitionId">
<h3>errorPartitionId</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">errorPartitionId</span></div>
<div class="block">Used for reporting error when the <a href="#partitionConsumptionStateMap"><code>partitionConsumptionStateMap</code></a> is empty</div>
</section>
</li>
<li>
<section class="detail" id="defaultReadyToServeChecker">
<h3>defaultReadyToServeChecker</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">com.linkedin.davinci.kafka.consumer.StoreIngestionTask.ReadyToServeCheck</span>&nbsp;<span class="element-name">defaultReadyToServeChecker</span></div>
</section>
</li>
<li>
<section class="detail" id="availableSchemaIds">
<h3>availableSchemaIds</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/SparseConcurrentList.html" title="class in com.linkedin.venice.utils">SparseConcurrentList</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</span>&nbsp;<span class="element-name">availableSchemaIds</span></div>
</section>
</li>
<li>
<section class="detail" id="deserializedSchemaIds">
<h3>deserializedSchemaIds</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/SparseConcurrentList.html" title="class in com.linkedin.venice.utils">SparseConcurrentList</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</span>&nbsp;<span class="element-name">deserializedSchemaIds</span></div>
</section>
</li>
<li>
<section class="detail" id="idleCounter">
<h3>idleCounter</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></span>&nbsp;<span class="element-name">idleCounter</span></div>
</section>
</li>
<li>
<section class="detail" id="aggKafkaConsumerService">
<h3>aggKafkaConsumerService</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="AggKafkaConsumerService.html" title="class in com.linkedin.davinci.kafka.consumer">AggKafkaConsumerService</a></span>&nbsp;<span class="element-name">aggKafkaConsumerService</span></div>
</section>
</li>
<li>
<section class="detail" id="writeComputeFailureCode">
<h3>writeComputeFailureCode</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">writeComputeFailureCode</span></div>
</section>
</li>
<li>
<section class="detail" id="isWriteComputationEnabled">
<h3>isWriteComputationEnabled</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isWriteComputationEnabled</span></div>
</section>
</li>
<li>
<section class="detail" id="partitionCount">
<h3>partitionCount</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">partitionCount</span></div>
<div class="block">This would be the number of partitions in the StorageEngine and in version topics</div>
</section>
</li>
<li>
<section class="detail" id="storeVersionPartitionCount">
<h3>storeVersionPartitionCount</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">storeVersionPartitionCount</span></div>
</section>
</li>
<li>
<section class="detail" id="bootstrapTimeoutInMs">
<h3>bootstrapTimeoutInMs</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">bootstrapTimeoutInMs</span></div>
</section>
</li>
<li>
<section class="detail" id="isIsolatedIngestion">
<h3>isIsolatedIngestion</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isIsolatedIngestion</span></div>
</section>
</li>
<li>
<section class="detail" id="ingestionNotificationDispatcher">
<h3>ingestionNotificationDispatcher</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">com.linkedin.davinci.kafka.consumer.IngestionNotificationDispatcher</span>&nbsp;<span class="element-name">ingestionNotificationDispatcher</span></div>
</section>
</li>
<li>
<section class="detail" id="chunkAssembler">
<h3>chunkAssembler</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../utils/InMemoryChunkAssembler.html" title="class in com.linkedin.davinci.utils">InMemoryChunkAssembler</a></span>&nbsp;<span class="element-name">chunkAssembler</span></div>
</section>
</li>
<li>
<section class="detail" id="localKafkaServer">
<h3>localKafkaServer</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">localKafkaServer</span></div>
</section>
</li>
<li>
<section class="detail" id="localKafkaClusterId">
<h3>localKafkaClusterId</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">localKafkaClusterId</span></div>
</section>
</li>
<li>
<section class="detail" id="localKafkaServerSingletonSet">
<h3>localKafkaServerSingletonSet</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">localKafkaServerSingletonSet</span></div>
</section>
</li>
<li>
<section class="detail" id="isDaVinciClient">
<h3>isDaVinciClient</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isDaVinciClient</span></div>
</section>
</li>
<li>
<section class="detail" id="isDataRecovery">
<h3>isDataRecovery</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isDataRecovery</span></div>
</section>
</li>
<li>
<section class="detail" id="dataRecoverySourceVersionNumber">
<h3>dataRecoverySourceVersionNumber</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">dataRecoverySourceVersionNumber</span></div>
</section>
</li>
<li>
<section class="detail" id="readOnlyForBatchOnlyStoreEnabled">
<h3>readOnlyForBatchOnlyStoreEnabled</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">readOnlyForBatchOnlyStoreEnabled</span></div>
</section>
</li>
<li>
<section class="detail" id="metaStoreWriter">
<h3>metaStoreWriter</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/system/store/MetaStoreWriter.html" title="class in com.linkedin.venice.system.store">MetaStoreWriter</a></span>&nbsp;<span class="element-name">metaStoreWriter</span></div>
</section>
</li>
<li>
<section class="detail" id="kafkaClusterUrlResolver">
<h3>kafkaClusterUrlResolver</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">kafkaClusterUrlResolver</span></div>
</section>
</li>
<li>
<section class="detail" id="resetErrorReplicaEnabled">
<h3>resetErrorReplicaEnabled</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">resetErrorReplicaEnabled</span></div>
</section>
</li>
<li>
<section class="detail" id="compressionStrategy">
<h3>compressionStrategy</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/compression/CompressionStrategy.html" title="enum class in com.linkedin.venice.compression">CompressionStrategy</a></span>&nbsp;<span class="element-name">compressionStrategy</span></div>
</section>
</li>
<li>
<section class="detail" id="compressorFactory">
<h3>compressorFactory</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../compression/StorageEngineBackedCompressorFactory.html" title="class in com.linkedin.davinci.compression">StorageEngineBackedCompressorFactory</a></span>&nbsp;<span class="element-name">compressorFactory</span></div>
</section>
</li>
<li>
<section class="detail" id="compressor">
<h3>compressor</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;<a href="../../../venice/compression/VeniceCompressor.html" title="class in com.linkedin.venice.compression">VeniceCompressor</a>&gt;</span>&nbsp;<span class="element-name">compressor</span></div>
</section>
</li>
<li>
<section class="detail" id="isChunked">
<h3>isChunked</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isChunked</span></div>
</section>
</li>
<li>
<section class="detail" id="isRmdChunked">
<h3>isRmdChunked</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isRmdChunked</span></div>
</section>
</li>
<li>
<section class="detail" id="manifestSerializer">
<h3>manifestSerializer</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/serialization/avro/ChunkedValueManifestSerializer.html" title="class in com.linkedin.venice.serialization.avro">ChunkedValueManifestSerializer</a></span>&nbsp;<span class="element-name">manifestSerializer</span></div>
</section>
</li>
<li>
<section class="detail" id="pubSubContext">
<h3>pubSubContext</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/PubSubContext.html" title="class in com.linkedin.venice.pubsub">PubSubContext</a></span>&nbsp;<span class="element-name">pubSubContext</span></div>
</section>
</li>
<li>
<section class="detail" id="pubSubTopicRepository">
<h3>pubSubTopicRepository</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/PubSubTopicRepository.html" title="class in com.linkedin.venice.pubsub">PubSubTopicRepository</a></span>&nbsp;<span class="element-name">pubSubTopicRepository</span></div>
</section>
</li>
<li>
<section class="detail" id="recordLevelMetricEnabled">
<h3>recordLevelMetricEnabled</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></span>&nbsp;<span class="element-name">recordLevelMetricEnabled</span></div>
</section>
</li>
<li>
<section class="detail" id="isGlobalRtDivEnabled">
<h3>isGlobalRtDivEnabled</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isGlobalRtDivEnabled</span></div>
</section>
</li>
<li>
<section class="detail" id="versionRole">
<h3>versionRole</h3>
<div class="member-signature"><span class="modifiers">protected volatile</span>&nbsp;<span class="return-type"><a href="../../../venice/server/VersionRole.html" title="enum class in com.linkedin.venice.server">VersionRole</a></span>&nbsp;<span class="element-name">versionRole</span></div>
</section>
</li>
<li>
<section class="detail" id="versionBootstrapCompleted">
<h3>versionBootstrapCompleted</h3>
<div class="member-signature"><span class="modifiers">protected volatile</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">versionBootstrapCompleted</span></div>
</section>
</li>
<li>
<section class="detail" id="workloadType">
<h3>workloadType</h3>
<div class="member-signature"><span class="modifiers">protected volatile</span>&nbsp;<span class="return-type"><a href="PartitionReplicaIngestionContext.WorkloadType.html" title="enum class in com.linkedin.davinci.kafka.consumer">PartitionReplicaIngestionContext.WorkloadType</a></span>&nbsp;<span class="element-name">workloadType</span></div>
</section>
</li>
<li>
<section class="detail" id="batchReportIncPushStatusEnabled">
<h3>batchReportIncPushStatusEnabled</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">batchReportIncPushStatusEnabled</span></div>
</section>
</li>
<li>
<section class="detail" id="parallelProcessingThreadPool">
<h3>parallelProcessingThreadPool</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html" title="class or interface in java.util.concurrent" class="external-link">ExecutorService</a></span>&nbsp;<span class="element-name">parallelProcessingThreadPool</span></div>
</section>
</li>
<li>
<section class="detail" id="gracefulShutdownLatch">
<h3>gracefulShutdownLatch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CountDownLatch.html" title="class or interface in java.util.concurrent" class="external-link">CountDownLatch</a>&gt;</span>&nbsp;<span class="element-name">gracefulShutdownLatch</span></div>
</section>
</li>
<li>
<section class="detail" id="zkHelixAdmin">
<h3>zkHelixAdmin</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.helix.manager.zk.ZKHelixAdmin&gt;</span>&nbsp;<span class="element-name">zkHelixAdmin</span></div>
</section>
</li>
<li>
<section class="detail" id="hostName">
<h3>hostName</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">hostName</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(com.linkedin.davinci.storage.StorageService,com.linkedin.davinci.kafka.consumer.StoreIngestionTaskFactory.Builder,com.linkedin.venice.meta.Store,com.linkedin.venice.meta.Version,java.util.Properties,java.util.function.BooleanSupplier,com.linkedin.davinci.config.VeniceStoreVersionConfig,int,boolean,java.util.Optional,com.linkedin.davinci.client.InternalDaVinciRecordTransformerConfig,java.util.Queue,com.linkedin.venice.utils.lazy.Lazy)">
<h3>StoreIngestionTask</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">StoreIngestionTask</span><wbr><span class="parameters">(<a href="../../storage/StorageService.html" title="class in com.linkedin.davinci.storage">StorageService</a>&nbsp;storageService,
 <a href="StoreIngestionTaskFactory.Builder.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTaskFactory.Builder</a>&nbsp;builder,
 <a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store,
 <a href="../../../venice/meta/Version.html" title="interface in com.linkedin.venice.meta">Version</a>&nbsp;version,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a>&nbsp;kafkaConsumerProperties,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BooleanSupplier.html" title="class or interface in java.util.function" class="external-link">BooleanSupplier</a>&nbsp;isCurrentVersion,
 <a href="../../config/VeniceStoreVersionConfig.html" title="class in com.linkedin.davinci.config">VeniceStoreVersionConfig</a>&nbsp;storeVersionConfig,
 int&nbsp;errorPartitionId,
 boolean&nbsp;isIsolatedIngestion,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../store/cache/backend/ObjectCacheBackend.html" title="class in com.linkedin.davinci.store.cache.backend">ObjectCacheBackend</a>&gt;&nbsp;cacheBackend,
 <a href="../../client/InternalDaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client">InternalDaVinciRecordTransformerConfig</a>&nbsp;internalRecordTransformerConfig,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Queue.html" title="class or interface in java.util" class="external-link">Queue</a>&lt;<a href="../../notifier/VeniceNotifier.html" title="interface in com.linkedin.davinci.notifier">VeniceNotifier</a>&gt;&nbsp;notifiers,
 <a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.helix.manager.zk.ZKHelixAdmin&gt;&nbsp;zkHelixAdmin)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getIngestionBatchProcessor()">
<h3>getIngestionBatchProcessor</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="IngestionBatchProcessor.html" title="class in com.linkedin.davinci.kafka.consumer">IngestionBatchProcessor</a></span>&nbsp;<span class="element-name">getIngestionBatchProcessor</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getStorageEngine()">
<h3>getStorageEngine</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../store/StorageEngine.html" title="interface in com.linkedin.davinci.store">StorageEngine</a></span>&nbsp;<span class="element-name">getStorageEngine</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getIngestionTaskName()">
<h3>getIngestionTaskName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getIngestionTaskName</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getVersionNumber()">
<h3>getVersionNumber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getVersionNumber</span>()</div>
</section>
</li>
<li>
<section class="detail" id="throwIfNotRunning()">
<h3>throwIfNotRunning</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">throwIfNotRunning</span>()</div>
</section>
</li>
<li>
<section class="detail" id="nextSeqNum()">
<h3>nextSeqNum</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">nextSeqNum</span>()</div>
<div class="block">Apply an unique and increasing sequence number for each consumer action, so if there are multiple consumer actions
 in the queue and they have the same priority, whichever be added first into the queue will be polled out first
 from the queue (FIFO).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>an unique and increasing sequence number for a new consumer action.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="subscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,java.util.Optional)">
<h3>subscribePartition</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">subscribePartition</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&gt;&nbsp;pubSubPosition)</span></div>
</section>
</li>
<li>
<section class="detail" id="subscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,boolean,java.util.Optional)">
<h3>subscribePartition</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">subscribePartition</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 boolean&nbsp;isHelixTriggeredAction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&gt;&nbsp;pubSubPosition)</span></div>
<div class="block">Adds an asynchronous partition subscription request for the task.</div>
</section>
</li>
<li>
<section class="detail" id="unSubscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition)">
<h3>unSubscribePartition</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">unSubscribePartition</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</span></div>
</section>
</li>
<li>
<section class="detail" id="unSubscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,boolean)">
<h3>unSubscribePartition</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">unSubscribePartition</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 boolean&nbsp;isHelixTriggeredAction)</span></div>
<div class="block">Adds an asynchronous partition unsubscription request for the task.</div>
</section>
</li>
<li>
<section class="detail" id="dropStoragePartitionGracefully(com.linkedin.venice.pubsub.api.PubSubTopicPartition)">
<h3>dropStoragePartitionGracefully</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">dropStoragePartitionGracefully</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</span></div>
<div class="block">Drops a storage partition gracefully.
 This is always a Helix triggered action.</div>
</section>
</li>
<li>
<section class="detail" id="hasAnySubscription()">
<h3>hasAnySubscription</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasAnySubscription</span>()</div>
</section>
</li>
<li>
<section class="detail" id="hasAnyPendingSubscription()">
<h3>hasAnyPendingSubscription</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasAnyPendingSubscription</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isIdleOverThreshold()">
<h3>isIdleOverThreshold</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isIdleOverThreshold</span>()</div>
<div class="block">This helper function will check if the ingestion task has been idle for a long time.</div>
</section>
</li>
<li>
<section class="detail" id="resetPartitionConsumptionOffset(com.linkedin.venice.pubsub.api.PubSubTopicPartition)">
<h3>resetPartitionConsumptionOffset</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">resetPartitionConsumptionOffset</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</span></div>
<div class="block">Adds an asynchronous resetting partition consumption offset request for the task.</div>
</section>
</li>
<li>
<section class="detail" id="getStoreName()">
<h3>getStoreName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getStoreName</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isUserSystemStore()">
<h3>isUserSystemStore</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isUserSystemStore</span>()</div>
</section>
</li>
<li>
<section class="detail" id="promoteToLeader(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.helix.LeaderFollowerPartitionStateModel.LeaderSessionIdChecker)">
<h3>promoteToLeader</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">promoteToLeader</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="../../helix/LeaderFollowerPartitionStateModel.LeaderSessionIdChecker.html" title="class in com.linkedin.davinci.helix">LeaderFollowerPartitionStateModel.LeaderSessionIdChecker</a>&nbsp;checker)</span></div>
</section>
</li>
<li>
<section class="detail" id="demoteToStandby(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.helix.LeaderFollowerPartitionStateModel.LeaderSessionIdChecker)">
<h3>demoteToStandby</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">demoteToStandby</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="../../helix/LeaderFollowerPartitionStateModel.LeaderSessionIdChecker.html" title="class in com.linkedin.davinci.helix">LeaderFollowerPartitionStateModel.LeaderSessionIdChecker</a>&nbsp;checker)</span></div>
</section>
</li>
<li>
<section class="detail" id="hasPendingPartitionIngestionAction(int)">
<h3>hasPendingPartitionIngestionAction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasPendingPartitionIngestionAction</span><wbr><span class="parameters">(int&nbsp;userPartition)</span></div>
</section>
</li>
<li>
<section class="detail" id="kill()">
<h3>kill</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">kill</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getStoragePartitionConfig(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>getStoragePartitionConfig</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../store/StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a></span>&nbsp;<span class="element-name">getStoragePartitionConfig</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="getStoragePartitionConfig(boolean,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>getStoragePartitionConfig</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../store/StoragePartitionConfig.html" title="class in com.linkedin.davinci.store">StoragePartitionConfig</a></span>&nbsp;<span class="element-name">getStoragePartitionConfig</span><wbr><span class="parameters">(boolean&nbsp;sorted,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="isHybridFollower(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>isHybridFollower</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isHybridFollower</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="checkAndLogIfLagIsAcceptableForHybridStore(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,long,long,boolean,com.linkedin.davinci.ingestion.LagType)">
<h3>checkAndLogIfLagIsAcceptableForHybridStore</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">checkAndLogIfLagIsAcceptableForHybridStore</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 long&nbsp;lag,
 long&nbsp;threshold,
 boolean&nbsp;shouldLogLag,
 <a href="../../ingestion/LagType.html" title="enum class in com.linkedin.davinci.ingestion">LagType</a>&nbsp;lagType)</span></div>
<div class="block">Checks whether the lag is acceptable for hybrid stores</div>
</section>
</li>
<li>
<section class="detail" id="isReadyToServe(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>isReadyToServe</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isReadyToServe</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<div class="block">This function checks various conditions to verify if a store is ready to serve.
 Lag = (Source Max Offset - SOBR Source Offset) - (Current Offset - SOBR Destination Offset)</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if EOP was received and (for hybrid stores) if lag &lt;= threshold</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isRealTimeBufferReplayStarted(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>isRealTimeBufferReplayStarted</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isRealTimeBufferReplayStarted</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="measureHybridOffsetLag(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">
<h3>measureHybridOffsetLag</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">measureHybridOffsetLag</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 boolean&nbsp;shouldLogLag)</span></div>
<div class="block">Measure the hybrid offset lag for replica being tracked in `partitionConsumptionState`.</div>
</section>
</li>
<li>
<section class="detail" id="measureHybridHeartbeatLag(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">
<h3>measureHybridHeartbeatLag</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">measureHybridHeartbeatLag</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 boolean&nbsp;shouldLogLag)</span></div>
<div class="block">Measure the hybrid heartbeat lag for replica being tracked in `partitionConsumptionState`.
 If it is Da Vinci client, return <a href="../../stats/ingestion/heartbeat/HeartbeatMonitoringService.html#INVALID_HEARTBEAT_LAG"><code>HeartbeatMonitoringService.INVALID_HEARTBEAT_LAG</code></a> before it is implemented.</div>
</section>
</li>
<li>
<section class="detail" id="measureHybridHeartbeatTimestamp(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">
<h3>measureHybridHeartbeatTimestamp</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">measureHybridHeartbeatTimestamp</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 boolean&nbsp;shouldLogLag)</span></div>
<div class="block">Measure the hybrid heartbeat timestamp for replica being tracked in `partitionConsumptionState`.
 If it is Da Vinci client, return <a href="../../stats/ingestion/heartbeat/HeartbeatMonitoringService.html#INVALID_MESSAGE_TIMESTAMP"><code>HeartbeatMonitoringService.INVALID_MESSAGE_TIMESTAMP</code></a> before it is implemented.</div>
</section>
</li>
<li>
<section class="detail" id="reportIfCatchUpVersionTopicOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>reportIfCatchUpVersionTopicOffset</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">reportIfCatchUpVersionTopicOffset</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<div class="block">Check if the ingestion progress has reached to the end of the version topic. This is currently only
 used <a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>LeaderFollowerStoreIngestionTask</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="produceToStoreBufferService(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long,long)">
<h3>produceToStoreBufferService</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">produceToStoreBufferService</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumedRecord,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 long&nbsp;beforeProcessingRecordTimestampNs,
 long&nbsp;currentTimeForMetricsMs)</span>
                                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">This function will produce a pair of consumer record and a it's derived produced record to the writer buffers
 maintained by <a href="StoreBufferService.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreBufferService</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>consumedRecord</code> - : received consumer record</dd>
<dd><code>leaderProducedRecordContext</code> - : derived leaderProducedRecordContext</dd>
<dd><code>partition</code> - </dd>
<dd><code>kafkaUrl</code> - </dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="validateAndFilterOutDuplicateMessagesFromLeaderTopic(java.lang.Iterable,java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition)">
<h3>validateAndFilterOutDuplicateMessagesFromLeaderTopic</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&gt;</span>&nbsp;<span class="element-name">validateAndFilterOutDuplicateMessagesFromLeaderTopic</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&gt;&nbsp;records,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</span></div>
</section>
</li>
<li>
<section class="detail" id="produceToStoreBufferServiceOrKafka(java.lang.Iterable,com.linkedin.venice.pubsub.api.PubSubTopicPartition,java.lang.String,int)">
<h3>produceToStoreBufferServiceOrKafka</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">produceToStoreBufferServiceOrKafka</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&gt;&nbsp;records,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId)</span>
                                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">This function is in charge of producing the consumer records to the writer buffers maintained by <a href="StoreBufferService.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreBufferService</code></a>.

 This function may modify the original record in KME and it is unsafe to use the payload from KME directly after this call.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>records</code> - : received consumer records</dd>
<dd><code>topicPartition</code> - </dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="produceToStoreBufferServiceOrKafkaInBatch(java.lang.Iterable,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String,int)">
<h3>produceToStoreBufferServiceOrKafkaInBatch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">produceToStoreBufferServiceOrKafkaInBatch</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&gt;&nbsp;records,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId)</span>
                                                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkIngestionProgress(com.linkedin.venice.meta.Store)">
<h3>checkIngestionProgress</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">checkIngestionProgress</span><wbr><span class="parameters">(<a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store)</span>
                               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="refreshIngestionContextIfChanged(com.linkedin.venice.meta.Store)">
<h3>refreshIngestionContextIfChanged</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">refreshIngestionContextIfChanged</span><wbr><span class="parameters">(<a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store)</span>
                                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isIngestionTaskActive()">
<h3>isIngestionTaskActive</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isIngestionTaskActive</span>()</div>
</section>
</li>
<li>
<section class="detail" id="run()">
<h3>run</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">run</span>()</div>
<div class="block">Polls the producer for new messages in an infinite loop by a dedicated consumer thread
 and processes the new messages by current thread.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runnable.html#run()" title="class or interface in java.lang" class="external-link">run</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateOffsetMetadataAndSyncOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>updateOffsetMetadataAndSyncOffset</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateOffsetMetadataAndSyncOffset</span><wbr><span class="parameters">(@Nonnull
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs)</span></div>
</section>
</li>
<li>
<section class="detail" id="updateOffsetMetadataAndSyncOffset(com.linkedin.davinci.validation.DataIntegrityValidator,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>updateOffsetMetadataAndSyncOffset</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateOffsetMetadataAndSyncOffset</span><wbr><span class="parameters">(<a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a>&nbsp;div,
 @Nonnull
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs)</span></div>
</section>
</li>
<li>
<section class="detail" id="updateAndSyncOffsetFromSnapshot(com.linkedin.davinci.validation.PartitionTracker,com.linkedin.venice.pubsub.api.PubSubTopicPartition)">
<h3>updateAndSyncOffsetFromSnapshot</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateAndSyncOffsetFromSnapshot</span><wbr><span class="parameters">(<a href="../../validation/PartitionTracker.html" title="class in com.linkedin.davinci.validation">PartitionTracker</a>&nbsp;vtDivSnapshot,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</span></div>
<div class="block">This version of the method syncs using a PartitionTracker object which contains the vtSegments and LCVP</div>
</section>
</li>
<li>
<section class="detail" id="closeVeniceWriters(boolean)">
<h3>closeVeniceWriters</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">closeVeniceWriters</span><wbr><span class="parameters">(boolean&nbsp;doFlush)</span></div>
</section>
</li>
<li>
<section class="detail" id="closeVeniceViewWriters(boolean)">
<h3>closeVeniceViewWriters</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">closeVeniceViewWriters</span><wbr><span class="parameters">(boolean&nbsp;doFlush)</span></div>
</section>
</li>
<li>
<section class="detail" id="resolveSourceKafkaServersWithinTopicSwitch(com.linkedin.venice.kafka.protocol.TopicSwitch)">
<h3>resolveSourceKafkaServersWithinTopicSwitch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/kafka/protocol/TopicSwitch.html" title="class in com.linkedin.venice.kafka.protocol">TopicSwitch</a></span>&nbsp;<span class="element-name">resolveSourceKafkaServersWithinTopicSwitch</span><wbr><span class="parameters">(<a href="../../../venice/kafka/protocol/TopicSwitch.html" title="class in com.linkedin.venice.kafka.protocol">TopicSwitch</a>&nbsp;originalTopicSwitch)</span></div>
<div class="block">Applies name resolution to all Kafka URLs in the provided TopicSwitch. Useful for translating URLs that came from
 a different runtime (e.g. from the controller, or from state persisted by a previous run of the same server).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the same TopicSwitch, mutated such that all Kafka URLs it contains are guaranteed to be usable by
         the current Venice server instance</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOffsetToOnlineLagThresholdPerPartition(java.util.Optional,java.lang.String,int)">
<h3>getOffsetToOnlineLagThresholdPerPartition</h3>
<div class="member-signature"><span class="modifiers">protected static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getOffsetToOnlineLagThresholdPerPartition</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../../venice/meta/HybridStoreConfig.html" title="interface in com.linkedin.venice.meta">HybridStoreConfig</a>&gt;&nbsp;hybridStoreConfig,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;storeName,
 int&nbsp;partitionCount)</span></div>
</section>
</li>
<li>
<section class="detail" id="processCommonConsumerAction(com.linkedin.davinci.kafka.consumer.ConsumerAction)">
<h3>processCommonConsumerAction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processCommonConsumerAction</span><wbr><span class="parameters">(<a href="ConsumerAction.html" title="class in com.linkedin.davinci.kafka.consumer">ConsumerAction</a>&nbsp;consumerAction)</span>
                                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTopicPartitionEndPosition(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition)">
<h3>getTopicPartitionEndPosition</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a></span>&nbsp;<span class="element-name">getTopicPartitionEndPosition</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubBrokerAddress,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition)</span></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the end position for the topic partition in SIT, or a <a href="../../../venice/pubsub/api/PubSubSymbolicPosition.html#LATEST"><code>PubSubSymbolicPosition.LATEST</code></a> value if
 it failed to get it.

 N.B.: The returned end position is the last successfully replicated message plus one. If the partition has never been
 written to, the end position is equal to the start position.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkLongRunningTaskState()">
<h3>checkLongRunningTaskState</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">checkLongRunningTaskState</span>()
                                           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processConsumerAction(com.linkedin.davinci.kafka.consumer.ConsumerAction,com.linkedin.venice.meta.Store)">
<h3>processConsumerAction</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processConsumerAction</span><wbr><span class="parameters">(<a href="ConsumerAction.html" title="class in com.linkedin.davinci.kafka.consumer">ConsumerAction</a>&nbsp;message,
 <a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store)</span>
                                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getConsumptionSourceKafkaAddress(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>getConsumptionSourceKafkaAddress</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getConsumptionSourceKafkaAddress</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="startConsumingAsLeader(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>startConsumingAsLeader</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startConsumingAsLeader</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="getRealTimeDataSourceKafkaAddress(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>getRealTimeDataSourceKafkaAddress</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getRealTimeDataSourceKafkaAddress</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="getPartitionConsumptionState(int)">
<h3>getPartitionConsumptionState</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a></span>&nbsp;<span class="element-name">getPartitionConsumptionState</span><wbr><span class="parameters">(int&nbsp;partitionId)</span></div>
</section>
</li>
<li>
<section class="detail" id="hasAnyPartitionConsumptionState(java.util.function.Predicate)">
<h3>hasAnyPartitionConsumptionState</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasAnyPartitionConsumptionState</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link">Predicate</a>&lt;<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&gt;&nbsp;pcsPredicate)</span></div>
</section>
</li>
<li>
<section class="detail" id="getFailedIngestionPartitionCount()">
<h3>getFailedIngestionPartitionCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getFailedIngestionPartitionCount</span>()</div>
</section>
</li>
<li>
<section class="detail" id="shouldProcessRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)">
<h3>shouldProcessRecord</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">shouldProcessRecord</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;record)</span></div>
<div class="block">Common record check for different state models:
 check whether server continues receiving messages after EOP for a batch-only store.</div>
</section>
</li>
<li>
<section class="detail" id="shouldPersistRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>shouldPersistRecord</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">shouldPersistRecord</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;record,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="processConsumerRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long)">
<h3>processConsumerRecord</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processConsumerRecord</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;record,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 long&nbsp;beforeProcessingRecordTimestampNs)</span></div>
<div class="block">This function will be invoked in <a href="StoreBufferService.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreBufferService</code></a> to process buffered <a href="../../../venice/pubsub/api/PubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api"><code>PubSubMessage</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="recordHeartbeatReceived(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,java.lang.String)">
<h3>recordHeartbeatReceived</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordHeartbeatReceived</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl)</span></div>
</section>
</li>
<li>
<section class="detail" id="setLastConsumerException(java.lang.Exception)">
<h3>setLastConsumerException</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setLastConsumerException</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&nbsp;e)</span></div>
</section>
</li>
<li>
<section class="detail" id="setLastStoreIngestionException(java.lang.Exception)">
<h3>setLastStoreIngestionException</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setLastStoreIngestionException</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&nbsp;e)</span></div>
</section>
</li>
<li>
<section class="detail" id="recordChecksumVerificationFailure()">
<h3>recordChecksumVerificationFailure</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordChecksumVerificationFailure</span>()</div>
</section>
</li>
<li>
<section class="detail" id="recordAssembledRecordSize(int,java.nio.ByteBuffer,java.nio.ByteBuffer,long)">
<h3>recordAssembledRecordSize</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordAssembledRecordSize</span><wbr><span class="parameters">(int&nbsp;keyLen,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;valueBytes,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;rmdBytes,
 long&nbsp;currentTimeMs)</span></div>
<div class="block">Records metrics for the original size of full-assembled records (key + value) and RMD by utilizing the field
 <a href="../../../venice/storage/protocol/ChunkedValueManifest.html#size"><code>ChunkedValueManifest.size</code></a>.
 Also records the ratio of assembled record size to maximum allowed size, which is intended to be used to alert
 customers about how close they are to hitting the size limit.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>keyLen</code> - The size of the record's key</dd>
<dd><code>valueBytes</code> - <a href="../../../venice/kafka/protocol/Put.html#putValue"><code>Put.putValue</code></a> which is expected to be a serialized <a href="../../../venice/storage/protocol/ChunkedValueManifest.html" title="class in com.linkedin.venice.storage.protocol"><code>ChunkedValueManifest</code></a></dd>
<dd><code>rmdBytes</code> - <a href="../../../venice/kafka/protocol/Put.html#replicationMetadataPayload"><code>Put.replicationMetadataPayload</code></a> which can be a serialized <a href="../../../venice/storage/protocol/ChunkedValueManifest.html" title="class in com.linkedin.venice.storage.protocol"><code>ChunkedValueManifest</code></a> if
 RMD chunking was enabled or just the RMD payload otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recordAssembledRecordSizeRatio(double,long)">
<h3>recordAssembledRecordSizeRatio</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordAssembledRecordSizeRatio</span><wbr><span class="parameters">(double&nbsp;ratio,
 long&nbsp;currentTimeMs)</span></div>
</section>
</li>
<li>
<section class="detail" id="calculateAssembledRecordSizeRatio(long)">
<h3>calculateAssembledRecordSizeRatio</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">calculateAssembledRecordSizeRatio</span><wbr><span class="parameters">(long&nbsp;recordSize)</span></div>
</section>
</li>
<li>
<section class="detail" id="measureLagWithCallToPubSub(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.venice.pubsub.api.PubSubPosition)">
<h3>measureLagWithCallToPubSub</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">measureLagWithCallToPubSub</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubServerName,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;pubSubTopicPartition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;currentPosition)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pubSubServerName</code> - Pub Sub deployment to interrogate</dd>
<dd><code>pubSubTopicPartition</code> - the topic partition to measure lag for</dd>
<dt>Returns:</dt>
<dd>the lag, or <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html#MAX_VALUE" title="class or interface in java.lang" class="external-link">9223372036854775807L</a> if it failed to measure it

 N.B.: Note that the returned lag can be negative since the end offset used in the calculation is cached.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="measureLagWithCallToPubSub(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.venice.pubsub.api.PubSubPosition,java.util.function.Function)">
<h3>measureLagWithCallToPubSub</h3>
<div class="member-signature"><span class="modifiers">protected static</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">measureLagWithCallToPubSub</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubBrokerAddress,
 <a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;pubSubTopicPartition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;currentPosition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../../venice/pubsub/manager/TopicManager.html" title="class in com.linkedin.venice.pubsub.manager">TopicManager</a>&gt;&nbsp;topicManagerProvider)</span></div>
</section>
</li>
<li>
<section class="detail" id="getWriteComputeErrorCode()">
<h3>getWriteComputeErrorCode</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getWriteComputeErrorCode</span>()</div>
</section>
</li>
<li>
<section class="detail" id="updateLeaderTopicOnFollower(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>updateLeaderTopicOnFollower</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateLeaderTopicOnFollower</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="isHybridMode()">
<h3>isHybridMode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isHybridMode</span>()</div>
</section>
</li>
<li>
<section class="detail" id="processEndOfPush(com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.kafka.protocol.EndOfPush)">
<h3>processEndOfPush</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processEndOfPush</span><wbr><span class="parameters">(<a href="../../../venice/kafka/protocol/KafkaMessageEnvelope.html" title="class in com.linkedin.venice.kafka.protocol">KafkaMessageEnvelope</a>&nbsp;endOfPushKME,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;offset,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/kafka/protocol/EndOfPush.html" title="class in com.linkedin.venice.kafka.protocol">EndOfPush</a>&nbsp;endOfPush)</span></div>
</section>
</li>
<li>
<section class="detail" id="processStartOfIncrementalPush(com.linkedin.venice.kafka.protocol.ControlMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,long)">
<h3>processStartOfIncrementalPush</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processStartOfIncrementalPush</span><wbr><span class="parameters">(<a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;startOfIncrementalPush,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 long&nbsp;pubSubMessageTime)</span></div>
</section>
</li>
<li>
<section class="detail" id="processEndOfIncrementalPush(com.linkedin.venice.kafka.protocol.ControlMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,long)">
<h3>processEndOfIncrementalPush</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processEndOfIncrementalPush</span><wbr><span class="parameters">(<a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;endOfIncrementalPush,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 long&nbsp;pubSubMessageTime)</span></div>
</section>
</li>
<li>
<section class="detail" id="processControlMessageForViews(com.linkedin.venice.message.KafkaKey,com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope,com.linkedin.venice.kafka.protocol.ControlMessage,int,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>processControlMessageForViews</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processControlMessageForViews</span><wbr><span class="parameters">(<a href="../../../venice/message/KafkaKey.html" title="class in com.linkedin.venice.message">KafkaKey</a>&nbsp;kafkaKey,
 <a href="../../../venice/kafka/protocol/KafkaMessageEnvelope.html" title="class in com.linkedin.venice.kafka.protocol">KafkaMessageEnvelope</a>&nbsp;kafkaMessageEnvelope,
 <a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;controlMessage,
 int&nbsp;partition,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<div class="block">This isn't used for ingestion outside L/F, so we NoOp here and rely on the actual implementation in
  <a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>LeaderFollowerStoreIngestionTask</code></a></div>
</section>
</li>
<li>
<section class="detail" id="processTopicSwitch(com.linkedin.venice.kafka.protocol.ControlMessage,int,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>processTopicSwitch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processTopicSwitch</span><wbr><span class="parameters">(<a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;controlMessage,
 int&nbsp;partition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;offset,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="updateOffsetMetadataInOffsetRecord(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>updateOffsetMetadataInOffsetRecord</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateOffsetMetadataInOffsetRecord</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<div class="block">Sync the metadata about offset in <a href="../../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets"><code>OffsetRecord</code></a>.
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer"><code>PartitionConsumptionState</code></a> will pass through some information to <a href="../../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets"><code>OffsetRecord</code></a> for persistence and
 Offset rewind/split brain has been guarded in <a href="#updateLatestInMemoryProcessedOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,java.lang.String,boolean)"><code>updateLatestInMemoryProcessedOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState, com.linkedin.venice.pubsub.api.DefaultPubSubMessage, com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext, java.lang.String, boolean)</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="updateLatestInMemoryProcessedOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,java.lang.String,boolean)">
<h3>updateLatestInMemoryProcessedOffset</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateLatestInMemoryProcessedOffset</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecordWrapper,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 boolean&nbsp;dryRun)</span></div>
<div class="block">Maintain the latest processed offsets by drainers in memory; in most of the time, these offsets are ahead of the
 checkpoint offsets inside <a href="../../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets"><code>OffsetRecord</code></a>. Prior to update the offset in memory, the underlying storage engine
 should have persisted the given record.

 Dry-run mode will only do offset rewind check and it won't update the processed offset.</div>
</section>
</li>
<li>
<section class="detail" id="recordWriterStats(long,long,long,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>recordWriterStats</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordWriterStats</span><wbr><span class="parameters">(long&nbsp;consumerTimestampMs,
 long&nbsp;producerBrokerLatencyMs,
 long&nbsp;brokerConsumerLatencyMs,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="validateMessage(com.linkedin.davinci.validation.PartitionTracker.TopicType,com.linkedin.davinci.validation.DataIntegrityValidator,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">
<h3>validateMessage</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">validateMessage</span><wbr><span class="parameters">(<a href="../../validation/PartitionTracker.TopicType.html" title="class in com.linkedin.davinci.validation">PartitionTracker.TopicType</a>&nbsp;type,
 <a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a>&nbsp;validator,
 <a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 boolean&nbsp;tolerateMissingMessagesForRealTimeTopic)</span></div>
<div class="block">Message validation using DIV. Leaders should pass in the validator instance from <a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>LeaderFollowerStoreIngestionTask</code></a>;
 and drainers should pass in the validator instance from <a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreIngestionTask</code></a>

 1. If valid DIV errors happen after EOP is received, no fatal exceptions will be thrown.
    But the errors will be recorded into the DIV metrics.
 2. For any DIV errors happened to unregistered producers &amp;&amp; after EOP, the errors will be ignored.
 3. For any DIV errors happened to records which is after logCompactionDelayInMs, the errors will be ignored.</div>
</section>
</li>
<li>
<section class="detail" id="cloneDrainerDivProducerStates(int,com.linkedin.davinci.validation.DataIntegrityValidator)">
<h3>cloneDrainerDivProducerStates</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">cloneDrainerDivProducerStates</span><wbr><span class="parameters">(int&nbsp;partition,
 <a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a>&nbsp;validator)</span></div>
<div class="block">We should only allow <a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreIngestionTask</code></a> to access <code>drainerDiv</code>; other components
 like leaders in LeaderFollowerStoreIngestionTask should never access the DIV validator in drainer, because messages
 consumption in leader is ahead of drainer, leaders and drainers are processing messages at different paces.</div>
</section>
</li>
<li>
<section class="detail" id="putInStorageEngine(int,byte[],com.linkedin.venice.kafka.protocol.Put)">
<h3>putInStorageEngine</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">putInStorageEngine</span><wbr><span class="parameters">(int&nbsp;partition,
 byte[]&nbsp;keyBytes,
 <a href="../../../venice/kafka/protocol/Put.html" title="class in com.linkedin.venice.kafka.protocol">Put</a>&nbsp;put)</span></div>
<div class="block">Persist Put record to storage engine.</div>
</section>
</li>
<li>
<section class="detail" id="removeFromStorageEngine(int,byte[],com.linkedin.venice.kafka.protocol.Delete)">
<h3>removeFromStorageEngine</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">removeFromStorageEngine</span><wbr><span class="parameters">(int&nbsp;partition,
 byte[]&nbsp;keyBytes,
 <a href="../../../venice/kafka/protocol/Delete.html" title="class in com.linkedin.venice.kafka.protocol">Delete</a>&nbsp;delete)</span></div>
</section>
</li>
<li>
<section class="detail" id="throwOrLogStorageFailureDependingIfStillSubscribed(int,com.linkedin.venice.exceptions.VeniceException)">
<h3>throwOrLogStorageFailureDependingIfStillSubscribed</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">throwOrLogStorageFailureDependingIfStillSubscribed</span><wbr><span class="parameters">(int&nbsp;partition,
 <a href="../../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a>&nbsp;e)</span></div>
</section>
</li>
<li>
<section class="detail" id="logStorageOperationWhileUnsubscribed(int)">
<h3>logStorageOperationWhileUnsubscribed</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">logStorageOperationWhileUnsubscribed</span><wbr><span class="parameters">(int&nbsp;partition)</span></div>
</section>
</li>
<li>
<section class="detail" id="consumerHasAnySubscription()">
<h3>consumerHasAnySubscription</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">consumerHasAnySubscription</span>()</div>
</section>
</li>
<li>
<section class="detail" id="consumerHasSubscription(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>consumerHasSubscription</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">consumerHasSubscription</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;topic,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="unsubscribeFromTopic(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>unsubscribeFromTopic</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">unsubscribeFromTopic</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;topic,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<div class="block">This method unsubscribes topic-partition from the input.
 If it is real-time topic and separate RT topic is enabled, it will also unsubscribe from separate real-time topic.</div>
</section>
</li>
<li>
<section class="detail" id="consumerBatchUnsubscribe(java.util.Set)">
<h3>consumerBatchUnsubscribe</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">consumerBatchUnsubscribe</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&gt;&nbsp;topicPartitionSet)</span></div>
</section>
</li>
<li>
<section class="detail" id="consumerUnSubscribeAllTopics(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>consumerUnSubscribeAllTopics</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">consumerUnSubscribeAllTopics</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="consumerSubscribe(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.PubSubPosition,java.lang.String)">
<h3>consumerSubscribe</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">consumerSubscribe</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;pubSubTopic,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;startOffset,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaURL)</span></div>
<div class="block">This method will try to resolve actual topic-partition from input Kafka URL and subscribe to the resolved
 topic-partition.</div>
</section>
</li>
<li>
<section class="detail" id="consumerResetOffset(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>consumerResetOffset</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">consumerResetOffset</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;topic,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
</section>
</li>
<li>
<section class="detail" id="waitVersionStateAvailable(java.lang.String)">
<h3>waitVersionStateAvailable</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/kafka/protocol/state/StoreVersionState.html" title="class in com.linkedin.venice.kafka.protocol.state">StoreVersionState</a></span>&nbsp;<span class="element-name">waitVersionStateAvailable</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaTopic)</span>
                                               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()</div>
<div class="block">Stops the consumer task.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html#close()" title="class or interface in java.lang" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Closeable.html#close()" title="class or interface in java.io" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="shutdownAndWait(int)">
<h3>shutdownAndWait</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">shutdownAndWait</span><wbr><span class="parameters">(int&nbsp;waitTime)</span></div>
<div class="block">This method is a blocking call to wait for <a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer"><code>StoreIngestionTask</code></a> for fully shutdown in the given time.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>waitTime</code> - Maximum wait time for the shutdown operation.</dd>
<dt>Returns:</dt>
<dd>whether able to gracefully shut down within the waitTime</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isRunning()">
<h3>isRunning</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isRunning</span>()</div>
<div class="block">A function to allow the service to get the current status of the task.
 This would allow the service to create a new task if required.</div>
</section>
</li>
<li>
<section class="detail" id="getVersionTopic()">
<h3>getVersionTopic</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a></span>&nbsp;<span class="element-name">getVersionTopic</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isMetricsEmissionEnabled()">
<h3>isMetricsEmissionEnabled</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isMetricsEmissionEnabled</span>()</div>
</section>
</li>
<li>
<section class="detail" id="enableMetricsEmission()">
<h3>enableMetricsEmission</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">enableMetricsEmission</span>()</div>
</section>
</li>
<li>
<section class="detail" id="disableMetricsEmission()">
<h3>disableMetricsEmission</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">disableMetricsEmission</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isPartitionConsumingOrHasPendingIngestionAction(int)">
<h3>isPartitionConsumingOrHasPendingIngestionAction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isPartitionConsumingOrHasPendingIngestionAction</span><wbr><span class="parameters">(int&nbsp;userPartition)</span></div>
<div class="block">To check whether the given partition is still consuming message from Kafka</div>
</section>
</li>
<li>
<section class="detail" id="createKafkaConsumerProperties(java.util.Properties,java.lang.String,boolean)">
<h3>createKafkaConsumerProperties</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a></span>&nbsp;<span class="element-name">createKafkaConsumerProperties</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a>&nbsp;localConsumerProps,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;remoteKafkaSourceAddress,
 boolean&nbsp;consumeRemotely)</span></div>
<div class="block">Override the <a href="../../../venice/ConfigKeys.html#KAFKA_BOOTSTRAP_SERVERS"><code>ConfigKeys.KAFKA_BOOTSTRAP_SERVERS</code></a> config with a remote Kafka bootstrap url.</div>
</section>
</li>
<li>
<section class="detail" id="resubscribe(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>resubscribe</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">resubscribe</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span>
                             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="reportError(java.lang.String,int,java.lang.Exception)">
<h3>reportError</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">reportError</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;message,
 int&nbsp;userPartition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&nbsp;e)</span></div>
</section>
</li>
<li>
<section class="detail" id="isActiveActiveReplicationEnabled()">
<h3>isActiveActiveReplicationEnabled</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isActiveActiveReplicationEnabled</span>()</div>
</section>
</li>
<li>
<section class="detail" id="dumpPartitionConsumptionStates(com.linkedin.davinci.listener.response.AdminResponse,com.linkedin.venice.utils.ComplementSet)">
<h3>dumpPartitionConsumptionStates</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dumpPartitionConsumptionStates</span><wbr><span class="parameters">(<a href="../../listener/response/AdminResponse.html" title="class in com.linkedin.davinci.listener.response">AdminResponse</a>&nbsp;response,
 <a href="../../../venice/utils/ComplementSet.html" title="class in com.linkedin.venice.utils">ComplementSet</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;partitions)</span></div>
<div class="block">Invoked by admin request to dump the requested partition consumption states</div>
</section>
</li>
<li>
<section class="detail" id="dumpStoreVersionState(com.linkedin.davinci.listener.response.AdminResponse)">
<h3>dumpStoreVersionState</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dumpStoreVersionState</span><wbr><span class="parameters">(<a href="../../listener/response/AdminResponse.html" title="class in com.linkedin.davinci.listener.response">AdminResponse</a>&nbsp;response)</span></div>
<div class="block">Invoked by admin request to dump store version state metadata.</div>
</section>
</li>
<li>
<section class="detail" id="getServerConfig()">
<h3>getServerConfig</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="../../config/VeniceServerConfig.html" title="class in com.linkedin.davinci.config">VeniceServerConfig</a></span>&nbsp;<span class="element-name">getServerConfig</span>()</div>
</section>
</li>
<li>
<section class="detail" id="updateOffsetMetadataAndSync(int)">
<h3>updateOffsetMetadataAndSync</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateOffsetMetadataAndSync</span><wbr><span class="parameters">(int&nbsp;partitionId)</span></div>
</section>
</li>
<li>
<section class="detail" id="getTopicManager(java.lang.String)">
<h3>getTopicManager</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/manager/TopicManager.html" title="class in com.linkedin.venice.pubsub.manager">TopicManager</a></span>&nbsp;<span class="element-name">getTopicManager</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;sourceKafkaServer)</span></div>
<div class="block">The function returns local or remote topic manager.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sourceKafkaServer</code> - The address of source kafka bootstrap server.</dd>
<dt>Returns:</dt>
<dd>topic manager</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="waitForAllMessageToBeProcessedFromTopicPartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>waitForAllMessageToBeProcessedFromTopicPartition</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">waitForAllMessageToBeProcessedFromTopicPartition</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;topicPartition,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span>
                                                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">The purpose of this function is to wait for the complete processing (including persistence to disk) of all the messages
 those were consumed from this kafka {topic, partition} prior to calling this function.
 This will make the calling thread to block.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>topicPartition</code> - for which to wait</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="delegateConsumerRecord(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,int,java.lang.String,int,long,long)">
<h3>delegateConsumerRecord</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="StoreIngestionTask.DelegateConsumerRecordResult.html" title="enum class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask.DelegateConsumerRecordResult</a></span>&nbsp;<span class="element-name">delegateConsumerRecord</span><wbr><span class="parameters">(<a href="PubSubMessageProcessedResultWrapper.html" title="class in com.linkedin.davinci.kafka.consumer">PubSubMessageProcessedResultWrapper</a>&nbsp;consumerRecordWrapper,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId,
 long&nbsp;beforeProcessingPerRecordTimestampNs,
 long&nbsp;beforeProcessingBatchRecordsTimestampMs)</span></div>
</section>
</li>
<li>
<section class="detail" id="recordProcessedRecordStats(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,int)">
<h3>recordProcessedRecordStats</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">recordProcessedRecordStats</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 int&nbsp;processedRecordSize)</span></div>
</section>
</li>
<li>
<section class="detail" id="isTransientRecordBufferUsed(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>isTransientRecordBufferUsed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isTransientRecordBufferUsed</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<div class="block">This is not a per record state. Rather it's used to indicate if the transient record buffer is being used at all
 for this ingestion task/partition or not. The criterias are the following:

 1. For L/F mode only WC ingestion task needs this buffer.
 2. The transient record buffer is only used post-EOP.</div>
</section>
</li>
<li>
<section class="detail" id="setPartitionConsumptionState(int,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>setPartitionConsumptionState</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setPartitionConsumptionState</span><wbr><span class="parameters">(int&nbsp;partition,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs)</span></div>
</section>
</li>
<li>
<section class="detail" id="getVersionedDIVStats()">
<h3>getVersionedDIVStats</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../stats/AggVersionedDIVStats.html" title="class in com.linkedin.davinci.stats">AggVersionedDIVStats</a></span>&nbsp;<span class="element-name">getVersionedDIVStats</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getVersionIngestionStats()">
<h3>getVersionIngestionStats</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../stats/AggVersionedIngestionStats.html" title="class in com.linkedin.davinci.stats">AggVersionedIngestionStats</a></span>&nbsp;<span class="element-name">getVersionIngestionStats</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getCompressionStrategy()">
<h3>getCompressionStrategy</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/compression/CompressionStrategy.html" title="enum class in com.linkedin.venice.compression">CompressionStrategy</a></span>&nbsp;<span class="element-name">getCompressionStrategy</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getCompressor()">
<h3>getCompressor</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;<a href="../../../venice/compression/VeniceCompressor.html" title="class in com.linkedin.venice.compression">VeniceCompressor</a>&gt;</span>&nbsp;<span class="element-name">getCompressor</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isChunked()">
<h3>isChunked</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isChunked</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getSchemaRepo()">
<h3>getSchemaRepo</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/meta/ReadOnlySchemaRepository.html" title="interface in com.linkedin.venice.meta">ReadOnlySchemaRepository</a></span>&nbsp;<span class="element-name">getSchemaRepo</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getHostLevelIngestionStats()">
<h3>getHostLevelIngestionStats</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../stats/HostLevelIngestionStats.html" title="class in com.linkedin.davinci.stats">HostLevelIngestionStats</a></span>&nbsp;<span class="element-name">getHostLevelIngestionStats</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getKafkaVersionTopic()">
<h3>getKafkaVersionTopic</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getKafkaVersionTopic</span>()</div>
</section>
</li>
<li>
<section class="detail" id="extractUpstreamPosition(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)">
<h3>extractUpstreamPosition</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a></span>&nbsp;<span class="element-name">extractUpstreamPosition</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord)</span></div>
<div class="block">Extract the upstream position from the given consumer record's leader metadata.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>consumerRecord</code> - the consumer record to extract upstream position from</dd>
<dt>Returns:</dt>
<dd>the upstream position if available, otherwise PubSubSymbolicPosition.EARLIEST</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="extractUpstreamClusterId(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)">
<h3>extractUpstreamClusterId</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">extractUpstreamClusterId</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord)</span></div>
</section>
</li>
<li>
<section class="detail" id="maybeSendIngestionHeartbeat()">
<h3>maybeSendIngestionHeartbeat</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">maybeSendIngestionHeartbeat</span>()</div>
<div class="block">For L/F hybrid stores, the leader periodically writes a special SOS message to the RT topic.
 Check <a href="LeaderFollowerStoreIngestionTask.html#maybeSendIngestionHeartbeat()"><code>LeaderFollowerStoreIngestionTask.maybeSendIngestionHeartbeat()</code></a> for more details.</div>
</section>
</li>
<li>
<section class="detail" id="isProducingVersionTopicHealthy()">
<h3>isProducingVersionTopicHealthy</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isProducingVersionTopicHealthy</span>()</div>
<div class="block">This function is checking the following conditions:
 1. Whether the version topic exists or not.</div>
</section>
</li>
<li>
<section class="detail" id="isCurrentVersion()">
<h3>isCurrentVersion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isCurrentVersion</span>()</div>
</section>
</li>
<li>
<section class="detail" id="hasAllPartitionReportedCompleted()">
<h3>hasAllPartitionReportedCompleted</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasAllPartitionReportedCompleted</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isSeparatedRealtimeTopicEnabled()">
<h3>isSeparatedRealtimeTopicEnabled</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isSeparatedRealtimeTopicEnabled</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getDataIntegrityValidator()">
<h3>getDataIntegrityValidator</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../validation/DataIntegrityValidator.html" title="class in com.linkedin.davinci.validation">DataIntegrityValidator</a></span>&nbsp;<span class="element-name">getDataIntegrityValidator</span>()</div>
<div class="block">When Global RT DIV is enabled the ConsumptionTask's DIV is exclusively used to validate data integrity.</div>
</section>
</li>
<li>
<section class="detail" id="getStorageUtilizationManager()">
<h3>getStorageUtilizationManager</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="StorageUtilizationManager.html" title="class in com.linkedin.davinci.kafka.consumer">StorageUtilizationManager</a></span>&nbsp;<span class="element-name">getStorageUtilizationManager</span>()</div>
</section>
</li>
<li>
<section class="detail" id="hasReplicas()">
<h3>hasReplicas</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasReplicas</span>()</div>
<div class="block">Checks whether there are any replicas currently present on this host.
 <p>
 For batch-only stores, a replica might be removed from the PCS map but still physically
 present on the host. <code>activeReplicaCount</code> counter tracks the replica's lifecycle
 from the bootstrap stage through to the drop stage.</div>
</section>
</li>
<li>
<section class="detail" id="validateEndOfPushReceivedBeforeTopicSwitch(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.PubSubPosition)">
<h3>validateEndOfPushReceivedBeforeTopicSwitch</h3>
<div class="member-signature"><span class="modifiers">protected static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">validateEndOfPushReceivedBeforeTopicSwitch</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;position)</span></div>
<div class="block">Validates that END_OF_PUSH has been received before processing TOPIC_SWITCH.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>partitionConsumptionState</code> - The partition consumption state to validate</dd>
<dd><code>position</code> - The position/offset for error reporting</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code> - if END_OF_PUSH has not been received</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
