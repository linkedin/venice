<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ActiveActiveStoreIngestionTask (venice API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.linkedin.davinci.kafka.consumer, class: ActiveActiveStoreIngestionTask">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.linkedin.davinci.kafka.consumer</a></div>
<h1 title="Class ActiveActiveStoreIngestionTask" class="title">Class ActiveActiveStoreIngestionTask</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">com.linkedin.davinci.kafka.consumer.StoreIngestionTask</a>
<div class="inheritance"><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">com.linkedin.davinci.kafka.consumer.LeaderFollowerStoreIngestionTask</a>
<div class="inheritance">com.linkedin.davinci.kafka.consumer.ActiveActiveStoreIngestionTask</div>
</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">ActiveActiveStoreIngestionTask</span>
<span class="extends-implements">extends <a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></span></div>
<div class="block">This class contains logic that SNs must perform if a store-version is running in Active/Active mode.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-com.linkedin.davinci.kafka.consumer.StoreIngestionTask">Nested classes/interfaces inherited from class&nbsp;com.linkedin.davinci.kafka.consumer.<a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask</a></h2>
<code><a href="StoreIngestionTask.DelegateConsumerRecordResult.html" title="enum class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask.DelegateConsumerRecordResult</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-com.linkedin.davinci.kafka.consumer.LeaderFollowerStoreIngestionTask">Fields inherited from class&nbsp;com.linkedin.davinci.kafka.consumer.<a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></h3>
<code><a href="LeaderFollowerStoreIngestionTask.html#aaWCIngestionStorageLookupThreadPool">aaWCIngestionStorageLookupThreadPool</a>, <a href="LeaderFollowerStoreIngestionTask.html#GLOBAL_RT_DIV_KEY_PREFIX">GLOBAL_RT_DIV_KEY_PREFIX</a>, <a href="LeaderFollowerStoreIngestionTask.html#globalRtDivKeyBytesCache">globalRtDivKeyBytesCache</a>, <a href="LeaderFollowerStoreIngestionTask.html#globalRtDivStateSerializer">globalRtDivStateSerializer</a>, <a href="LeaderFollowerStoreIngestionTask.html#hasChangeCaptureView">hasChangeCaptureView</a>, <a href="LeaderFollowerStoreIngestionTask.html#hasComplexVenicePartitionerMaterializedView">hasComplexVenicePartitionerMaterializedView</a>, <a href="LeaderFollowerStoreIngestionTask.html#kafkaClusterIdToUrlMap">kafkaClusterIdToUrlMap</a>, <a href="LeaderFollowerStoreIngestionTask.html#storeDeserializerCache">storeDeserializerCache</a>, <a href="LeaderFollowerStoreIngestionTask.html#veniceWriter">veniceWriter</a>, <a href="LeaderFollowerStoreIngestionTask.html#veniceWriterForRealTime">veniceWriterForRealTime</a>, <a href="LeaderFollowerStoreIngestionTask.html#viewWriters">viewWriters</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-com.linkedin.davinci.kafka.consumer.StoreIngestionTask">Fields inherited from class&nbsp;com.linkedin.davinci.kafka.consumer.<a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask</a></h3>
<code><a href="StoreIngestionTask.html#aggKafkaConsumerService">aggKafkaConsumerService</a>, <a href="StoreIngestionTask.html#availableSchemaIds">availableSchemaIds</a>, <a href="StoreIngestionTask.html#batchReportIncPushStatusEnabled">batchReportIncPushStatusEnabled</a>, <a href="StoreIngestionTask.html#bootstrapTimeoutInMs">bootstrapTimeoutInMs</a>, <a href="StoreIngestionTask.html#CHUNK_SCHEMA_ID">CHUNK_SCHEMA_ID</a>, <a href="StoreIngestionTask.html#chunkAssembler">chunkAssembler</a>, <a href="StoreIngestionTask.html#compressionStrategy">compressionStrategy</a>, <a href="StoreIngestionTask.html#compressor">compressor</a>, <a href="StoreIngestionTask.html#compressorFactory">compressorFactory</a>, <a href="StoreIngestionTask.html#consumedBytesSinceLastSync">consumedBytesSinceLastSync</a>, <a href="StoreIngestionTask.html#consumerActionSequenceNumber">consumerActionSequenceNumber</a>, <a href="StoreIngestionTask.html#consumerActionsQueue">consumerActionsQueue</a>, <a href="StoreIngestionTask.html#consumerDiv">consumerDiv</a>, <a href="StoreIngestionTask.html#databaseSyncBytesIntervalForDeferredWriteMode">databaseSyncBytesIntervalForDeferredWriteMode</a>, <a href="StoreIngestionTask.html#databaseSyncBytesIntervalForTransactionalMode">databaseSyncBytesIntervalForTransactionalMode</a>, <a href="StoreIngestionTask.html#dataRecoverySourceVersionNumber">dataRecoverySourceVersionNumber</a>, <a href="StoreIngestionTask.html#defaultReadyToServeChecker">defaultReadyToServeChecker</a>, <a href="StoreIngestionTask.html#deserializedSchemaIds">deserializedSchemaIds</a>, <a href="StoreIngestionTask.html#diskUsage">diskUsage</a>, <a href="StoreIngestionTask.html#divErrorMetricCallback">divErrorMetricCallback</a>, <a href="StoreIngestionTask.html#emitMetrics">emitMetrics</a>, <a href="StoreIngestionTask.html#emptyPollSleepMs">emptyPollSleepMs</a>, <a href="StoreIngestionTask.html#errorPartitionId">errorPartitionId</a>, <a href="StoreIngestionTask.html#gracefulShutdownLatch">gracefulShutdownLatch</a>, <a href="StoreIngestionTask.html#hostLevelIngestionStats">hostLevelIngestionStats</a>, <a href="StoreIngestionTask.html#hostName">hostName</a>, <a href="StoreIngestionTask.html#hybridStoreConfig">hybridStoreConfig</a>, <a href="StoreIngestionTask.html#idleCounter">idleCounter</a>, <a href="StoreIngestionTask.html#ingestionNotificationDispatcher">ingestionNotificationDispatcher</a>, <a href="StoreIngestionTask.html#ingestionTaskName">ingestionTaskName</a>, <a href="StoreIngestionTask.html#isChunked">isChunked</a>, <a href="StoreIngestionTask.html#isCurrentVersion">isCurrentVersion</a>, <a href="StoreIngestionTask.html#isDataRecovery">isDataRecovery</a>, <a href="StoreIngestionTask.html#isDaVinciClient">isDaVinciClient</a>, <a href="StoreIngestionTask.html#isGlobalRtDivEnabled">isGlobalRtDivEnabled</a>, <a href="StoreIngestionTask.html#isIsolatedIngestion">isIsolatedIngestion</a>, <a href="StoreIngestionTask.html#isRmdChunked">isRmdChunked</a>, <a href="StoreIngestionTask.html#isRunning">isRunning</a>, <a href="StoreIngestionTask.html#isSystemStore">isSystemStore</a>, <a href="StoreIngestionTask.html#isWriteComputationEnabled">isWriteComputationEnabled</a>, <a href="StoreIngestionTask.html#kafkaClusterUrlResolver">kafkaClusterUrlResolver</a>, <a href="StoreIngestionTask.html#kafkaProps">kafkaProps</a>, <a href="StoreIngestionTask.html#kafkaVersionTopic">kafkaVersionTopic</a>, <a href="StoreIngestionTask.html#KILL_WAIT_TIME_MS">KILL_WAIT_TIME_MS</a>, <a href="StoreIngestionTask.html#localKafkaClusterId">localKafkaClusterId</a>, <a href="StoreIngestionTask.html#localKafkaServer">localKafkaServer</a>, <a href="StoreIngestionTask.html#localKafkaServerSingletonSet">localKafkaServerSingletonSet</a>, <a href="StoreIngestionTask.html#manifestSerializer">manifestSerializer</a>, <a href="StoreIngestionTask.html#metaStoreWriter">metaStoreWriter</a>, <a href="StoreIngestionTask.html#parallelProcessingThreadPool">parallelProcessingThreadPool</a>, <a href="StoreIngestionTask.html#partitionConsumptionStateMap">partitionConsumptionStateMap</a>, <a href="StoreIngestionTask.html#partitionCount">partitionCount</a>, <a href="StoreIngestionTask.html#partitionToPendingConsumerActionCountMap">partitionToPendingConsumerActionCountMap</a>, <a href="StoreIngestionTask.html#pubSubContext">pubSubContext</a>, <a href="StoreIngestionTask.html#pubSubTopicRepository">pubSubTopicRepository</a>, <a href="StoreIngestionTask.html#readCycleDelayMs">readCycleDelayMs</a>, <a href="StoreIngestionTask.html#readOnlyForBatchOnlyStoreEnabled">readOnlyForBatchOnlyStoreEnabled</a>, <a href="StoreIngestionTask.html#realTimeTopic">realTimeTopic</a>, <a href="StoreIngestionTask.html#recordLevelMetricEnabled">recordLevelMetricEnabled</a>, <a href="StoreIngestionTask.html#recordTransformerStats">recordTransformerStats</a>, <a href="StoreIngestionTask.html#REDUNDANT_LOGGING_FILTER">REDUNDANT_LOGGING_FILTER</a>, <a href="StoreIngestionTask.html#resetErrorReplicaEnabled">resetErrorReplicaEnabled</a>, <a href="StoreIngestionTask.html#SCHEMA_POLLING_DELAY_MS">SCHEMA_POLLING_DELAY_MS</a>, <a href="StoreIngestionTask.html#schemaRepository">schemaRepository</a>, <a href="StoreIngestionTask.html#separateRealTimeTopic">separateRealTimeTopic</a>, <a href="StoreIngestionTask.html#serverConfig">serverConfig</a>, <a href="StoreIngestionTask.html#storageEngine">storageEngine</a>, <a href="StoreIngestionTask.html#storageMetadataService">storageMetadataService</a>, <a href="StoreIngestionTask.html#storageService">storageService</a>, <a href="StoreIngestionTask.html#STORE_VERSION_POLLING_DELAY_MS">STORE_VERSION_POLLING_DELAY_MS</a>, <a href="StoreIngestionTask.html#storeBufferService">storeBufferService</a>, <a href="StoreIngestionTask.html#storeName">storeName</a>, <a href="StoreIngestionTask.html#storeRepository">storeRepository</a>, <a href="StoreIngestionTask.html#storeVersionName">storeVersionName</a>, <a href="StoreIngestionTask.html#storeVersionPartitionCount">storeVersionPartitionCount</a>, <a href="StoreIngestionTask.html#topicManagerRepository">topicManagerRepository</a>, <a href="StoreIngestionTask.html#versionedDIVStats">versionedDIVStats</a>, <a href="StoreIngestionTask.html#versionedIngestionStats">versionedIngestionStats</a>, <a href="StoreIngestionTask.html#versionNumber">versionNumber</a>, <a href="StoreIngestionTask.html#versionRole">versionRole</a>, <a href="StoreIngestionTask.html#versionTopic">versionTopic</a>, <a href="StoreIngestionTask.html#WAITING_TIME_FOR_LAST_RECORD_TO_BE_PROCESSED">WAITING_TIME_FOR_LAST_RECORD_TO_BE_PROCESSED</a>, <a href="StoreIngestionTask.html#workloadType">workloadType</a>, <a href="StoreIngestionTask.html#writeComputeFailureCode">writeComputeFailureCode</a>, <a href="StoreIngestionTask.html#zkHelixAdmin">zkHelixAdmin</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(com.linkedin.davinci.storage.StorageService,com.linkedin.davinci.kafka.consumer.StoreIngestionTaskFactory.Builder,com.linkedin.venice.meta.Store,com.linkedin.venice.meta.Version,java.util.Properties,java.util.function.BooleanSupplier,com.linkedin.davinci.config.VeniceStoreVersionConfig,int,boolean,java.util.Optional,com.linkedin.davinci.client.InternalDaVinciRecordTransformerConfig,com.linkedin.venice.utils.lazy.Lazy)" class="member-name-link">ActiveActiveStoreIngestionTask</a><wbr>(<a href="../../storage/StorageService.html" title="class in com.linkedin.davinci.storage">StorageService</a>&nbsp;storageService,
 <a href="StoreIngestionTaskFactory.Builder.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTaskFactory.Builder</a>&nbsp;builder,
 <a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store,
 <a href="../../../venice/meta/Version.html" title="interface in com.linkedin.venice.meta">Version</a>&nbsp;version,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a>&nbsp;kafkaConsumerProperties,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BooleanSupplier.html" title="class or interface in java.util.function" class="external-link">BooleanSupplier</a>&nbsp;isCurrentVersion,
 <a href="../../config/VeniceStoreVersionConfig.html" title="class in com.linkedin.davinci.config">VeniceStoreVersionConfig</a>&nbsp;storeConfig,
 int&nbsp;errorPartitionId,
 boolean&nbsp;isIsolatedIngestion,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../store/cache/backend/ObjectCacheBackend.html" title="class in com.linkedin.davinci.store.cache.backend">ObjectCacheBackend</a>&gt;&nbsp;cacheBackend,
 <a href="../../client/InternalDaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client">InternalDaVinciRecordTransformerConfig</a>&nbsp;internalRecordTransformerConfig,
 <a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.helix.manager.zk.ZKHelixAdmin&gt;&nbsp;zkHelixAdmin)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#calculateRtConsumptionStartPositions(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.PubSubTopic,java.util.List)" class="member-name-link">calculateRtConsumptionStartPositions</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 <a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;newSourceTopic,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>&gt;&nbsp;unreachableBrokerList)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Calculates real-time start positions for each PubSub broker during a topic switch in Active-Active replication.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#consumerSubscribe(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.venice.pubsub.api.PubSubPosition,java.lang.String)" class="member-name-link">consumerSubscribe</a><wbr>(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;pubSubTopicPartition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;startPosition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubAddress)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Ensures the PubSub URL is present in the PubSub cluster URL-to-ID map before subscribing to a topic.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="LeaderProducerCallback.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducerCallback</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createProducerCallback(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long)" class="member-name-link">createProducerCallback</a><wbr>(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 long&nbsp;beforeProcessingRecordTimestampNs)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="StoreIngestionTask.DelegateConsumerRecordResult.html" title="enum class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask.DelegateConsumerRecordResult</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#delegateConsumerRecord(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,int,java.lang.String,int,long,long)" class="member-name-link">delegateConsumerRecord</a><wbr>(<a href="PubSubMessageProcessedResultWrapper.html" title="class in com.linkedin.davinci.kafka.consumer">PubSubMessageProcessedResultWrapper</a>&nbsp;consumerRecordWrapper,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId,
 long&nbsp;beforeProcessingPerRecordTimestampNs,
 long&nbsp;beforeProcessingBatchRecordsTimestampMs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The goal of this function is to possibly produce the incoming kafka message consumed from local VT, remote VT, RT or SR topic to
 local VT if needed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="IngestionBatchProcessor.html" title="class in com.linkedin.davinci.kafka.consumer">IngestionBatchProcessor</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getIngestionBatchProcessor()" class="member-name-link">getIngestionBatchProcessor</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLatestConsumedUpstreamPositionForHybridOffsetLagMeasurement(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String)" class="member-name-link">getLatestConsumedUpstreamPositionForHybridOffsetLagMeasurement</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;upstreamKafkaUrl)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Different from the persisted upstream offset map in OffsetRecord, latest consumed upstream offset map is maintained
 for each individual Kafka url.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLatestPersistedRtPositionForLagMeasurement(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String)" class="member-name-link">getLatestPersistedRtPositionForLagMeasurement</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;upstreamKafkaUrl)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the latest processed upstream real-time offset for the given region.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="../../../venice/writer/ChunkAwareCallback.html" title="interface in com.linkedin.venice.writer">ChunkAwareCallback</a>,<wbr><a href="../../../venice/writer/LeaderMetadataWrapper.html" title="class in com.linkedin.venice.writer">LeaderMetadataWrapper</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getProduceToTopicFunction(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,byte%5B%5D,java.nio.ByteBuffer,java.nio.ByteBuffer,com.linkedin.venice.storage.protocol.ChunkedValueManifest,com.linkedin.venice.storage.protocol.ChunkedValueManifest,int,boolean)" class="member-name-link">getProduceToTopicFunction</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 byte[]&nbsp;key,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;updatedValueBytes,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;updatedRmdBytes,
 <a href="../../../venice/storage/protocol/ChunkedValueManifest.html" title="class in com.linkedin.venice.storage.protocol">ChunkedValueManifest</a>&nbsp;oldValueManifest,
 <a href="../../../venice/storage/protocol/ChunkedValueManifest.html" title="class in com.linkedin.venice.storage.protocol">ChunkedValueManifest</a>&nbsp;oldRmdManifest,
 int&nbsp;valueSchemaId,
 boolean&nbsp;resultReuseInput)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../replication/merge/RmdSerDe.html" title="class in com.linkedin.davinci.replication.merge">RmdSerDe</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRmdSerDe()" class="member-name-link">getRmdSerDe</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isRealTimeBufferReplayStarted(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">isRealTimeBufferReplayStarted</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isTransientRecordBufferUsed(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">isTransientRecordBufferUsed</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For Active-Active this buffer is always used, as long as we're post-EOP.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#leaderExecuteTopicSwitch(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.kafka.protocol.TopicSwitch,com.linkedin.venice.pubsub.api.PubSubTopic)" class="member-name-link">leaderExecuteTopicSwitch</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/kafka/protocol/TopicSwitch.html" title="class in com.linkedin.venice.kafka.protocol">TopicSwitch</a>&nbsp;topicSwitch,
 <a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;newSourceTopic)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#measureRtLagForMultiRegions(java.util.Set,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)" class="member-name-link">measureRtLagForMultiRegions</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;sourceRealTimeTopicKafkaURLs,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 boolean&nbsp;shouldLogLag)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For stores in active/active mode, if no fabric is unreachable, return the maximum lag of all fabrics.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processMessageAndMaybeProduceToKafka(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,int,java.lang.String,int,long,long)" class="member-name-link">processMessageAndMaybeProduceToKafka</a><wbr>(<a href="PubSubMessageProcessedResultWrapper.html" title="class in com.linkedin.davinci.kafka.consumer">PubSubMessageProcessedResultWrapper</a>&nbsp;consumerRecordWrapper,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId,
 long&nbsp;beforeProcessingRecordTimestampNs,
 long&nbsp;beforeProcessingBatchRecordsTimestampMs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processTopicSwitch(com.linkedin.venice.kafka.protocol.ControlMessage,int,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">processTopicSwitch</a><wbr>(<a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;controlMessage,
 int&nbsp;partition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;position,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Process <a href="../../../venice/kafka/protocol/TopicSwitch.html" title="class in com.linkedin.venice.kafka.protocol"><code>TopicSwitch</code></a> control message at given partition position for a specific <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer"><code>PartitionConsumptionState</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#putInStorageEngine(int,byte%5B%5D,com.linkedin.venice.kafka.protocol.Put)" class="member-name-link">putInStorageEngine</a><wbr>(int&nbsp;partition,
 byte[]&nbsp;keyBytes,
 <a href="../../../venice/kafka/protocol/Put.html" title="class in com.linkedin.venice.kafka.protocol">Put</a>&nbsp;put)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Persist Put record to storage engine.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeFromStorageEngine(int,byte%5B%5D,com.linkedin.venice.kafka.protocol.Delete)" class="member-name-link">removeFromStorageEngine</a><wbr>(int&nbsp;partition,
 byte[]&nbsp;keyBytes,
 <a href="../../../venice/kafka/protocol/Delete.html" title="class in com.linkedin.venice.kafka.protocol">Delete</a>&nbsp;delete)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startConsumingAsLeader(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)" class="member-name-link">startConsumingAsLeader</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateLatestConsumedRtPositions(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String,com.linkedin.venice.pubsub.api.PubSubPosition)" class="member-name-link">updateLatestConsumedRtPositions</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubBrokerAddress,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;pubSubPosition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateLatestInMemoryProcessedOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,java.lang.String,boolean)" class="member-name-link">updateLatestInMemoryProcessedOffset</a><wbr>(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 boolean&nbsp;dryRun)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Maintain the latest processed offsets by drainers in memory; in most of the time, these offsets are ahead of the
 checkpoint offsets inside <a href="../../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets"><code>OffsetRecord</code></a>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-com.linkedin.davinci.kafka.consumer.LeaderFollowerStoreIngestionTask">Methods inherited from class&nbsp;com.linkedin.davinci.kafka.consumer.<a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></h3>
<code><a href="LeaderFollowerStoreIngestionTask.html#addPartitionConsumptionState(java.lang.Integer,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">addPartitionConsumptionState</a>, <a href="LeaderFollowerStoreIngestionTask.html#calculateAssembledRecordSizeRatio(long)">calculateAssembledRecordSizeRatio</a>, <a href="LeaderFollowerStoreIngestionTask.html#checkAndHandleUpstreamOffsetRewind(com.linkedin.venice.pubsub.manager.TopicManager,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.LeaderFollowerStoreIngestionTask)">checkAndHandleUpstreamOffsetRewind</a>, <a href="LeaderFollowerStoreIngestionTask.html#checkAndLogIfLagIsAcceptableForHybridStore(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,long,long,boolean,com.linkedin.davinci.ingestion.LagType)">checkAndLogIfLagIsAcceptableForHybridStore</a>, <a href="LeaderFollowerStoreIngestionTask.html#checkLongRunningTaskState()">checkLongRunningTaskState</a>, <a href="LeaderFollowerStoreIngestionTask.html#checkWhetherToCloseUnusedVeniceWriter(com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.utils.lazy.Lazy,java.util.Map,java.lang.Runnable,java.lang.String)">checkWhetherToCloseUnusedVeniceWriter</a>, <a href="LeaderFollowerStoreIngestionTask.html#closeVeniceViewWriters(boolean)">closeVeniceViewWriters</a>, <a href="LeaderFollowerStoreIngestionTask.html#closeVeniceWriters(boolean)">closeVeniceWriters</a>, <a href="LeaderFollowerStoreIngestionTask.html#constructVeniceWriter(com.linkedin.venice.writer.VeniceWriterFactory,java.lang.String,com.linkedin.venice.meta.Version,boolean,int)">constructVeniceWriter</a>, <a href="LeaderFollowerStoreIngestionTask.html#consumerUnSubscribeAllTopics(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">consumerUnSubscribeAllTopics</a>, <a href="LeaderFollowerStoreIngestionTask.html#demoteToStandby(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.helix.LeaderFollowerPartitionStateModel.LeaderSessionIdChecker)">demoteToStandby</a>, <a href="LeaderFollowerStoreIngestionTask.html#getAndUpdateLeaderCompletedState(com.linkedin.venice.message.KafkaKey,com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope,com.linkedin.venice.kafka.protocol.ControlMessage,com.linkedin.venice.pubsub.api.PubSubMessageHeaders,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">getAndUpdateLeaderCompletedState</a>, <a href="LeaderFollowerStoreIngestionTask.html#getConsumptionSourceKafkaAddress(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">getConsumptionSourceKafkaAddress</a>, <a href="LeaderFollowerStoreIngestionTask.html#getDataRecoverySourcePubSub(com.linkedin.venice.meta.Version)">getDataRecoverySourcePubSub</a>, <a href="LeaderFollowerStoreIngestionTask.html#getGlobalRtDivKeyBytes(java.lang.String)">getGlobalRtDivKeyBytes</a>, <a href="LeaderFollowerStoreIngestionTask.html#getGlobalRtDivKeyName(java.lang.String)">getGlobalRtDivKeyName</a>, <a href="LeaderFollowerStoreIngestionTask.html#getMaxNearlineRecordSizeBytes()">getMaxNearlineRecordSizeBytes</a>, <a href="LeaderFollowerStoreIngestionTask.html#getMaxRecordSizeBytes()">getMaxRecordSizeBytes</a>, <a href="LeaderFollowerStoreIngestionTask.html#getRealTimeDataSourceKafkaAddress(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">getRealTimeDataSourceKafkaAddress</a>, <a href="LeaderFollowerStoreIngestionTask.html#getRewindStartPositionForRealTimeTopic(java.lang.CharSequence,com.linkedin.venice.pubsub.api.PubSubTopicPartition,long)">getRewindStartPositionForRealTimeTopic</a>, <a href="LeaderFollowerStoreIngestionTask.html#getVeniceWriter(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">getVeniceWriter</a>, <a href="LeaderFollowerStoreIngestionTask.html#getWriteComputeErrorCode()">getWriteComputeErrorCode</a>, <a href="LeaderFollowerStoreIngestionTask.html#hasViewWriters()">hasViewWriters</a>, <a href="LeaderFollowerStoreIngestionTask.html#isHybridFollower(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">isHybridFollower</a>, <a href="LeaderFollowerStoreIngestionTask.html#isLeader(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">isLeader</a>, <a href="LeaderFollowerStoreIngestionTask.html#maybeCompressData(int,java.nio.ByteBuffer,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">maybeCompressData</a>, <a href="LeaderFollowerStoreIngestionTask.html#maybeSendIngestionHeartbeat()">maybeSendIngestionHeartbeat</a>, <a href="LeaderFollowerStoreIngestionTask.html#measureHybridHeartbeatLag(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">measureHybridHeartbeatLag</a>, <a href="LeaderFollowerStoreIngestionTask.html#measureHybridHeartbeatTimestamp(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">measureHybridHeartbeatTimestamp</a>, <a href="LeaderFollowerStoreIngestionTask.html#measureHybridOffsetLag(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">measureHybridOffsetLag</a>, <a href="LeaderFollowerStoreIngestionTask.html#measureRtLagForSingleRegion(java.lang.String,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">measureRtLagForSingleRegion</a>, <a href="LeaderFollowerStoreIngestionTask.html#processConsumerAction(com.linkedin.davinci.kafka.consumer.ConsumerAction,com.linkedin.venice.meta.Store)">processConsumerAction</a>, <a href="LeaderFollowerStoreIngestionTask.html#processControlMessageForViews(com.linkedin.venice.message.KafkaKey,com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope,com.linkedin.venice.kafka.protocol.ControlMessage,int,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">processControlMessageForViews</a>, <a href="LeaderFollowerStoreIngestionTask.html#produceToLocalKafka(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,java.util.function.BiConsumer,int,java.lang.String,int,long)">produceToLocalKafka</a>, <a href="LeaderFollowerStoreIngestionTask.html#promoteToLeader(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.helix.LeaderFollowerPartitionStateModel.LeaderSessionIdChecker)">promoteToLeader</a>, <a href="LeaderFollowerStoreIngestionTask.html#queueUpVersionTopicWritesWithViewWriters(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.util.function.BiFunction,java.util.Map,java.lang.Runnable)">queueUpVersionTopicWritesWithViewWriters</a>, <a href="LeaderFollowerStoreIngestionTask.html#recordAssembledRecordSizeRatio(double,long)">recordAssembledRecordSizeRatio</a>, <a href="LeaderFollowerStoreIngestionTask.html#recordHeartbeatReceived(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,java.lang.String)">recordHeartbeatReceived</a>, <a href="LeaderFollowerStoreIngestionTask.html#recordProcessedRecordStats(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,int)">recordProcessedRecordStats</a>, <a href="LeaderFollowerStoreIngestionTask.html#recordWriterStats(long,long,long,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">recordWriterStats</a>, <a href="LeaderFollowerStoreIngestionTask.html#refreshIngestionContextIfChanged(com.linkedin.venice.meta.Store)">refreshIngestionContextIfChanged</a>, <a href="LeaderFollowerStoreIngestionTask.html#reportIfCatchUpVersionTopicOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">reportIfCatchUpVersionTopicOffset</a>, <a href="LeaderFollowerStoreIngestionTask.html#resubscribe(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">resubscribe</a>, <a href="LeaderFollowerStoreIngestionTask.html#resubscribeAsFollower(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">resubscribeAsFollower</a>, <a href="LeaderFollowerStoreIngestionTask.html#resubscribeAsLeader(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">resubscribeAsLeader</a>, <a href="LeaderFollowerStoreIngestionTask.html#setNativeReplicationSourceVersionTopicKafkaURL(java.lang.String)">setNativeReplicationSourceVersionTopicKafkaURL</a>, <a href="LeaderFollowerStoreIngestionTask.html#shouldCompressData(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">shouldCompressData</a>, <a href="LeaderFollowerStoreIngestionTask.html#shouldNewLeaderSwitchToRemoteConsumption(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">shouldNewLeaderSwitchToRemoteConsumption</a>, <a href="LeaderFollowerStoreIngestionTask.html#shouldPersistRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">shouldPersistRecord</a>, <a href="LeaderFollowerStoreIngestionTask.html#shouldProcessRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)">shouldProcessRecord</a>, <a href="LeaderFollowerStoreIngestionTask.html#shouldProduceToVersionTopic(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">shouldProduceToVersionTopic</a>, <a href="LeaderFollowerStoreIngestionTask.html#syncConsumedUpstreamRTOffsetMapIfNeeded(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.util.Map)">syncConsumedUpstreamRTOffsetMapIfNeeded</a>, <a href="LeaderFollowerStoreIngestionTask.html#syncTopicSwitchToIngestionMetadataService(com.linkedin.venice.kafka.protocol.TopicSwitch,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">syncTopicSwitchToIngestionMetadataService</a>, <a href="LeaderFollowerStoreIngestionTask.html#updateLeaderTopicOnFollower(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">updateLeaderTopicOnFollower</a>, <a href="LeaderFollowerStoreIngestionTask.html#updateOffsetMetadataInOffsetRecord(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">updateOffsetMetadataInOffsetRecord</a>, <a href="LeaderFollowerStoreIngestionTask.html#updateOffsetsFromConsumerRecord(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,com.linkedin.davinci.kafka.consumer.LeaderFollowerStoreIngestionTask.UpdateVersionTopicOffset,com.linkedin.davinci.kafka.consumer.LeaderFollowerStoreIngestionTask.UpdateUpstreamTopicOffset,com.linkedin.davinci.kafka.consumer.LeaderFollowerStoreIngestionTask.GetLastKnownUpstreamTopicOffset,java.util.function.Supplier,boolean)">updateOffsetsFromConsumerRecord</a>, <a href="LeaderFollowerStoreIngestionTask.html#validateAndFilterOutDuplicateMessagesFromLeaderTopic(java.lang.Iterable,java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition)">validateAndFilterOutDuplicateMessagesFromLeaderTopic</a>, <a href="LeaderFollowerStoreIngestionTask.html#waitForAllMessageToBeProcessedFromTopicPartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">waitForAllMessageToBeProcessedFromTopicPartition</a>, <a href="LeaderFollowerStoreIngestionTask.html#waitForLastLeaderPersistFuture(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String)">waitForLastLeaderPersistFuture</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-com.linkedin.davinci.kafka.consumer.StoreIngestionTask">Methods inherited from class&nbsp;com.linkedin.davinci.kafka.consumer.<a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask</a></h3>
<code><a href="StoreIngestionTask.html#checkIngestionProgress(com.linkedin.venice.meta.Store)">checkIngestionProgress</a>, <a href="StoreIngestionTask.html#cloneDrainerDivProducerStates(int,com.linkedin.davinci.validation.DataIntegrityValidator)">cloneDrainerDivProducerStates</a>, <a href="StoreIngestionTask.html#close()">close</a>, <a href="StoreIngestionTask.html#consumerBatchUnsubscribe(java.util.Set)">consumerBatchUnsubscribe</a>, <a href="StoreIngestionTask.html#consumerHasAnySubscription()">consumerHasAnySubscription</a>, <a href="StoreIngestionTask.html#consumerHasSubscription(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">consumerHasSubscription</a>, <a href="StoreIngestionTask.html#consumerResetOffset(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">consumerResetOffset</a>, <a href="StoreIngestionTask.html#consumerSubscribe(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.PubSubPosition,java.lang.String)">consumerSubscribe</a>, <a href="StoreIngestionTask.html#createKafkaConsumerProperties(java.util.Properties,java.lang.String,boolean)">createKafkaConsumerProperties</a>, <a href="StoreIngestionTask.html#disableMetricsEmission()">disableMetricsEmission</a>, <a href="StoreIngestionTask.html#dropStoragePartitionGracefully(com.linkedin.venice.pubsub.api.PubSubTopicPartition)">dropStoragePartitionGracefully</a>, <a href="StoreIngestionTask.html#dumpPartitionConsumptionStates(com.linkedin.davinci.listener.response.AdminResponse,com.linkedin.venice.utils.ComplementSet)">dumpPartitionConsumptionStates</a>, <a href="StoreIngestionTask.html#dumpStoreVersionState(com.linkedin.davinci.listener.response.AdminResponse)">dumpStoreVersionState</a>, <a href="StoreIngestionTask.html#enableMetricsEmission()">enableMetricsEmission</a>, <a href="StoreIngestionTask.html#extractUpstreamClusterId(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)">extractUpstreamClusterId</a>, <a href="StoreIngestionTask.html#extractUpstreamPosition(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)">extractUpstreamPosition</a>, <a href="StoreIngestionTask.html#getCompressionStrategy()">getCompressionStrategy</a>, <a href="StoreIngestionTask.html#getCompressor()">getCompressor</a>, <a href="StoreIngestionTask.html#getDataIntegrityValidator()">getDataIntegrityValidator</a>, <a href="StoreIngestionTask.html#getFailedIngestionPartitionCount()">getFailedIngestionPartitionCount</a>, <a href="StoreIngestionTask.html#getHostLevelIngestionStats()">getHostLevelIngestionStats</a>, <a href="StoreIngestionTask.html#getIngestionTaskName()">getIngestionTaskName</a>, <a href="StoreIngestionTask.html#getKafkaVersionTopic()">getKafkaVersionTopic</a>, <a href="StoreIngestionTask.html#getOffsetToOnlineLagThresholdPerPartition(java.util.Optional,java.lang.String,int)">getOffsetToOnlineLagThresholdPerPartition</a>, <a href="StoreIngestionTask.html#getPartitionConsumptionState(int)">getPartitionConsumptionState</a>, <a href="StoreIngestionTask.html#getSchemaRepo()">getSchemaRepo</a>, <a href="StoreIngestionTask.html#getServerConfig()">getServerConfig</a>, <a href="StoreIngestionTask.html#getStorageEngine()">getStorageEngine</a>, <a href="StoreIngestionTask.html#getStoragePartitionConfig(boolean,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">getStoragePartitionConfig</a>, <a href="StoreIngestionTask.html#getStoragePartitionConfig(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">getStoragePartitionConfig</a>, <a href="StoreIngestionTask.html#getStorageUtilizationManager()">getStorageUtilizationManager</a>, <a href="StoreIngestionTask.html#getStoreName()">getStoreName</a>, <a href="StoreIngestionTask.html#getTopicManager(java.lang.String)">getTopicManager</a>, <a href="StoreIngestionTask.html#getTopicPartitionEndPosition(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition)">getTopicPartitionEndPosition</a>, <a href="StoreIngestionTask.html#getVersionedDIVStats()">getVersionedDIVStats</a>, <a href="StoreIngestionTask.html#getVersionIngestionStats()">getVersionIngestionStats</a>, <a href="StoreIngestionTask.html#getVersionNumber()">getVersionNumber</a>, <a href="StoreIngestionTask.html#getVersionTopic()">getVersionTopic</a>, <a href="StoreIngestionTask.html#hasAllPartitionReportedCompleted()">hasAllPartitionReportedCompleted</a>, <a href="StoreIngestionTask.html#hasAnyPartitionConsumptionState(java.util.function.Predicate)">hasAnyPartitionConsumptionState</a>, <a href="StoreIngestionTask.html#hasAnyPendingSubscription()">hasAnyPendingSubscription</a>, <a href="StoreIngestionTask.html#hasAnySubscription()">hasAnySubscription</a>, <a href="StoreIngestionTask.html#hasPendingPartitionIngestionAction(int)">hasPendingPartitionIngestionAction</a>, <a href="StoreIngestionTask.html#hasReplicas()">hasReplicas</a>, <a href="StoreIngestionTask.html#isActiveActiveReplicationEnabled()">isActiveActiveReplicationEnabled</a>, <a href="StoreIngestionTask.html#isChunked()">isChunked</a>, <a href="StoreIngestionTask.html#isCurrentVersion()">isCurrentVersion</a>, <a href="StoreIngestionTask.html#isHybridMode()">isHybridMode</a>, <a href="StoreIngestionTask.html#isIdleOverThreshold()">isIdleOverThreshold</a>, <a href="StoreIngestionTask.html#isIngestionTaskActive()">isIngestionTaskActive</a>, <a href="StoreIngestionTask.html#isMetricsEmissionEnabled()">isMetricsEmissionEnabled</a>, <a href="StoreIngestionTask.html#isPartitionConsumingOrHasPendingIngestionAction(int)">isPartitionConsumingOrHasPendingIngestionAction</a>, <a href="StoreIngestionTask.html#isProducingVersionTopicHealthy()">isProducingVersionTopicHealthy</a>, <a href="StoreIngestionTask.html#isReadyToServe(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">isReadyToServe</a>, <a href="StoreIngestionTask.html#isRunning()">isRunning</a>, <a href="StoreIngestionTask.html#isSeparatedRealtimeTopicEnabled()">isSeparatedRealtimeTopicEnabled</a>, <a href="StoreIngestionTask.html#isUserSystemStore()">isUserSystemStore</a>, <a href="StoreIngestionTask.html#kill()">kill</a>, <a href="StoreIngestionTask.html#logStorageOperationWhileUnsubscribed(int)">logStorageOperationWhileUnsubscribed</a>, <a href="StoreIngestionTask.html#measureLagWithCallToPubSub(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.venice.pubsub.api.PubSubPosition)">measureLagWithCallToPubSub</a>, <a href="StoreIngestionTask.html#measureLagWithCallToPubSub(java.lang.String,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.venice.pubsub.api.PubSubPosition,java.util.function.Function)">measureLagWithCallToPubSub</a>, <a href="StoreIngestionTask.html#minZeroLag(long)">minZeroLag</a>, <a href="StoreIngestionTask.html#nextSeqNum()">nextSeqNum</a>, <a href="StoreIngestionTask.html#processCommonConsumerAction(com.linkedin.davinci.kafka.consumer.ConsumerAction)">processCommonConsumerAction</a>, <a href="StoreIngestionTask.html#processConsumerRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long)">processConsumerRecord</a>, <a href="StoreIngestionTask.html#processEndOfIncrementalPush(com.linkedin.venice.kafka.protocol.ControlMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">processEndOfIncrementalPush</a>, <a href="StoreIngestionTask.html#processEndOfPush(com.linkedin.venice.kafka.protocol.KafkaMessageEnvelope,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">processEndOfPush</a>, <a href="StoreIngestionTask.html#processStartOfIncrementalPush(com.linkedin.venice.kafka.protocol.ControlMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">processStartOfIncrementalPush</a>, <a href="StoreIngestionTask.html#produceToStoreBufferService(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long,long)">produceToStoreBufferService</a>, <a href="StoreIngestionTask.html#produceToStoreBufferServiceOrKafka(java.lang.Iterable,com.linkedin.venice.pubsub.api.PubSubTopicPartition,java.lang.String,int)">produceToStoreBufferServiceOrKafka</a>, <a href="StoreIngestionTask.html#produceToStoreBufferServiceOrKafkaInBatch(java.lang.Iterable,com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String,int)">produceToStoreBufferServiceOrKafkaInBatch</a>, <a href="StoreIngestionTask.html#recordAssembledRecordSize(int,java.nio.ByteBuffer,java.nio.ByteBuffer,long)">recordAssembledRecordSize</a>, <a href="StoreIngestionTask.html#recordChecksumVerificationFailure()">recordChecksumVerificationFailure</a>, <a href="StoreIngestionTask.html#reportError(java.lang.String,int,java.lang.Exception)">reportError</a>, <a href="StoreIngestionTask.html#resetPartitionConsumptionOffset(com.linkedin.venice.pubsub.api.PubSubTopicPartition)">resetPartitionConsumptionOffset</a>, <a href="StoreIngestionTask.html#resolveSourceKafkaServersWithinTopicSwitch(com.linkedin.venice.kafka.protocol.TopicSwitch)">resolveSourceKafkaServersWithinTopicSwitch</a>, <a href="StoreIngestionTask.html#run()">run</a>, <a href="StoreIngestionTask.html#setLastConsumerException(java.lang.Exception)">setLastConsumerException</a>, <a href="StoreIngestionTask.html#setLastStoreIngestionException(java.lang.Exception)">setLastStoreIngestionException</a>, <a href="StoreIngestionTask.html#setPartitionConsumptionState(int,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">setPartitionConsumptionState</a>, <a href="StoreIngestionTask.html#shutdownAndWait(int)">shutdownAndWait</a>, <a href="StoreIngestionTask.html#subscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition)">subscribePartition</a>, <a href="StoreIngestionTask.html#subscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,boolean)">subscribePartition</a>, <a href="StoreIngestionTask.html#throwIfNotRunning()">throwIfNotRunning</a>, <a href="StoreIngestionTask.html#throwOrLogStorageFailureDependingIfStillSubscribed(int,com.linkedin.venice.exceptions.VeniceException)">throwOrLogStorageFailureDependingIfStillSubscribed</a>, <a href="StoreIngestionTask.html#unsubscribeFromTopic(com.linkedin.venice.pubsub.api.PubSubTopic,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">unsubscribeFromTopic</a>, <a href="StoreIngestionTask.html#unSubscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition)">unSubscribePartition</a>, <a href="StoreIngestionTask.html#unSubscribePartition(com.linkedin.venice.pubsub.api.PubSubTopicPartition,boolean)">unSubscribePartition</a>, <a href="StoreIngestionTask.html#updateAndSyncOffsetFromSnapshot(com.linkedin.davinci.validation.PartitionTracker,com.linkedin.venice.pubsub.api.PubSubTopicPartition)">updateAndSyncOffsetFromSnapshot</a>, <a href="StoreIngestionTask.html#updateOffsetMetadataAndSync(java.lang.String,int)">updateOffsetMetadataAndSync</a>, <a href="StoreIngestionTask.html#updateOffsetMetadataAndSyncOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">updateOffsetMetadataAndSyncOffset</a>, <a href="StoreIngestionTask.html#updateOffsetMetadataAndSyncOffset(com.linkedin.davinci.validation.DataIntegrityValidator,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">updateOffsetMetadataAndSyncOffset</a>, <a href="StoreIngestionTask.html#validateMessage(com.linkedin.davinci.validation.PartitionTracker.TopicType,com.linkedin.davinci.validation.DataIntegrityValidator,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">validateMessage</a>, <a href="StoreIngestionTask.html#waitVersionStateAvailable(java.lang.String)">waitVersionStateAvailable</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(com.linkedin.davinci.storage.StorageService,com.linkedin.davinci.kafka.consumer.StoreIngestionTaskFactory.Builder,com.linkedin.venice.meta.Store,com.linkedin.venice.meta.Version,java.util.Properties,java.util.function.BooleanSupplier,com.linkedin.davinci.config.VeniceStoreVersionConfig,int,boolean,java.util.Optional,com.linkedin.davinci.client.InternalDaVinciRecordTransformerConfig,com.linkedin.venice.utils.lazy.Lazy)">
<h3>ActiveActiveStoreIngestionTask</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ActiveActiveStoreIngestionTask</span><wbr><span class="parameters">(<a href="../../storage/StorageService.html" title="class in com.linkedin.davinci.storage">StorageService</a>&nbsp;storageService,
 <a href="StoreIngestionTaskFactory.Builder.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTaskFactory.Builder</a>&nbsp;builder,
 <a href="../../../venice/meta/Store.html" title="interface in com.linkedin.venice.meta">Store</a>&nbsp;store,
 <a href="../../../venice/meta/Version.html" title="interface in com.linkedin.venice.meta">Version</a>&nbsp;version,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link">Properties</a>&nbsp;kafkaConsumerProperties,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BooleanSupplier.html" title="class or interface in java.util.function" class="external-link">BooleanSupplier</a>&nbsp;isCurrentVersion,
 <a href="../../config/VeniceStoreVersionConfig.html" title="class in com.linkedin.davinci.config">VeniceStoreVersionConfig</a>&nbsp;storeConfig,
 int&nbsp;errorPartitionId,
 boolean&nbsp;isIsolatedIngestion,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../../store/cache/backend/ObjectCacheBackend.html" title="class in com.linkedin.davinci.store.cache.backend">ObjectCacheBackend</a>&gt;&nbsp;cacheBackend,
 <a href="../../client/InternalDaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client">InternalDaVinciRecordTransformerConfig</a>&nbsp;internalRecordTransformerConfig,
 <a href="../../../venice/utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.helix.manager.zk.ZKHelixAdmin&gt;&nbsp;zkHelixAdmin)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="delegateConsumerRecord(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,int,java.lang.String,int,long,long)">
<h3>delegateConsumerRecord</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="StoreIngestionTask.DelegateConsumerRecordResult.html" title="enum class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask.DelegateConsumerRecordResult</a></span>&nbsp;<span class="element-name">delegateConsumerRecord</span><wbr><span class="parameters">(<a href="PubSubMessageProcessedResultWrapper.html" title="class in com.linkedin.davinci.kafka.consumer">PubSubMessageProcessedResultWrapper</a>&nbsp;consumerRecordWrapper,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId,
 long&nbsp;beforeProcessingPerRecordTimestampNs,
 long&nbsp;beforeProcessingBatchRecordsTimestampMs)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html#delegateConsumerRecord(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,int,java.lang.String,int,long,long)">LeaderFollowerStoreIngestionTask</a></code></span></div>
<div class="block">The goal of this function is to possibly produce the incoming kafka message consumed from local VT, remote VT, RT or SR topic to
 local VT if needed. It's decided based on the function output of <a href="LeaderFollowerStoreIngestionTask.html#shouldProduceToVersionTopic(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)"><code>LeaderFollowerStoreIngestionTask.shouldProduceToVersionTopic(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)</code></a> and message type.
 It also perform any necessary additional computation operation such as for write-compute/update message.
 It returns a boolean indicating if it was produced to kafka or not.

 This function should be called as one of the first steps in processing pipeline for all messages consumed from any kafka topic.

 The caller of this function should only process this  further if the return is
 <a href="StoreIngestionTask.DelegateConsumerRecordResult.html#QUEUED_TO_DRAINER"><code>StoreIngestionTask.DelegateConsumerRecordResult.QUEUED_TO_DRAINER</code></a>.

 This function assumes <a href="LeaderFollowerStoreIngestionTask.html#shouldProcessRecord(com.linkedin.venice.pubsub.api.DefaultPubSubMessage)"><code>LeaderFollowerStoreIngestionTask.shouldProcessRecord(DefaultPubSubMessage)</code></a> has been called which happens in
 <a href="StoreIngestionTask.html#produceToStoreBufferServiceOrKafka(java.lang.Iterable,com.linkedin.venice.pubsub.api.PubSubTopicPartition,java.lang.String,int)"><code>StoreIngestionTask.produceToStoreBufferServiceOrKafka(Iterable, PubSubTopicPartition, String, int)</code></a>
 before calling this and the it was decided that this record needs to be processed. It does not perform any
 validation check on the PartitionConsumptionState object to keep the goal of the function simple and not overload.

 Also DIV validation is done here if the message is received from RT topic. For more info please see
 please see StoreIngestionTask#internalProcessConsumerRecord(PubSubMessage, PartitionConsumptionState, LeaderProducedRecordContext, int, String, long)

 This function may modify the original record in KME and it is unsafe to use the payload from KME directly after this function.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#delegateConsumerRecord(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,int,java.lang.String,int,long,long)">delegateConsumerRecord</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
<dt>Returns:</dt>
<dd>a <a href="StoreIngestionTask.DelegateConsumerRecordResult.html" title="enum class in com.linkedin.davinci.kafka.consumer"><code>StoreIngestionTask.DelegateConsumerRecordResult</code></a> indicating what to do with the record</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="putInStorageEngine(int,byte[],com.linkedin.venice.kafka.protocol.Put)">
<h3>putInStorageEngine</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">putInStorageEngine</span><wbr><span class="parameters">(int&nbsp;partition,
 byte[]&nbsp;keyBytes,
 <a href="../../../venice/kafka/protocol/Put.html" title="class in com.linkedin.venice.kafka.protocol">Put</a>&nbsp;put)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="StoreIngestionTask.html#putInStorageEngine(int,byte%5B%5D,com.linkedin.venice.kafka.protocol.Put)">StoreIngestionTask</a></code></span></div>
<div class="block">Persist Put record to storage engine.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="StoreIngestionTask.html#putInStorageEngine(int,byte%5B%5D,com.linkedin.venice.kafka.protocol.Put)">putInStorageEngine</a></code>&nbsp;in class&nbsp;<code><a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeFromStorageEngine(int,byte[],com.linkedin.venice.kafka.protocol.Delete)">
<h3>removeFromStorageEngine</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">removeFromStorageEngine</span><wbr><span class="parameters">(int&nbsp;partition,
 byte[]&nbsp;keyBytes,
 <a href="../../../venice/kafka/protocol/Delete.html" title="class in com.linkedin.venice.kafka.protocol">Delete</a>&nbsp;delete)</span></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="StoreIngestionTask.html#removeFromStorageEngine(int,byte%5B%5D,com.linkedin.venice.kafka.protocol.Delete)">removeFromStorageEngine</a></code>&nbsp;in class&nbsp;<code><a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRmdSerDe()">
<h3>getRmdSerDe</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../replication/merge/RmdSerDe.html" title="class in com.linkedin.davinci.replication.merge">RmdSerDe</a></span>&nbsp;<span class="element-name">getRmdSerDe</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getIngestionBatchProcessor()">
<h3>getIngestionBatchProcessor</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="IngestionBatchProcessor.html" title="class in com.linkedin.davinci.kafka.consumer">IngestionBatchProcessor</a></span>&nbsp;<span class="element-name">getIngestionBatchProcessor</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#getIngestionBatchProcessor()">getIngestionBatchProcessor</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processMessageAndMaybeProduceToKafka(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,int,java.lang.String,int,long,long)">
<h3>processMessageAndMaybeProduceToKafka</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processMessageAndMaybeProduceToKafka</span><wbr><span class="parameters">(<a href="PubSubMessageProcessedResultWrapper.html" title="class in com.linkedin.davinci.kafka.consumer">PubSubMessageProcessedResultWrapper</a>&nbsp;consumerRecordWrapper,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 int&nbsp;kafkaClusterId,
 long&nbsp;beforeProcessingRecordTimestampNs,
 long&nbsp;beforeProcessingBatchRecordsTimestampMs)</span></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#processMessageAndMaybeProduceToKafka(com.linkedin.davinci.kafka.consumer.PubSubMessageProcessedResultWrapper,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,int,java.lang.String,int,long,long)">processMessageAndMaybeProduceToKafka</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="calculateRtConsumptionStartPositions(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.PubSubTopic,java.util.List)">
<h3>calculateRtConsumptionStartPositions</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&gt;</span>&nbsp;<span class="element-name">calculateRtConsumptionStartPositions</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 <a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;newSourceTopic,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>&gt;&nbsp;unreachableBrokerList)</span></div>
<div class="block">Calculates real-time start positions for each PubSub broker during a topic switch in Active-Active replication.

 <p>For each broker, determines the appropriate starting position by either using the latest processed position
 or rewinding to a specific timestamp. Handles broker failures gracefully by adding unreachable brokers to a
 repair queue and requires a quorum of reachable brokers to proceed.</p></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#calculateRtConsumptionStartPositions(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.PubSubTopic,java.util.List)">calculateRtConsumptionStartPositions</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
<dt>Parameters:</dt>
<dd><code>pcs</code> - the partition consumption state containing topic switch information</dd>
<dd><code>newSourceTopic</code> - the new real-time topic to switch to</dd>
<dd><code>unreachableBrokerList</code> - output list populated with brokers that couldn't be contacted</dd>
<dt>Returns:</dt>
<dd>map of PubSub broker addresses to their calculated start positions</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../venice/exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code> - if no topic switch is configured or insufficient brokers are reachable</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startConsumingAsLeader(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>startConsumingAsLeader</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startConsumingAsLeader</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#startConsumingAsLeader(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">startConsumingAsLeader</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="consumerSubscribe(com.linkedin.venice.pubsub.api.PubSubTopicPartition,com.linkedin.venice.pubsub.api.PubSubPosition,java.lang.String)">
<h3>consumerSubscribe</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">consumerSubscribe</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/PubSubTopicPartition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopicPartition</a>&nbsp;pubSubTopicPartition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;startPosition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubAddress)</span></div>
<div class="block">Ensures the PubSub URL is present in the PubSub cluster URL-to-ID map before subscribing to a topic.
 Prevents subscription to unknown PubSub URLs, which can cause issues during message consumption.</div>
</section>
</li>
<li>
<section class="detail" id="leaderExecuteTopicSwitch(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.kafka.protocol.TopicSwitch,com.linkedin.venice.pubsub.api.PubSubTopic)">
<h3>leaderExecuteTopicSwitch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">leaderExecuteTopicSwitch</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/kafka/protocol/TopicSwitch.html" title="class in com.linkedin.venice.kafka.protocol">TopicSwitch</a>&nbsp;topicSwitch,
 <a href="../../../venice/pubsub/api/PubSubTopic.html" title="interface in com.linkedin.venice.pubsub.api">PubSubTopic</a>&nbsp;newSourceTopic)</span></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#leaderExecuteTopicSwitch(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.kafka.protocol.TopicSwitch,com.linkedin.venice.pubsub.api.PubSubTopic)">leaderExecuteTopicSwitch</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processTopicSwitch(com.linkedin.venice.kafka.protocol.ControlMessage,int,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>processTopicSwitch</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processTopicSwitch</span><wbr><span class="parameters">(<a href="../../../venice/kafka/protocol/ControlMessage.html" title="class in com.linkedin.venice.kafka.protocol">ControlMessage</a>&nbsp;controlMessage,
 int&nbsp;partition,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;position,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<div class="block">Process <a href="../../../venice/kafka/protocol/TopicSwitch.html" title="class in com.linkedin.venice.kafka.protocol"><code>TopicSwitch</code></a> control message at given partition position for a specific <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer"><code>PartitionConsumptionState</code></a>.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#processTopicSwitch(com.linkedin.venice.kafka.protocol.ControlMessage,int,com.linkedin.venice.pubsub.api.PubSubPosition,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">processTopicSwitch</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateLatestInMemoryProcessedOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,java.lang.String,boolean)">
<h3>updateLatestInMemoryProcessedOffset</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateLatestInMemoryProcessedOffset</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 boolean&nbsp;dryRun)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from class:&nbsp;<code><a href="StoreIngestionTask.html#updateLatestInMemoryProcessedOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,java.lang.String,boolean)">StoreIngestionTask</a></code></span></div>
<div class="block">Maintain the latest processed offsets by drainers in memory; in most of the time, these offsets are ahead of the
 checkpoint offsets inside <a href="../../../venice/offsets/OffsetRecord.html" title="class in com.linkedin.venice.offsets"><code>OffsetRecord</code></a>. Prior to update the offset in memory, the underlying storage engine
 should have persisted the given record.

 Dry-run mode will only do offset rewind check and it won't update the processed offset.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#updateLatestInMemoryProcessedOffset(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,java.lang.String,boolean)">updateLatestInMemoryProcessedOffset</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isRealTimeBufferReplayStarted(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>isRealTimeBufferReplayStarted</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isRealTimeBufferReplayStarted</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#isRealTimeBufferReplayStarted(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">isRealTimeBufferReplayStarted</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLatestPersistedRtPositionForLagMeasurement(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String)">
<h3>getLatestPersistedRtPositionForLagMeasurement</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a></span>&nbsp;<span class="element-name">getLatestPersistedRtPositionForLagMeasurement</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;upstreamKafkaUrl)</span></div>
<div class="block">Returns the latest processed upstream real-time offset for the given region.
 This is used to compute hybrid offset lag on a per-region basis, which is then
 used in conjunction with lag from other regions to determine ready-to-serve status.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#getLatestPersistedRtPositionForLagMeasurement(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String)">getLatestPersistedRtPositionForLagMeasurement</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLatestConsumedUpstreamPositionForHybridOffsetLagMeasurement(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String)">
<h3>getLatestConsumedUpstreamPositionForHybridOffsetLagMeasurement</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a></span>&nbsp;<span class="element-name">getLatestConsumedUpstreamPositionForHybridOffsetLagMeasurement</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;upstreamKafkaUrl)</span></div>
<div class="block">Different from the persisted upstream offset map in OffsetRecord, latest consumed upstream offset map is maintained
 for each individual Kafka url.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#getLatestConsumedUpstreamPositionForHybridOffsetLagMeasurement(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String)">getLatestConsumedUpstreamPositionForHybridOffsetLagMeasurement</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateLatestConsumedRtPositions(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String,com.linkedin.venice.pubsub.api.PubSubPosition)">
<h3>updateLatestConsumedRtPositions</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateLatestConsumedRtPositions</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;pubSubBrokerAddress,
 <a href="../../../venice/pubsub/api/PubSubPosition.html" title="interface in com.linkedin.venice.pubsub.api">PubSubPosition</a>&nbsp;pubSubPosition)</span></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#updateLatestConsumedRtPositions(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,java.lang.String,com.linkedin.venice.pubsub.api.PubSubPosition)">updateLatestConsumedRtPositions</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isTransientRecordBufferUsed(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">
<h3>isTransientRecordBufferUsed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isTransientRecordBufferUsed</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState)</span></div>
<div class="block">For Active-Active this buffer is always used, as long as we're post-EOP.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="StoreIngestionTask.html#isTransientRecordBufferUsed(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState)">isTransientRecordBufferUsed</a></code>&nbsp;in class&nbsp;<code><a href="StoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">StoreIngestionTask</a></code></dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="measureRtLagForMultiRegions(java.util.Set,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">
<h3>measureRtLagForMultiRegions</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">measureRtLagForMultiRegions</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;sourceRealTimeTopicKafkaURLs,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;pcs,
 boolean&nbsp;shouldLogLag)</span></div>
<div class="block">For stores in active/active mode, if no fabric is unreachable, return the maximum lag of all fabrics. If only one
 fabric is unreachable, return the maximum lag of other fabrics. If more than one fabrics are unreachable, return
 Long.MAX_VALUE, which means the partition is not ready-to-serve.
 TODO: For active/active incremental push stores or stores with only one samza job, we should consider the weight of
 unreachable fabric and make the decision. For example, we should not let partition ready-to-serve when the only
 source fabric is unreachable.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#measureRtLagForMultiRegions(java.util.Set,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,boolean)">measureRtLagForMultiRegions</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
<dt>Parameters:</dt>
<dd><code>sourceRealTimeTopicKafkaURLs</code> - </dd>
<dd><code>pcs</code> - </dd>
<dd><code>shouldLogLag</code> - </dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="getProduceToTopicFunction(com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,byte[],java.nio.ByteBuffer,java.nio.ByteBuffer,com.linkedin.venice.storage.protocol.ChunkedValueManifest,com.linkedin.venice.storage.protocol.ChunkedValueManifest,int,boolean)">
<h3>getProduceToTopicFunction</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BiConsumer.html" title="class or interface in java.util.function" class="external-link">BiConsumer</a>&lt;<a href="../../../venice/writer/ChunkAwareCallback.html" title="interface in com.linkedin.venice.writer">ChunkAwareCallback</a>,<wbr><a href="../../../venice/writer/LeaderMetadataWrapper.html" title="class in com.linkedin.venice.writer">LeaderMetadataWrapper</a>&gt;</span>&nbsp;<span class="element-name">getProduceToTopicFunction</span><wbr><span class="parameters">(<a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 byte[]&nbsp;key,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;updatedValueBytes,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a>&nbsp;updatedRmdBytes,
 <a href="../../../venice/storage/protocol/ChunkedValueManifest.html" title="class in com.linkedin.venice.storage.protocol">ChunkedValueManifest</a>&nbsp;oldValueManifest,
 <a href="../../../venice/storage/protocol/ChunkedValueManifest.html" title="class in com.linkedin.venice.storage.protocol">ChunkedValueManifest</a>&nbsp;oldRmdManifest,
 int&nbsp;valueSchemaId,
 boolean&nbsp;resultReuseInput)</span></div>
</section>
</li>
<li>
<section class="detail" id="createProducerCallback(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long)">
<h3>createProducerCallback</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="LeaderProducerCallback.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducerCallback</a></span>&nbsp;<span class="element-name">createProducerCallback</span><wbr><span class="parameters">(<a href="../../../venice/pubsub/api/DefaultPubSubMessage.html" title="interface in com.linkedin.venice.pubsub.api">DefaultPubSubMessage</a>&nbsp;consumerRecord,
 <a href="PartitionConsumptionState.html" title="class in com.linkedin.davinci.kafka.consumer">PartitionConsumptionState</a>&nbsp;partitionConsumptionState,
 <a href="LeaderProducedRecordContext.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderProducedRecordContext</a>&nbsp;leaderProducedRecordContext,
 int&nbsp;partition,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;kafkaUrl,
 long&nbsp;beforeProcessingRecordTimestampNs)</span></div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="LeaderFollowerStoreIngestionTask.html#createProducerCallback(com.linkedin.venice.pubsub.api.DefaultPubSubMessage,com.linkedin.davinci.kafka.consumer.PartitionConsumptionState,com.linkedin.davinci.kafka.consumer.LeaderProducedRecordContext,int,java.lang.String,long)">createProducerCallback</a></code>&nbsp;in class&nbsp;<code><a href="LeaderFollowerStoreIngestionTask.html" title="class in com.linkedin.davinci.kafka.consumer">LeaderFollowerStoreIngestionTask</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
