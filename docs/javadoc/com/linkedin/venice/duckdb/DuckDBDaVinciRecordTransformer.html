<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>DuckDBDaVinciRecordTransformer (venice API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.linkedin.venice.duckdb, class: DuckDBDaVinciRecordTransformer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.linkedin.venice.duckdb</a></div>
<h1 title="Class DuckDBDaVinciRecordTransformer" class="title">Class DuckDBDaVinciRecordTransformer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">com.linkedin.davinci.client.DaVinciRecordTransformer</a>&lt;org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord&gt;
<div class="inheritance">com.linkedin.venice.duckdb.DuckDBDaVinciRecordTransformer</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">DuckDBDaVinciRecordTransformer</span>
<span class="extends-implements">extends <a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformer</a>&lt;org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord&gt;</span></div>
<div class="block">Enables SQL querying of Venice data by integrating DuckDB into DaVinci clients.

 This transformer runs inside DaVinci clients and automatically mirrors Venice store data
 into a local DuckDB database. This allows you to query your Venice data using standard SQL
 instead of the Venice key-value API.

 When you configure this transformer in your DaVinci client, it will:
 - Create SQL tables that match your Venice store structure
 - Keep the tables updated with Venice data changes
 - Handle new Venice store versions by managing SQL table versions
 - Provide a SQL view that always points to the current data</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.lang.String,int,org.apache.avro.Schema,org.apache.avro.Schema,org.apache.avro.Schema,com.linkedin.davinci.client.DaVinciRecordTransformerConfig,java.lang.String,java.util.Set)" class="member-name-link">DuckDBDaVinciRecordTransformer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;storeName,
 int&nbsp;storeVersion,
 org.apache.avro.Schema&nbsp;keySchema,
 org.apache.avro.Schema&nbsp;inputValueSchema,
 org.apache.avro.Schema&nbsp;outputValueSchema,
 <a href="../../davinci/client/DaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerConfig</a>&nbsp;recordTransformerConfig,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;baseDir,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;columnsToProject)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#buildStoreNameWithVersion(int)" class="member-name-link">buildStoreNameWithVersion</a><wbr>(int&nbsp;version)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates a versioned table name by combining store name with version number.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Cleans up database connections and resources.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDuckDBUrl()" class="member-name-link">getDuckDBUrl</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the connection URL for the DuckDB database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onEndVersionIngestion(int)" class="member-name-link">onEndVersionIngestion</a><wbr>(int&nbsp;currentVersion)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when DaVinci finishes ingesting all data for the store.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#onStartVersionIngestion(int,boolean)" class="member-name-link">onStartVersionIngestion</a><wbr>(int&nbsp;partitionId,
 boolean&nbsp;isCurrentVersion)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called when DaVinci starts ingesting a Venice store version.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processDelete(com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)" class="member-name-link">processDelete</a><wbr>(<a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;key,
 int&nbsp;partitionId,
 <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerRecordMetadata</a>&nbsp;recordMetadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes a record from DuckDB when Venice receives a delete event.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processPut(com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)" class="member-name-link">processPut</a><wbr>(<a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;key,
 <a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;value,
 int&nbsp;partitionId,
 <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerRecordMetadata</a>&nbsp;recordMetadata)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Stores a new/updated record in DuckDB when Venice receives a put event.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../davinci/client/DaVinciRecordTransformerResult.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerResult</a>&lt;org.apache.avro.generic.GenericRecord&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#transform(com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)" class="member-name-link">transform</a><wbr>(<a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;key,
 <a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;value,
 int&nbsp;partitionId,
 <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerRecordMetadata</a>&nbsp;recordMetadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Note: This always returns UNCHANGED because we are not modifying the record that is persisted in DaVinci.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#useUniformInputValueSchema()" class="member-name-link">useUniformInputValueSchema</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Indicates this transformer works with consistent record schemas.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-com.linkedin.davinci.client.DaVinciRecordTransformer">Methods inherited from class&nbsp;com.linkedin.davinci.client.<a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformer</a></h3>
<code><a href="../../davinci/client/DaVinciRecordTransformer.html#getAlwaysBootstrapFromVersionTopic()">getAlwaysBootstrapFromVersionTopic</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#getClassHash()">getClassHash</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#getInputValueSchema()">getInputValueSchema</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#getKeySchema()">getKeySchema</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#getOutputValueSchema()">getOutputValueSchema</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#getRecordTransformerUtility()">getRecordTransformerUtility</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#getStoreName()">getStoreName</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#getStoreRecordsInDaVinci()">getStoreRecordsInDaVinci</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#getStoreVersion()">getStoreVersion</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#onRecovery(com.linkedin.davinci.store.StorageEngine,int,com.linkedin.venice.serialization.avro.InternalAvroSpecificSerializer,com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.pubsub.PubSubContext,java.util.Map,com.linkedin.venice.meta.ReadOnlySchemaRepository)">onRecovery</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#prependSchemaIdToHeader(java.nio.ByteBuffer,int)">prependSchemaIdToHeader</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#prependSchemaIdToHeader(O,int,com.linkedin.venice.compression.VeniceCompressor)">prependSchemaIdToHeader</a>, <a href="../../davinci/client/DaVinciRecordTransformer.html#transformAndProcessPut(com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)">transformAndProcessPut</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String,int,org.apache.avro.Schema,org.apache.avro.Schema,org.apache.avro.Schema,com.linkedin.davinci.client.DaVinciRecordTransformerConfig,java.lang.String,java.util.Set)">
<h3>DuckDBDaVinciRecordTransformer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">DuckDBDaVinciRecordTransformer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;storeName,
 int&nbsp;storeVersion,
 org.apache.avro.Schema&nbsp;keySchema,
 org.apache.avro.Schema&nbsp;inputValueSchema,
 org.apache.avro.Schema&nbsp;outputValueSchema,
 <a href="../../davinci/client/DaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerConfig</a>&nbsp;recordTransformerConfig,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;baseDir,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;columnsToProject)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>baseDir</code> - directory where DuckDB files will be stored</dd>
<dd><code>columnsToProject</code> - specific columns to include (leave null/empty for all columns)</dd>
<dt>Throws:</dt>
<dd><code><a href="../exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code> - if database setup fails</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="transform(com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)">
<h3>transform</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../davinci/client/DaVinciRecordTransformerResult.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerResult</a>&lt;org.apache.avro.generic.GenericRecord&gt;</span>&nbsp;<span class="element-name">transform</span><wbr><span class="parameters">(<a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;key,
 <a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;value,
 int&nbsp;partitionId,
 <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerRecordMetadata</a>&nbsp;recordMetadata)</span></div>
<div class="block">Note: This always returns UNCHANGED because we are not modifying the record that is persisted in DaVinci.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../davinci/client/DaVinciRecordTransformer.html#transform(com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)">transform</a></code>&nbsp;in class&nbsp;<code><a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformer</a>&lt;org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>key</code> - the key of the record to be transformed</dd>
<dd><code>value</code> - the value of the record to be transformed</dd>
<dd><code>partitionId</code> - what partition the record came from</dd>
<dd><code>recordMetadata</code> - returns <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client"><code>DaVinciRecordTransformerRecordMetadata</code></a> if enabled in <a href="../../davinci/client/DaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client"><code>DaVinciRecordTransformerConfig</code></a>, null otherwise</dd>
<dt>Returns:</dt>
<dd><a href="../../davinci/client/DaVinciRecordTransformerResult.html" title="class in com.linkedin.davinci.client"><code>DaVinciRecordTransformerResult</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processPut(com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)">
<h3>processPut</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processPut</span><wbr><span class="parameters">(<a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;key,
 <a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;value,
 int&nbsp;partitionId,
 <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerRecordMetadata</a>&nbsp;recordMetadata)</span></div>
<div class="block">Stores a new/updated record in DuckDB when Venice receives a put event.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../davinci/client/DaVinciRecordTransformer.html#processPut(com.linkedin.venice.utils.lazy.Lazy,com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)">processPut</a></code>&nbsp;in class&nbsp;<code><a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformer</a>&lt;org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>key</code> - the key of the record to be put</dd>
<dd><code>value</code> - the value of the record to be put, either the original value or the transformed value</dd>
<dd><code>partitionId</code> - what partition the record came from</dd>
<dd><code>recordMetadata</code> - returns <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client"><code>DaVinciRecordTransformerRecordMetadata</code></a> if enabled in <a href="../../davinci/client/DaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client"><code>DaVinciRecordTransformerConfig</code></a>, null otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processDelete(com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)">
<h3>processDelete</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">processDelete</span><wbr><span class="parameters">(<a href="../utils/lazy/Lazy.html" title="interface in com.linkedin.venice.utils.lazy">Lazy</a>&lt;org.apache.avro.generic.GenericRecord&gt;&nbsp;key,
 int&nbsp;partitionId,
 <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformerRecordMetadata</a>&nbsp;recordMetadata)</span></div>
<div class="block">Deletes a record from DuckDB when Venice receives a delete event.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../davinci/client/DaVinciRecordTransformer.html#processDelete(com.linkedin.venice.utils.lazy.Lazy,int,com.linkedin.davinci.client.DaVinciRecordTransformerRecordMetadata)">processDelete</a></code>&nbsp;in class&nbsp;<code><a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformer</a>&lt;org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>key</code> - the key of the record to be deleted</dd>
<dd><code>partitionId</code> - what partition the record is being deleted from</dd>
<dd><code>recordMetadata</code> - returns <a href="../../davinci/client/DaVinciRecordTransformerRecordMetadata.html" title="class in com.linkedin.davinci.client"><code>DaVinciRecordTransformerRecordMetadata</code></a> if enabled in <a href="../../davinci/client/DaVinciRecordTransformerConfig.html" title="class in com.linkedin.davinci.client"><code>DaVinciRecordTransformerConfig</code></a>, null otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onStartVersionIngestion(int,boolean)">
<h3>onStartVersionIngestion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onStartVersionIngestion</span><wbr><span class="parameters">(int&nbsp;partitionId,
 boolean&nbsp;isCurrentVersion)</span></div>
<div class="block">Called when DaVinci starts ingesting a Venice store version.

 Creates the SQL table for this version if it doesn't exist, or verifies
 the existing table structure is compatible. If this is the current version,
 it also creates a SQL view pointing to this table.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../davinci/client/DaVinciRecordTransformer.html#onStartVersionIngestion(int,boolean)">onStartVersionIngestion</a></code>&nbsp;in class&nbsp;<code><a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformer</a>&lt;org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>partitionId</code> - what partition is being subscribed</dd>
<dd><code>isCurrentVersion</code> - true if this is the active store version</dd>
<dt>Throws:</dt>
<dd><code><a href="../exceptions/VeniceException.html" title="class in com.linkedin.venice.exceptions">VeniceException</a></code> - if table creation fails or structure is incompatible</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/RuntimeException.html" title="class or interface in java.lang" class="external-link">RuntimeException</a></code> - if SQL operations fail</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onEndVersionIngestion(int)">
<h3>onEndVersionIngestion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onEndVersionIngestion</span><wbr><span class="parameters">(int&nbsp;currentVersion)</span></div>
<div class="block">Called when DaVinci finishes ingesting all data for the store.

 Updates the main SQL view to point to the current version's table and
 removes the table for the previous version that is retired.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../davinci/client/DaVinciRecordTransformer.html#onEndVersionIngestion(int)">onEndVersionIngestion</a></code>&nbsp;in class&nbsp;<code><a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformer</a>&lt;org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>currentVersion</code> - the version that is now active</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/RuntimeException.html" title="class or interface in java.lang" class="external-link">RuntimeException</a></code> - if SQL operations fail</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="useUniformInputValueSchema()">
<h3>useUniformInputValueSchema</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">useUniformInputValueSchema</span>()</div>
<div class="block">Indicates this transformer works with consistent record schemas.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../davinci/client/DaVinciRecordTransformer.html#useUniformInputValueSchema()">useUniformInputValueSchema</a></code>&nbsp;in class&nbsp;<code><a href="../../davinci/client/DaVinciRecordTransformer.html" title="class in com.linkedin.davinci.client">DaVinciRecordTransformer</a>&lt;org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord,<wbr>org.apache.avro.generic.GenericRecord&gt;</code></dd>
<dt>Returns:</dt>
<dd>true (requires all records to have the same structure)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDuckDBUrl()">
<h3>getDuckDBUrl</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getDuckDBUrl</span>()</div>
<div class="block">Gets the connection URL for the DuckDB database.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>DuckDB JDBC connection URL</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="buildStoreNameWithVersion(int)">
<h3>buildStoreNameWithVersion</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">buildStoreNameWithVersion</span><wbr><span class="parameters">(int&nbsp;version)</span></div>
<div class="block">Creates a versioned table name by combining store name with version number.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>version</code> - the store version number</dd>
<dt>Returns:</dt>
<dd>table name in format "storeName_v<version>"</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()</div>
<div class="block">Cleans up database connections and resources.

 This is called automatically when the transformer is closed.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
