<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>EventThrottler (venice API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.linkedin.venice.throttle, class: EventThrottler">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.linkedin.venice.throttle</a></div>
<h1 title="Class EventThrottler" class="title">Class EventThrottler</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.linkedin.venice.throttle.EventThrottler</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="VeniceRateLimiter.html" title="interface in com.linkedin.venice.throttle">VeniceRateLimiter</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../../davinci/kafka/consumer/VeniceAdaptiveIngestionThrottler.html" title="class in com.linkedin.davinci.kafka.consumer">VeniceAdaptiveIngestionThrottler</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">EventThrottler</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="VeniceRateLimiter.html" title="interface in com.linkedin.venice.throttle">VeniceRateLimiter</a></span></div>
<div class="block">A class to throttle Events to a certain rate

 This class takes a maximum rate in events/sec and a minimum interval over
 which to check the rate. The rate is measured over two rolling windows: one
 full window, and one in-flight window. Each window is bounded to the provided
 interval in ms, therefore, the total interval measured over is up to twice
 the provided interval parameter. If the current event rate exceeds the maximum,
 the call to <a href="#maybeThrottle(double)"><code>maybeThrottle(double)</code></a> will handle this case based on the given
 throttling strategy.

 This is a generalized IoThrottler as it existed before, which can be used to
 throttle Bytes read or written, number of entries scanned, etc.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-com.linkedin.venice.throttle.VeniceRateLimiter">Nested classes/interfaces inherited from interface&nbsp;com.linkedin.venice.throttle.<a href="VeniceRateLimiter.html" title="interface in com.linkedin.venice.throttle">VeniceRateLimiter</a></h2>
<code><a href="VeniceRateLimiter.RateLimiterType.html" title="enum class in com.linkedin.venice.throttle">VeniceRateLimiter.RateLimiterType</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a></code></div>
<div class="col-second even-row-color"><code><a href="#BLOCK_STRATEGY" class="member-name-link">BLOCK_STRATEGY</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a></code></div>
<div class="col-second odd-row-color"><code><a href="#REJECT_STRATEGY" class="member-name-link">REJECT_STRATEGY</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">EventThrottler</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(long)" class="member-name-link">EventThrottler</a><wbr>(long&nbsp;maxRatePerSecond)</code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(long,long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)" class="member-name-link">EventThrottler</a><wbr>(long&nbsp;maxRatePerSecond,
 long&nbsp;intervalMs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)" class="member-name-link">EventThrottler</a><wbr>(long&nbsp;maxRatePerSecond,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(io.tehuti.utils.Time,long,long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)" class="member-name-link">EventThrottler</a><wbr>(io.tehuti.utils.Time&nbsp;time,
 long&nbsp;maxRatePerSecond,
 long&nbsp;intervalMs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(io.tehuti.utils.Time,java.util.function.LongSupplier,long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)" class="member-name-link">EventThrottler</a><wbr>(io.tehuti.utils.Time&nbsp;time,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/LongSupplier.html" title="class or interface in java.util.function" class="external-link">LongSupplier</a>&nbsp;maxRatePerSecondProvider,
 long&nbsp;intervalMs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.util.function.LongSupplier,long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)" class="member-name-link">EventThrottler</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/LongSupplier.html" title="class or interface in java.util.function" class="external-link">LongSupplier</a>&nbsp;maxRatePerSecondProvider,
 long&nbsp;intervalMs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConfiguredMaxRatePerSecond()" class="member-name-link">getConfiguredMaxRatePerSecond</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>final long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaxRatePerSecond()" class="member-name-link">getMaxRatePerSecond</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getQuota()" class="member-name-link">getQuota</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected io.tehuti.metrics.MetricConfig</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRateConfig()" class="member-name-link">getRateConfig</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getThrottlerName()" class="member-name-link">getThrottlerName</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected io.tehuti.utils.Time</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTime()" class="member-name-link">getTime</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isCheckQuotaBeforeRecording()" class="member-name-link">isCheckQuotaBeforeRecording</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#maybeThrottle(double)" class="member-name-link">maybeThrottle</a><wbr>(double&nbsp;eventsSeen)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sleeps if necessary to slow down the caller.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setQuota(long)" class="member-name-link">setQuota</a><wbr>(long&nbsp;quota)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The following methods are used only when checking if the new quota requests are
 different from the existing quota.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tryAcquirePermit(int)" class="member-name-link">tryAcquirePermit</a><wbr>(int&nbsp;units)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Try to acquire permit for the given rcu.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="BLOCK_STRATEGY">
<h3>BLOCK_STRATEGY</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a></span>&nbsp;<span class="element-name">BLOCK_STRATEGY</span></div>
</section>
</li>
<li>
<section class="detail" id="REJECT_STRATEGY">
<h3>REJECT_STRATEGY</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a></span>&nbsp;<span class="element-name">REJECT_STRATEGY</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>EventThrottler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">EventThrottler</span>()</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(long)">
<h3>EventThrottler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">EventThrottler</span><wbr><span class="parameters">(long&nbsp;maxRatePerSecond)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxRatePerSecond</code> - Maximum rate that this throttler should allow (-1 is unlimited)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)">
<h3>EventThrottler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">EventThrottler</span><wbr><span class="parameters">(long&nbsp;maxRatePerSecond,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxRatePerSecond</code> - Maximum rate that this throttler should allow (-1 is unlimited)</dd>
<dd><code>throttlerName</code> - if specified, the throttler will share its limit with others named the same
                                  if null, the throttler will be independent of the others</dd>
<dd><code>throttlingStrategy</code> - the strategy how throttler handle the quota exceeding case.</dd>
<dd><code>checkQuotaBeforeRecording</code> - if true throttler will check the quota before recording usage, otherwise throttler
                                  will record usage then check the quota.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(long,long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)">
<h3>EventThrottler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">EventThrottler</span><wbr><span class="parameters">(long&nbsp;maxRatePerSecond,
 long&nbsp;intervalMs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxRatePerSecond</code> - Maximum rate that this throttler should allow (-1 is unlimited)</dd>
<dd><code>intervalMs</code> - Minimum interval over which the rate is measured (maximum is twice that)</dd>
<dd><code>throttlerName</code> - if specified, the throttler will share its limit with others named the same
                      if null, the throttler will be independent of the others</dd>
<dd><code>checkQuotaBeforeRecording</code> - if true throttler will check the quota before recording usage, otherwise throttler will record usage then check the quota.</dd>
<dd><code>throttlingStrategy</code> - the strategy how throttler handle the quota exceeding case.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(io.tehuti.utils.Time,long,long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)">
<h3>EventThrottler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">EventThrottler</span><wbr><span class="parameters">(io.tehuti.utils.Time&nbsp;time,
 long&nbsp;maxRatePerSecond,
 long&nbsp;intervalMs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>time</code> - Used to inject a <code>Time</code> in tests</dd>
<dd><code>maxRatePerSecond</code> - Maximum rate that this throttler should allow (-1 is unlimited)</dd>
<dd><code>intervalMs</code> - Minimum interval over which the rate is measured (maximum is twice that)</dd>
<dd><code>throttlerName</code> - if specified, the throttler will share its limit with others named the same
                      if null, the throttler will be independent of the others</dd>
<dd><code>checkQuotaBeforeRecording</code> - if true throttler will check the quota before recording usage, otherwise throttler will record usage then check the quota.</dd>
<dd><code>throttlingStrategy</code> - the strategy how throttler handle the quota exceeding case.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(java.util.function.LongSupplier,long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)">
<h3>EventThrottler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">EventThrottler</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/LongSupplier.html" title="class or interface in java.util.function" class="external-link">LongSupplier</a>&nbsp;maxRatePerSecondProvider,
 long&nbsp;intervalMs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxRatePerSecondProvider</code> - Provider for maximum rate that this throttler should allow (-1 is unlimited)</dd>
<dd><code>intervalMs</code> - Minimum interval over which the rate is measured (maximum is twice that)</dd>
<dd><code>throttlerName</code> - if specified, the throttler will share its limit with others named the same
                      if null, the throttler will be independent of the others</dd>
<dd><code>checkQuotaBeforeRecording</code> - if true throttler will check the quota before recording usage, otherwise throttler will record usage then check the quota.</dd>
<dd><code>throttlingStrategy</code> - the strategy how throttler handle the quota exceeding case.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(io.tehuti.utils.Time,java.util.function.LongSupplier,long,java.lang.String,boolean,com.linkedin.venice.throttle.EventThrottlingStrategy)">
<h3>EventThrottler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">EventThrottler</span><wbr><span class="parameters">(@Nonnull
 io.tehuti.utils.Time&nbsp;time,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/LongSupplier.html" title="class or interface in java.util.function" class="external-link">LongSupplier</a>&nbsp;maxRatePerSecondProvider,
 long&nbsp;intervalMs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;throttlerName,
 boolean&nbsp;checkQuotaBeforeRecording,
 @Nonnull
 <a href="EventThrottlingStrategy.html" title="interface in com.linkedin.venice.throttle">EventThrottlingStrategy</a>&nbsp;throttlingStrategy)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>time</code> - Used to inject a <code>Time</code> in tests</dd>
<dd><code>maxRatePerSecondProvider</code> - Provider for maximum rate that this throttler should allow (-1 is unlimited)</dd>
<dd><code>intervalMs</code> - Minimum interval over which the rate is measured (maximum is twice that)</dd>
<dd><code>throttlerName</code> - if specified, the throttler will share its limit with others named the same
                      if null, the throttler will be independent of the others</dd>
<dd><code>checkQuotaBeforeRecording</code> - if true throttler will check the quota before recording usage, otherwise throttler will record usage then check the quota.</dd>
<dd><code>throttlingStrategy</code> - the strategy how throttler handle the quota exceeding case.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="maybeThrottle(double)">
<h3>maybeThrottle</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">maybeThrottle</span><wbr><span class="parameters">(double&nbsp;eventsSeen)</span></div>
<div class="block">Sleeps if necessary to slow down the caller.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>eventsSeen</code> - Number of events seen since last invocation. Basis for
        determining whether its necessary to sleep.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaxRatePerSecond()">
<h3>getMaxRatePerSecond</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getMaxRatePerSecond</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getTime()">
<h3>getTime</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">io.tehuti.utils.Time</span>&nbsp;<span class="element-name">getTime</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getRateConfig()">
<h3>getRateConfig</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">io.tehuti.metrics.MetricConfig</span>&nbsp;<span class="element-name">getRateConfig</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getConfiguredMaxRatePerSecond()">
<h3>getConfiguredMaxRatePerSecond</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getConfiguredMaxRatePerSecond</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isCheckQuotaBeforeRecording()">
<h3>isCheckQuotaBeforeRecording</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isCheckQuotaBeforeRecording</span>()</div>
</section>
</li>
<li>
<section class="detail" id="tryAcquirePermit(int)">
<h3>tryAcquirePermit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">tryAcquirePermit</span><wbr><span class="parameters">(int&nbsp;units)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="VeniceRateLimiter.html#tryAcquirePermit(int)">VeniceRateLimiter</a></code></span></div>
<div class="block">Try to acquire permit for the given rcu. Will not block if permit is not available.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="VeniceRateLimiter.html#tryAcquirePermit(int)">tryAcquirePermit</a></code>&nbsp;in interface&nbsp;<code><a href="VeniceRateLimiter.html" title="interface in com.linkedin.venice.throttle">VeniceRateLimiter</a></code></dd>
<dt>Parameters:</dt>
<dd><code>units</code> - Number of units to acquire.</dd>
<dt>Returns:</dt>
<dd>true if permit is acquired, false otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setQuota(long)">
<h3>setQuota</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setQuota</span><wbr><span class="parameters">(long&nbsp;quota)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="VeniceRateLimiter.html#setQuota(long)">VeniceRateLimiter</a></code></span></div>
<div class="block">The following methods are used only when checking if the new quota requests are
 different from the existing quota.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="VeniceRateLimiter.html#setQuota(long)">setQuota</a></code>&nbsp;in interface&nbsp;<code><a href="VeniceRateLimiter.html" title="interface in com.linkedin.venice.throttle">VeniceRateLimiter</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getQuota()">
<h3>getQuota</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getQuota</span>()</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="VeniceRateLimiter.html#getQuota()">getQuota</a></code>&nbsp;in interface&nbsp;<code><a href="VeniceRateLimiter.html" title="interface in com.linkedin.venice.throttle">VeniceRateLimiter</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getThrottlerName()">
<h3>getThrottlerName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getThrottlerName</span>()</div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
